{"version":3,"sources":["config/Branding.ts","config/UseStyles.ts","config/MyTheme.ts","helpers/StoreTypedHooks.ts","images/logo.svg","components/common/Logo.tsx","components/common/PageTitle.tsx","components/dashboard/DashboardCard.tsx","components/dashboard/DashboardPage.tsx","components/navigation/LeftNavItem.tsx","components/navigation/LeftNav.tsx","components/navigation/TopNav.tsx","components/layouts/AdminPanelLayout.tsx","components/preloaders/EmptySection.tsx","components/layouts/LoginLayout.tsx","components/layouts/ErrorPage.tsx","components/layouts/NotFoundPage.tsx","components/login/LoginPage.tsx","components/forms/BackendField.tsx","components/forms/FieldSetHeader.tsx","components/forms/BackendFieldSet.tsx","config/FilterOptions.ts","components/forms/FormErrors.tsx","components/forms/SubmitButton.tsx","config/Nationalities.ts","components/forms/BackendCheckboxGroup.tsx","components/workers/AddEditWorkerForm.tsx","components/workers/AddEditWorkerPage.tsx","components/common/QuickSearchToolbar.tsx","helpers/FilterAllKeys.ts","components/requests/MyRequestsPage.tsx","components/workers/MyWorkersPage.tsx","components/common/SmallText.tsx","components/common/LabelValueLine.tsx","components/requests/ApplicationDetails.tsx","components/workers/Worker2Card.tsx","components/requests/HistoryItem.tsx","components/requests/UpdateRequestForm.tsx","components/requests/UpdateRequestPage.tsx","images/check.svg","components/common/SuccessBigMessage.tsx","components/workers/SuccessWorkerPage.tsx","components/requests/SuccessRequestPage.tsx","config/Regions.ts","components/settings/ProcessTemplateCard.tsx","components/settings/ProcessTemplate.tsx","components/settings/AgencyProcessTemplatesPage.tsx","components/layouts/UnauthorizedPage.tsx","components/settings/AgencySettingsPage.tsx","components/settings/SuccessAgencyPage.tsx","components/settings/AgencyQrCodePage.tsx","components/preloaders/MasterRouter.tsx","components/preloaders/MasterData.tsx","components/preloaders/MasterTheme.tsx","config/BeStoreDefault.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["light","lightest","Branding","primary","lighter","lightBg","warning","dark","slotColors","free","booked","off","hover","selected","shadowColor","color","Color","darken","alpha","toString","shadow","iOffset","iBlur","offset","slotColorsDot","text","secondary","string","fontSize","small","fontFamily","heading","body","niceShadow","borderRadius","niceRadius","transition","UseStyles","makeStyles","theme","createStyles","root","flexGrow","verticalAlign","marginTop","spacing","marginBottom","width","objectFit","borderTop","borderRight","borderBottom","objectFitContain","paper","padding","textAlign","palette","transitionDefault","wizardCardLink","display","boxShadow","background","textDecoration","hoverBox","userSelect","backgroundColor","MyTheme","createMuiTheme","main","contrastThreshold","tonalOffset","typography","typedHooks","createTypedHooks","useStoreActions","useStoreState","useStoreDispatch","Logo","props","src","logo","style","maxWidth","margin","maxHeight","styles","alt","PageTitle","Box","mb","Typography","variant","title","undefined","children","DashboardCard","bgcolor","p","css","onClick","cursor","textTransform","height","justifyContent","alignItems","py","value","Skeleton","animation","marginLeft","marginRight","DashboardPage","agency","s","item","dashSummary","dashboardSummary","cardGridProps","md","xs","Grid","container","direction","Avatar","process","_id","logoFileExt","titleAr","cr","newRequests","navigate","pendingRequests","myWorkers","customerReviews","LeftNavItem","first","nav","navItem","itemStyles","fontWeight","hasCount","count","mr","icon","className","wrappedTitle","Badge","badgeContent","ml","mx","my","to","Link","href","map","LeftNav","navs","key","countRequests","countWorkers","position","px","TopNav","logout","a","bg","gridItemStyle","lineHeight","top","right","left","zIndex","user","fullName","Button","finally","AdminPanelLayout","pb","pt","EmptySection","LoginLayout","useTheme","isMd","useMediaQuery","breakpoints","up","gradientDir","backgroundImage","textShadow","Container","ErrorPage","m","subtitle","NotFoundPage","LoginPage","login","useState","loggingIn","setLoggingIn","password","setPassword","email","setEmail","loginFail","reason","console","log","TextField","id","label","onChange","e","target","type","disabled","app","then","result","agencyId","catch","BackendField","name","field","useMemo","CamelToSentence","xsDefault","defaultXs","mdDefault","defaultMd","size","labelProps","shrink","fieldVariant","readOnly","rowsDefault","rows","textareaLines","numberMinimum","prefixAdornment","prefix","InputAdornment","suffixAdornment","suffix","fieldProps","formik","getFieldProps","checked","onBlur","error","touched","errors","helperText","selectOptions","length","menuRender","option","MenuItem","checkboxControl","Switch","Checkbox","unboundError","ignoreUnboundCheck","fieldRender","select","multiline","InputLabelProps","inputProps","min","step","InputProps","startAdornment","endAdornment","classes","notchedOutline","FormControlLabel","control","component","buttonIcon","Icon","hidden","currentTarget","files","file","setFieldValue","avatarWidth","replace","charAt","toUpperCase","slice","Error","FieldSetHeader","normal","header","BackendFieldSet","headerVariant","helpText","fields","religions","jobTitles","educationLevels","otherSkills","maritalStatus","complexions","fullTitle","isRentalHourly","feesBhdUnit","feesBhd","isRentalMonthly","Faker","random","number","max","x","FormErrors","Object","keys","push","listStylePosition","_","startCase","SubmitButton","navigateUrl","Divider","fullWidth","nationalities","BackendCheckboxGroup","options","arrayFieldName","defaultValues","values","useEffect","setValues","d","includes","arr","splice","indexOf","obj","FormGroup","row","AddEditWorkerForm","worker","templateFields","smallPicture","smallPictureFileExt","bigPicture","bigPictureFileExt","mainFields","t","personalFields","n","c","r","languageOptions","languageFields","picHelpClick","alert","onSubmit","handleSubmit","isSubmitting","AddEditWorkerPage","loading","setLoading","processTemplates","setProcessTemplates","processTemplateId","setProcessTemplateId","addressOriginalCountry","city","languageSkillArabic","languageSkillEnglish","agencyRemarks","cityOfBirth","demoLanguageSkillsText","educationalLevel","collected","isLocalTransfer","jobExperiences","jobTitle","localTransferReason","nationality","phone","processFees","referenceId","remarks","weightKg","setWorker","getTotalProcessFees","find","totalFeesBhd","getProcessTemplates","axios","get","withCredentials","data","response","formDisabled","uploadPicture","formData","FormData","append","folder","request","method","url","headers","isNew","initialValues","validationSchema","Yup","required","experienceYears","formValues","setSubmitting","promises","saveData","uploadSmallPicture","navigateOut","uploadBigPicture","Promise","all","message","toast","success","completed","QuickSearchToolbar","placeholder","Search","IconButton","aria-label","visibility","clearSearch","Clear","filterAllKeys","array","searchValue","searchRegex","RegExp","filter","some","test","MyRequestsPage","requests","setRequests","config","searchText","setSearchText","setRows","requestSearch","filteredRows","columns","sortable","disableColumnMenu","headerName","renderCell","params","ButtonGroup","Edit","valueFormatter","dateFormat","created","workerTwoYear","valueGetter","statusCodesTwoYear","code","statusCode","bgColor","whiteSpace","trackingCode","v","applicationForm","workerName","workerNationality","workerJobTitle","workerReferenceId","applicantName","applicantMobile","mobileNumber","sortModel","sort","disableSelectionOnClick","pageSize","components","Toolbar","componentsProps","toolbar","event","MyWorkersPage","workers","setWorkers","description","SmallText","dangerouslySetInnerHTML","__html","LabelValueLine","oneLine","oneLineTitleSizeMd","oneLineValueSizeMd","titleSizeMd","valueSizeMd","Fragment","ApplicationDetails","hVar","otherMobileNumber","specialNotes","Worker2Card","w","minHeight","alignSelf","monthlySalary","contractPeriod","HistoryItem","history","status","fontStyle","statusRemarks","createdBy","UpdateRequestForm","dropdownOptions","statusHistory","createdByUserId","UpdateRequestPage","setRequest","visibleStatus","nextCodes","dropdown","isReject","put","SuccessBigMessage","check","bigText","smallText","SuccessWorkerPage","SuccessRequestPage","Regions","bahrain","currencyCode","currencySymbol","currencySymbolAr","currencyDecimals","fixedProcessFees","lmraFees","vatPercentage","workPermitFees","ProcessTemplateCard","currencyCodeSuffix","region","editing","saving","fieldsFees1","defaultValue","otherFeesLabel","fieldsTotals","fieldsDurations","processDurationMinimumMonths","processDurationMaximumMonths","ProcessTemplate","newItem","setEditing","setSaving","countAssignedWorkers","smallFontSize","minMonths","border","accommodationFeesBhd","governmentFeesBhd","insuranceFeesBhd","otherFeesBhd","vatFeesBhd","processFeesBhd","optional","modified","AgencyProcessTemplatesPage","processes","setProcesses","addClicked","prev","Date","addMore","index","UnauthorizedPage","AgencySettingsPage","setAgency","datatype","pictureFields","termsFields","nationalitiesComponent","div","uploadLogo","showNationalitiesSection","showTermsAndConditionsSection","Alert","severity","SuccessAgencyPage","AgencyQrCodePage","qr","slug","rel","MasterRouter","from","noThrow","default","path","MasterData","dataLoaded","loadAllInit","MasterTheme","dir","document","documentElement","lang","ThemeProvider","loadUser","thunk","actions","userResponse","setItem","loadAgency","loadConfig","loadRequests","loadWorkers","loadDashboardSummary","dataLoading","payload","post","singleModel","itemDefault","action","state","beStoreDefault","beStore","createStore","App","store","useRtl","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5304f1c4.chunk.js","sourcesContent":["import Color from \"color\";\r\n\r\nconst warning = \"#ffd294\";\r\nconst light = \"#B3D9E3\";\r\nconst lightest = \"#E6F1F4\";\r\nconst darkWarning = Color(warning).darken(0.45).string();\r\n\r\nconst Branding = {\r\n  primary: \"#5890A7\",\r\n  light: light,\r\n  lighter: \"#D9E5EA\",\r\n  lightest: lightest,\r\n  lightBg: \"#f8f8f8\",\r\n  warning: \"#ffd294\",\r\n  dark: \"#172C42\",\r\n  slotColors: {\r\n    free: \"#a0ffae\",\r\n    booked: \"#ff929c\",\r\n    off: \"#dfdfdf\",\r\n    hover: light,\r\n    selected: lightest,\r\n    shadowColor: (color: string): string =>\r\n      new Color(color).darken(0.5).alpha(0.5).toString(),\r\n    shadow: (color: string, iOffset?: number, iBlur?: number): string => {\r\n      let offset = iOffset ? iOffset : 1;\r\n      let blur = iBlur ? iBlur : 2;\r\n      return (\r\n        offset +\r\n        \"px \" +\r\n        offset +\r\n        \"px \" +\r\n        blur +\r\n        \"px \" +\r\n        new Color(color).darken(0.5).alpha(0.5).toString()\r\n      );\r\n    },\r\n  },\r\n  slotColorsDot: {\r\n    free: \"#50af56\",\r\n    booked: \"#ea1542\",\r\n    off: \"#dfdfdf\",\r\n  },\r\n  text: {\r\n    primary: \"#000000\",\r\n    secondary: \"#777777\",\r\n    warning: darkWarning,\r\n  },\r\n  fontSize: {\r\n    small: 13,\r\n  },\r\n  fontFamily: {\r\n    heading: \"\",\r\n    body: '\"Roboto\", \"Segoe UI\", \"Helvetica\", \"Arial\", open_sansregular,Helvetica Neue,Helvetica,-apple-system, BlinkMacSystemFont, \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif',\r\n  },\r\n  shadow: {\r\n    niceShadow: \"0 0 25px #00000011\",\r\n  },\r\n  borderRadius: {\r\n    niceRadius: 10,\r\n  },\r\n  transition: \"all 0.1s\",\r\n};\r\n\r\n// const Branding1 = {\r\n//   primary: \"#5890A7\",\r\n//   light: \"#7AA6B8\",\r\n//   veryLight: \"#D9E5EA\",\r\n//   lightest: \"#EBF2F4\",\r\n//   lightBg: \"#f8f8f8\",\r\n// };\r\n\r\nexport default Branding;\r\n","import { createStyles, makeStyles, Theme } from \"@material-ui/core\";\r\nimport Branding from \"./Branding\";\r\n\r\nconst UseStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n      // backgroundColor: Branding.primary,\r\n      \"& a\": {\r\n        color: Branding.primary,\r\n      },\r\n      \"& .material-icons\": {\r\n        verticalAlign: \"text-bottom\",\r\n      },\r\n\r\n      \"& .transitionDefault\": {\r\n        transition: Branding.transition,\r\n      },\r\n      \"& .MuiTextField-root\": {\r\n        marginTop: theme.spacing(0.5),\r\n        marginBottom: theme.spacing(0.5),\r\n        width: \"100%\",\r\n      },\r\n      \"& .MuiAvatar-img\": {\r\n        objectFit: \"contain\",\r\n      },\r\n      \"& .notched-outline-no-border\":{\r\n        borderTop:0,\r\n        borderRight:0,\r\n        borderBottom:0\r\n      }\r\n    },\r\n    objectFitContain: {\r\n      \"& .MuiAvatar-img\": {\r\n        objectFit: \"contain\",\r\n      },\r\n    },\r\n    paper: {\r\n      padding: theme.spacing(2),\r\n      textAlign: \"center\",\r\n      color: theme.palette.text.primary,\r\n      // boxShadow: \"0 0 3px #000\",\r\n    },\r\n\r\n    transitionDefault: {\r\n      transition: Branding.transition,\r\n    },\r\n\r\n    wizardCardLink: {\r\n      display: \"block\",\r\n      color: \"#000\",\r\n      borderRadius: 10,\r\n      boxShadow: \"0 0 22px #00000022\",\r\n      background: \"white\",\r\n      textDecoration: \"none\",\r\n      transition: Branding.transition,\r\n      \"&:hover\": {\r\n        background: Branding.lightest,\r\n        boxShadow: \"0 0 2px \" + Branding.primary,\r\n      },\r\n    },\r\n\r\n    hoverBox: {\r\n      transition: Branding.transition,\r\n      userSelect: \"none\",\r\n      \"&:hover\": {\r\n        backgroundColor: Branding.lightBg,\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport default UseStyles;\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport Branding from \"./Branding\";\r\n\r\n\r\nconst MyTheme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      // light: will be calculated from palette.primary.main,\r\n      main: Branding.primary,\r\n      // dark: will be calculated from palette.primary.main,\r\n      // contrastText: will be calculated to contrast with palette.primary.main\r\n    },\r\n    secondary: {\r\n      // light: \"#0066ff\",\r\n      main: Branding.light,\r\n      // dark: will be calculated from palette.secondary.main,\r\n      // contrastText: \"#ffcc00\",\r\n    },\r\n    // info:{\r\n    //   main:Branding.light,\r\n    // },\r\n    // Used by `getContrastText()` to maximize the contrast between\r\n    // the background and the text.\r\n    contrastThreshold: 3,\r\n    // Used by the functions below to shift a color's luminance by approximately\r\n    // two indexes within its tonal palette.\r\n    // E.g., shift from Red 500 to Red 300 or Red 700.\r\n    tonalOffset: 0.2,\r\n  },\r\n  typography: {\r\n    fontFamily: Branding.fontFamily.body,\r\n  },\r\n});\r\n\r\nexport default MyTheme;\r\n","import { createTypedHooks } from 'easy-peasy';\r\nimport { IBeStoreModel } from '../interfaces/IBeStoreModel';\r\n\r\n\r\nconst typedHooks = createTypedHooks<IBeStoreModel>();\r\n\r\nexport const useStoreActions = typedHooks.useStoreActions;\r\nexport const useStoreDispatch = typedHooks.useStoreDispatch;\r\nexport const useStoreState = typedHooks.useStoreState;","export default __webpack_public_path__ + \"static/media/logo.d1016dba.svg\";","import React, { ReactElement } from \"react\";\r\nimport logo from \"../../images/logo.svg\";\r\n\r\ninterface Props {\r\n  styles?:React.CSSProperties;\r\n}\r\n\r\nexport default function Logo(props: Props): ReactElement {\r\n  return (\r\n    <img\r\n      src={logo}\r\n      style={{\r\n        display: \"block\",\r\n        maxWidth: \"100%\",\r\n        margin: \"0\",\r\n        maxHeight: 40,\r\n        ...props.styles\r\n      }}\r\n      alt=\"Estreeh Logo\"\r\n    />\r\n  );\r\n}\r\n","import { Box, Typography } from \"@material-ui/core\";\r\nimport React, { ReactElement } from \"react\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\ninterface Props {\r\n  title: React.ReactNode;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function PageTitle(props: Props): ReactElement {\r\n  return (\r\n    <Box mb={2}>\r\n      <Typography variant=\"h4\">{props.title}</Typography>\r\n      {props.children !== undefined && (\r\n        <Typography variant=\"h5\" style={{ color: Branding.text.secondary }}>\r\n          {props.children}\r\n        </Typography>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { Skeleton } from \"@material-ui/lab\";\r\nimport { CSSProperties } from \"@material-ui/styles\";\r\nimport React, { ReactElement } from \"react\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\ninterface Props {\r\n  title?: string;\r\n  value?: number;\r\n  onClick?: React.MouseEventHandler<HTMLElement>;\r\n}\r\n\r\nexport default function DashboardCard(props: Props): ReactElement {\r\n  const styles: CSSProperties = {\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n  };\r\n  return (\r\n    \r\n      <Box\r\n        bgcolor={Branding.lighter}\r\n        p={3}\r\n        borderRadius={Branding.borderRadius.niceRadius}\r\n        boxShadow={Branding.shadow.niceShadow}\r\n        textAlign=\"center\"\r\n        css={props.onClick === undefined ? undefined : {\r\n          cursor: \"pointer\",\r\n          \":hover\": {\r\n            backgroundColor: Branding.light,\r\n          },\r\n        }}\r\n        onClick={props.onClick}\r\n      >\r\n        <Box>\r\n          <Box\r\n            style={{\r\n              textTransform: \"uppercase\",\r\n              height: \"3rem\",\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            {props.title}\r\n          </Box>\r\n        </Box>\r\n        <Box py={1} fontSize=\"3.5rem\">\r\n          {props.value === undefined && (\r\n            <Skeleton\r\n              variant=\"text\"\r\n              width={120}\r\n              animation=\"wave\"\r\n              style={styles}\r\n            />\r\n          )}\r\n          {props.value !== undefined && <Box>{props.value}</Box>}\r\n        </Box>\r\n        {/* <Box>\r\n          <Skeleton variant=\"text\" animation=\"wave\" style={styles} />\r\n        </Box> */}\r\n      </Box>\r\n  );\r\n}\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  Grid,\r\n  GridSize,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { navigate, RouteComponentProps } from \"@reach/router\";\r\n\r\nimport { ReactElement } from \"react\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport DashboardCard from \"./DashboardCard\";\r\nimport { IUser } from \"estreeh-common-library/src/interfaces/IUser\";\r\nimport { S3Folder } from \"estreeh-common-library/src/types/S3Folder\";\r\nimport { useStoreState } from \"../../helpers/StoreTypedHooks\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  user: IUser;\r\n  // dashSummary: IApiResDashboardSummary | undefined;\r\n  // agency: IAgency | null;\r\n}\r\n\r\nexport default function DashboardPage(props: Props): ReactElement {\r\n  const agency = useStoreState((s) => s.agency.item);\r\n  const dashSummary = useStoreState((s) => s.dashboardSummary.item);\r\n  const folder: S3Folder = \"agency/sm\";\r\n  const cardGridProps: {\r\n    md: GridSize;\r\n    xs: GridSize;\r\n  } = {\r\n    md: 3,\r\n    xs: 12,\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Grid container direction=\"row-reverse\" spacing={2}>\r\n        <Grid item md={3} xs={12}>\r\n          <Box textAlign=\"center\">\r\n            <Avatar\r\n              src={\r\n                process.env.REACT_APP_IMAGES_ROOT +\r\n                \"/\" +\r\n                folder +\r\n                \"/\" +\r\n                agency?._id +\r\n                \".\" +\r\n                agency?.logoFileExt\r\n              }\r\n              variant=\"rounded\"\r\n              style={{\r\n                width: 260,\r\n                height: 220,\r\n                marginLeft: \"auto\",\r\n                marginRight: \"auto\",\r\n              }}\r\n            />\r\n            <Typography>{agency?.title}</Typography>\r\n            <Typography>{agency?.titleAr}</Typography>\r\n            <Typography>CR: {agency?.cr}</Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9} xs={12}>\r\n          <PageTitle title={`Agency Dashboard`} />\r\n          <Typography>Welcome to the Estreeh agency portal.</Typography>\r\n          <Typography>Please use the left menu to navigate.</Typography>\r\n          <Box p={3}>\r\n            <Grid container spacing={2} alignItems=\"center\">\r\n              <Grid item {...cardGridProps}>\r\n                <DashboardCard\r\n                  title=\"New Requests\"\r\n                  value={dashSummary?.newRequests}\r\n                  onClick={() => {\r\n                    navigate(\"my-requests\")\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item {...cardGridProps}>\r\n                <DashboardCard\r\n                  title=\"Pending Requests\"\r\n                  value={dashSummary?.pendingRequests}\r\n                  onClick={() => {\r\n                    navigate(\"my-requests\")\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item {...cardGridProps}>\r\n                <DashboardCard\r\n                  title=\"My Workers\"\r\n                  value={dashSummary?.myWorkers}\r\n                  onClick={() => {\r\n                    navigate(\"my-workers\")\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item {...cardGridProps}>\r\n                <DashboardCard\r\n                  title=\"Customer Reviews\"\r\n                  value={dashSummary?.customerReviews}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Link, Badge } from \"@material-ui/core\";\r\nimport { Link as RouterLink } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { INavItem } from \"estreeh-common-library/src/interfaces/INavItem\";\r\n\r\ninterface Props {\r\n  navItem: INavItem;\r\n  my: number;\r\n  mx: number;\r\n  first?: boolean;\r\n}\r\n\r\nexport default function LeftNavItem(props: Props): ReactElement {\r\n  const first = props.first !== undefined ? props.first : true;\r\n  const nav = props.navItem;\r\n  const itemStyles: React.CSSProperties = {\r\n    display: \"block\",\r\n    color: \"white\",\r\n    padding: \"2px 8px\",\r\n    // margin: \"20px 0\",\r\n    textDecoration: \"none\",\r\n    fontWeight: first ? \"bold\" : undefined,\r\n  };\r\n\r\n  const hasCount = props.navItem.count !== undefined && props.navItem.count>0;\r\n\r\n  let title: React.ReactNode = (\r\n    <Box mr={hasCount? 1.5: 0}>\r\n      {nav.icon && <i className={nav.icon} style={{ marginRight: 6 }}></i>}\r\n      {nav.title}\r\n    </Box>\r\n  );\r\n\r\n  let wrappedTitle = hasCount ? (<Badge badgeContent={props.navItem.count} color=\"secondary\">{title}</Badge>) : title;\r\n\r\n  return (\r\n    <Box ml={props.mx} my={props.my}>\r\n      {nav.to && (\r\n        <RouterLink style={{ ...itemStyles }} to={nav.to}>\r\n          {wrappedTitle}\r\n        </RouterLink>\r\n      )}\r\n      {!nav.to && (\r\n        <Link\r\n          href=\"#\"\r\n          style={{\r\n            ...itemStyles,\r\n          }}\r\n        >\r\n          {title}\r\n        </Link>\r\n      )}\r\n      {props.navItem.children !== undefined && (\r\n        <Box fontSize=\"90%\">\r\n          {props.navItem.children?.map((navItem) => (\r\n            <LeftNavItem\r\n              my={0.5}\r\n              mx={3}\r\n              navItem={navItem}\r\n              key={navItem.title + \"_\" + navItem.to}\r\n              first={false}\r\n            />\r\n          ))}\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import { Box } from \"@material-ui/core\";\r\nimport { Link } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { INavItem } from \"estreeh-common-library/src/interfaces/INavItem\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\nimport Logo from \"../common/Logo\";\r\nimport LeftNavItem from \"./LeftNavItem\";\r\n\r\ninterface Props {\r\n  countRequests: number;\r\n  countWorkers: number;\r\n}\r\n\r\nexport default function LeftNav(props: Props): ReactElement {\r\n  const navs: INavItem[] = [\r\n    {\r\n      key: \"dash1\",\r\n      title: \"Home\",\r\n      to: \"/panel/dashboard\",\r\n      // icon: \"las la-chart-pie\",\r\n      icon: \"las la-home\",\r\n    },\r\n    {\r\n      key: \"myrequests\",\r\n      title: \"My Requests\",\r\n      to: \"/panel/my-requests\",\r\n      icon: \"las la-list-alt\",\r\n      count: props.countRequests,\r\n    },\r\n\r\n    {\r\n      key: \"myworkers\",\r\n      title: \"My Workers\",\r\n      to: \"/panel/my-workers\",\r\n      icon: \"las la-users\",\r\n      count: props.countWorkers,\r\n      // count:92,\r\n      children: [\r\n        {\r\n          key: \"mw-manageworkers\",\r\n          title: \"Manage Workers\",\r\n          to: \"/panel/my-workers\",\r\n          icon: \"las la-users\",\r\n        },\r\n        {\r\n          key: \"mw-addnewworker\",\r\n          title: \"Add New Worker\",\r\n          to: \"/panel/my-workers/add\",\r\n          icon: \"las la-plus\",\r\n        },\r\n      ],\r\n    },\r\n\r\n    //TODO: New link: QR Code\r\n\r\n    {\r\n      key: \"agencysettings\",\r\n      title: \"Agency Settings\",\r\n      icon: \"las la-cog\",\r\n      children: [\r\n        {\r\n          key: \"as-settings\",\r\n          title: \"General Settings\",\r\n          to: \"/panel/agency/settings\",\r\n          icon: \"las la-server\",\r\n        },\r\n        // {\r\n        //   key: \"as-nationalities\",\r\n        //   title: \"Nationalities\",\r\n        //   to: \"/panel/agency/settings/nationalities\",\r\n        // },\r\n        {\r\n          key: \"as-processes\",\r\n          title: \"Process Templates\",\r\n          to: \"/panel/agency/settings/process-templates\",\r\n          icon: \"las la-border-none\",\r\n        },\r\n        // {\r\n        //   key: \"as-payment\",\r\n        //   title: \"Payment Methods\",\r\n        //   to: \"/panel/agency/settings/payment-methods\",\r\n        // },\r\n\r\n        // {\r\n        //   key: \"as-terms\",\r\n        //   title: \"Terms & Conditions\",\r\n        //   to: \"/panel/agency/settings/terms\",\r\n        // },\r\n        {\r\n          key: \"as-qr\",\r\n          title: \"QR Code\",\r\n          to:\"/panel/agency/settings/qr-code\",\r\n          icon: \"las la-qrcode\",\r\n        },\r\n        // {\r\n        //   title: \"Workflow\",\r\n        // },\r\n      ],\r\n    },\r\n    // {\r\n    //   title: \"Archive\",\r\n    //   to: \"/panel/archive\",\r\n    //   icon: \"arrow_forward_ios\",\r\n    // },\r\n    // {\r\n    //   key: \"logout\",\r\n    //   title: \"Logout\",\r\n    //   to: \"/login\",\r\n    //   icon: \"logout\",\r\n    // },\r\n  ];\r\n\r\n  return (\r\n    <Box position=\"fixed\" width=\"16.6666667%\" height=\"100%\">\r\n      <Box bgcolor={Branding.primary} color=\"white\" height=\"100%\">\r\n        <Box p={2} bgcolor={Branding.lighter} textAlign=\"left\">\r\n          <Link to=\"/panel\" style={{ display: \"inline-block\" }}>\r\n            <Logo />\r\n          </Link>\r\n        </Box>\r\n\r\n        <Box px={0} py={4}>\r\n          {navs.map((nav) => (\r\n            <LeftNavItem\r\n              my={2}\r\n              mx={1}\r\n              navItem={nav}\r\n              key={nav.title + \"_\" + nav.to}\r\n            />\r\n          ))}\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Avatar, Box, Button, Grid } from \"@material-ui/core\";\r\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\r\nimport { navigate } from \"@reach/router\";\r\nimport Color from \"color\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IUser } from \"estreeh-common-library/src/interfaces/IUser\";\r\nimport Branding from \"../../config/Branding\";\r\nimport { useStoreActions } from \"../../helpers/StoreTypedHooks\";\r\n\r\ninterface Props {\r\n  user: IUser;\r\n}\r\n\r\nexport default function TopNav(props: Props): ReactElement {\r\n  const logout = useStoreActions((a) => a.logout);\r\n\r\n  const bg = Color(Branding.lightBg).alpha(0.8).string();\r\n  const gridItemStyle: CSSProperties = {\r\n    lineHeight: \"40px\",\r\n  };\r\n  const logoutClick = () => {\r\n    logout().finally(() => {\r\n      navigate(\"/login\");\r\n    });\r\n  };\r\n  return (\r\n    <Box position=\"fixed\" top={0} right={0} left=\"16.66667%\" zIndex={1000}>\r\n      <Box p={2} bgcolor={bg}>\r\n        <Grid container spacing={3} direction=\"row-reverse\">\r\n          <Grid item>\r\n            <Box>\r\n              <Grid container spacing={1}>\r\n                <Grid item style={gridItemStyle}>\r\n                  Welcome {props.user.fullName}\r\n                </Grid>\r\n                <Grid item style={gridItemStyle}>\r\n                  <Button color=\"primary\" onClick={logoutClick}>\r\n                    Logout\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Avatar />\r\n                </Grid>\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Grid } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IUser } from \"estreeh-common-library/src/interfaces/IUser\";\r\nimport LeftNav from \"../navigation/LeftNav\";\r\nimport TopNav from \"../navigation/TopNav\";\r\nimport { useStoreState } from \"../../helpers/StoreTypedHooks\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  user: IUser;\r\n  // setUser: React.Dispatch<React.SetStateAction<IUser | undefined>>;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function AdminPanelLayout(props: Props): ReactElement {\r\n\r\n  const dashSummary = useStoreState(s => s.dashboardSummary.item);\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        style={{\r\n          height: \"100%\",\r\n        }}\r\n      >\r\n        <Grid item xs={12}>\r\n          <Grid\r\n            container\r\n            alignItems=\"stretch\"\r\n            style={{\r\n              height: \"100%\",\r\n            }}\r\n          >\r\n            <Grid item md={2} xs={2}>\r\n              <LeftNav countRequests={dashSummary?.pendingRequests ?? 0} countWorkers={dashSummary?.myWorkers ?? 0} />\r\n            </Grid>\r\n            <Grid item md={10} xs={10}>\r\n              <TopNav user={props.user}/>\r\n              <Box px={2} pb={2} pt={12}>\r\n                {props.children}\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","import { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function EmptySection(props: Props): ReactElement {\r\n  return <>{props.children}</>;\r\n}\r\n","import { Box, Container, Grid, Typography, useTheme } from \"@material-ui/core\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport Logo from \"../common/Logo\";\r\nimport Branding from \"../../config/Branding\";\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function LoginLayout(props: Props): ReactElement {\r\n  const white = \"#fff\";\r\n  const theme = useTheme();\r\n  const isMd = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n  const gradientDir = isMd ? \"right\" : \"bottom\"\r\n  return (\r\n    <Grid container>\r\n      <Grid item md={5} xs={12}>\r\n        <Box\r\n          px={4}\r\n          bgcolor={Branding.lightest}\r\n          style={{\r\n            backgroundImage: `linear-gradient(to ${gradientDir}, ${Branding.lightest} 75%, ${white})`,\r\n          }}\r\n          height={isMd ? \"100vh\" : undefined}\r\n        >\r\n          <Box py={isMd ? 6 : 3} style={{ textShadow: \"0 0 8px #ffffff\" }}>\r\n            <Logo\r\n              styles={{\r\n                maxHeight: isMd ? 120 : 50,\r\n                marginBottom: 8 * 3,\r\n              }}\r\n            />\r\n            <Typography variant={isMd ? \"h4\" : \"h5\"}>Estreeh Management Portal</Typography>\r\n            <Typography>\r\n              Please login to access your management portal.\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Grid>\r\n      <Grid item md={7} xs={12}>\r\n        <Container>\r\n          {isMd && (\r\n            <Box py={4}>\r\n              <Logo\r\n                styles={{\r\n                  maxHeight: 50,\r\n                  margin: \"0 auto\",\r\n                }}\r\n              />\r\n            </Box>\r\n          )}\r\n          <Box>{props.children}</Box>\r\n        </Container>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { ReactElement } from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { Box, Container, Link, Typography } from \"@material-ui/core\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  title: string;\r\n  subtitle?: string;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function ErrorPage(props: Props): ReactElement {\r\n  // navigate(\"/panel/myrequests\");\r\n  return (\r\n    <Container>\r\n      <Box m={5} p={3} boxShadow={Branding.shadow.niceShadow}>\r\n        <Typography variant=\"h1\">{props.title}</Typography>\r\n        <Typography variant=\"h5\">{props.subtitle}</Typography>\r\n\r\n        <Box py={2}>\r\n          <Box mb={1}>{props.children}</Box>\r\n          <Box>\r\n            <Typography>\r\n              <Link href=\"/\">Back to homepage.</Link>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { ReactElement } from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport ErrorPage from \"./ErrorPage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function NotFoundPage(props: Props): ReactElement {\r\n  return (\r\n    <ErrorPage title=\"404\" subtitle=\"🤨 Page not found\">\r\n      <Typography>\r\n        Sorry but the page you're looking for cannot be found. Please double\r\n        check the link you have entered.\r\n      </Typography>\r\n    </ErrorPage>\r\n  );\r\n}\r\n","import { Box, Button, Grid, TextField } from \"@material-ui/core\";\r\nimport { Link, RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement, useState } from \"react\";\r\nimport Branding from \"../../config/Branding\";\r\nimport { useStoreActions } from \"../../helpers/StoreTypedHooks\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function LoginPage(props: Props): ReactElement {\r\n  const login = useStoreActions((a) => a.login);\r\n\r\n  const [loggingIn, setLoggingIn] = useState(false);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  const loginFail = (reason?: string) => {\r\n    setLoggingIn(false);\r\n    if (reason !== undefined) console.log(\"Login error:\", reason);\r\n  };\r\n  const onClick = () => {\r\n    setLoggingIn(true);\r\n    login({\r\n      email,\r\n      password,\r\n      app: \"agency-be\",\r\n    })\r\n      .then((result) => {\r\n        const user = result;\r\n        if (user === undefined || user.agencyId === undefined) {\r\n          loginFail(\"User is not authorized to use this platform.\");\r\n        }\r\n      })\r\n      .catch((reason) => {\r\n        loginFail(reason);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box\r\n        p={3}\r\n        maxWidth={440}\r\n        marginLeft=\"auto\"\r\n        marginRight=\"auto\"\r\n        my={5}\r\n        boxShadow={Branding.shadow.niceShadow}\r\n        borderRadius={Branding.borderRadius.niceRadius}\r\n      >\r\n        <form>\r\n          <TextField\r\n            id=\"username\"\r\n            label=\"Email\"\r\n            variant=\"outlined\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <TextField\r\n            id=\"password\"\r\n            label=\"Password\"\r\n            variant=\"outlined\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <Box py={0}>\r\n            <Grid container spacing={1}>\r\n              <Grid item xs={6}>\r\n                {/* <FormControlLabel\r\n                  control={\r\n                    <Checkbox name=\"checkedB\" color=\"primary\" size=\"small\" />\r\n                  }\r\n                  label=\"Keep me Logged In\"\r\n                /> */}\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Box textAlign=\"right\">\r\n                  <Link to=\"reset-password\">\r\n                    <Box lineHeight=\"38px\">Forgot password?</Box>\r\n                  </Link>\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n          <Box py={3} textAlign=\"center\">\r\n            <Button\r\n              disabled={loggingIn}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={onClick}\r\n            >\r\n              Login\r\n            </Button>\r\n          </Box>\r\n        </form>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Grid,\r\n  GridSize,\r\n  Icon,\r\n  InputAdornment,\r\n  InputLabelProps,\r\n  MenuItem,\r\n  Switch,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { FieldInputProps, FormikProps } from \"formik\";\r\nimport React, { ReactElement, useMemo } from \"react\";\r\nimport { IBackendField } from \"estreeh-common-library/src/interfaces/IBackendField\";\r\nimport { IBackendFieldSelectOption } from \"estreeh-common-library/src/interfaces/IBackendFieldSelectOption\";\r\n\r\ninterface Props {\r\n  field: IBackendField;\r\n  defaultXs?: GridSize;\r\n  defaultMd?: GridSize;\r\n  size?: \"medium\" | \"small\";\r\n  formik?: FormikProps<any>;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport default function BackendField(props: Props): ReactElement {\r\n  const name = props.field.name.toString();\r\n  const label = useMemo(\r\n    () =>\r\n      props.field.label !== undefined\r\n        ? props.field.label\r\n        : CamelToSentence(name),\r\n    [props.field.label, name]\r\n  );\r\n\r\n  const id = \"field_\" + name;\r\n  const type = props.field.type !== undefined ? props.field.type : \"text\";\r\n  const variant =\r\n    props.field.variant !== undefined ? props.field.variant : \"text\";\r\n\r\n  const xsDefault = props.defaultXs !== undefined ? props.defaultXs : 12;\r\n  const mdDefault = props.defaultMd !== undefined ? props.defaultMd : 4;\r\n  const xs = props.field.xs !== undefined ? props.field.xs : xsDefault;\r\n  const md = props.field.md !== undefined ? props.field.md : mdDefault;\r\n\r\n  const size = props.size !== undefined ? props.size : \"medium\";\r\n\r\n  const labelProps: Partial<InputLabelProps> = useMemo(\r\n    () => ({\r\n      shrink: true,\r\n    }),\r\n    []\r\n  );\r\n\r\n  const fieldVariant = props.field.readOnly ? \"outlined\" : \"outlined\";\r\n\r\n  const rowsDefault = props.field.variant === \"textarea\" ? 3 : undefined;\r\n  const rows =\r\n    props.field.textareaLines !== undefined\r\n      ? props.field.textareaLines\r\n      : rowsDefault;\r\n\r\n  const numberMinimum =\r\n    props.field.numberMinimum !== undefined ? props.field.numberMinimum : 0;\r\n\r\n  const onChange = useMemo(\r\n    () => (props.field.onChange ? props.field.onChange : () => {}),\r\n    [props.field.onChange]\r\n  );\r\n\r\n  const prefixAdornment: React.ReactNode = useMemo(\r\n    () =>\r\n      props.field.prefix !== undefined ? (\r\n        <InputAdornment position=\"start\">{props.field.prefix}</InputAdornment>\r\n      ) : undefined,\r\n    [props.field.prefix]\r\n  );\r\n  const suffixAdornment: React.ReactNode = useMemo(\r\n    () =>\r\n      props.field.suffix !== undefined ? (\r\n        <InputAdornment position=\"end\">{props.field.suffix}</InputAdornment>\r\n      ) : undefined,\r\n    [props.field.suffix]\r\n  );\r\n\r\n  const fieldProps: Partial<FieldInputProps<any>> = useMemo(\r\n    () =>\r\n      props.formik !== undefined\r\n        ? props.formik.getFieldProps(name)\r\n        : {\r\n            onChange: onChange,\r\n            name: name,\r\n            value: props.field.value,\r\n            checked: props.field.value,\r\n            onBlur: () => {},\r\n          },\r\n    [onChange, name, props.field.value, props.formik]\r\n  );\r\n\r\n  //FIXME: On submit the errors dont show for fields that have long names (more than 1 word)\r\n\r\n  const error =\r\n    props.formik !== undefined &&\r\n    props.formik.touched[name] &&\r\n    props.formik.errors[name] !== undefined;\r\n\r\n  const helperText =\r\n    props.formik !== undefined &&\r\n    props.formik.touched[name] &&\r\n    props.formik.errors[name];\r\n\r\n  const selectOptions: IBackendFieldSelectOption[] | undefined = useMemo(\r\n    () =>\r\n      props.field.variant === \"select\"\r\n        ? props.field.selectOptions.length > 0\r\n          ? props.field.selectOptions\r\n          : [\r\n              // {\r\n              //   value: \"loading\",\r\n              //   title: \"Loading\",\r\n              // },\r\n            ]\r\n        : undefined,\r\n    [props.field]\r\n  );\r\n\r\n  const menuRender = useMemo(\r\n    () =>\r\n      selectOptions !== undefined &&\r\n      selectOptions.map((option) => {\r\n        const title =\r\n          option.title !== undefined\r\n            ? option.title\r\n            : CamelToSentence(option.value);\r\n        return (\r\n          <MenuItem\r\n            key={\"opt_\" + option.value}\r\n            value={option.value}\r\n            style={{ color: option.color }}\r\n          >\r\n            {title}\r\n          </MenuItem>\r\n        );\r\n      }),\r\n    [selectOptions]\r\n  );\r\n  // const checkboxOnChange = () => {\r\n  //   setChecked(!checked);\r\n  //   if (props.field.onChange !== undefined) {\r\n  //     // props.field.onChange();\r\n  //     // setChecked(props.field.value)\r\n  //   } else {\r\n  //   }\r\n  // };\r\n\r\n  // const selectOnChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n  //   setSelectValue(event.target.value);\r\n  // };\r\n\r\n  const checkboxControl = useMemo(\r\n    () =>\r\n      variant === \"switch\" ? (\r\n        <Switch\r\n          // checked={props.field.value}\r\n          color=\"primary\"\r\n          // defaultValue={props.field.defaultValue}\r\n          {...fieldProps}\r\n          checked={fieldProps.value}\r\n        />\r\n      ) : (\r\n        <Checkbox\r\n          // checked={props.field.value}\r\n          color=\"primary\"\r\n          // defaultValue={props.field.defaultValue}\r\n          {...fieldProps}\r\n          checked={fieldProps.value}\r\n        />\r\n      ),\r\n    [fieldProps, variant]\r\n  );\r\n\r\n  const unboundError =\r\n    props.formik === undefined && props.field.ignoreUnboundCheck !== true;\r\n\r\n  const fieldRender = useMemo(\r\n    () => (\r\n      <>\r\n        {((variant !== \"file\" &&\r\n          variant !== \"switch\" &&\r\n          variant !== \"checkbox\" &&\r\n          props.field.variant !== \"select\") ||\r\n          (props.field.variant === \"select\" &&\r\n            selectOptions !== undefined &&\r\n            selectOptions?.length > 0)) && (\r\n          <TextField\r\n            id={id}\r\n            color=\"primary\"\r\n            variant={fieldVariant}\r\n            type={props.field.type}\r\n            label={label + (unboundError ? \" [UNBOUND]\" : \"\")}\r\n            size={size}\r\n            select={variant === \"select\"}\r\n            multiline={variant === \"textarea\"}\r\n            rows={rows}\r\n            InputLabelProps={type === \"date\" ? labelProps : undefined}\r\n            // defaultValue={props.field.defaultValue}\r\n            disabled={props.field.disabled || props.disabled}\r\n            inputProps={{\r\n              min: numberMinimum,\r\n              step: props.field.step,\r\n            }}\r\n            InputProps={{\r\n              startAdornment: prefixAdornment,\r\n              endAdornment: suffixAdornment,\r\n              readOnly: props.field.readOnly,\r\n              classes: props.field.readOnly\r\n                ? {\r\n                    notchedOutline: \"notched-outline-no-border\",\r\n                  }\r\n                : undefined,\r\n            }}\r\n            error={error || unboundError}\r\n            helperText={helperText}\r\n            {...fieldProps}\r\n          >\r\n            {menuRender}\r\n          </TextField>\r\n        )}\r\n\r\n        {(variant === \"switch\" || variant === \"checkbox\") && (\r\n          <FormControlLabel\r\n            control={checkboxControl}\r\n            label={label}\r\n            {...fieldProps}\r\n          />\r\n        )}\r\n        {variant === \"file\" && (\r\n          <Button variant=\"contained\" component=\"label\">\r\n            {props.field.buttonIcon !== undefined && (\r\n              <Icon style={{ marginRight: 8 }}>{props.field.buttonIcon}</Icon>\r\n            )}\r\n            {label}\r\n            <input\r\n              type=\"file\"\r\n              id={id}\r\n              name={name}\r\n              hidden\r\n              onChange={(e) => {\r\n                if (e.currentTarget.files !== null) {\r\n                  const file = e.currentTarget.files[0];\r\n                  if (props.formik !== undefined) {\r\n                    console.log(file);\r\n                    props.formik.setFieldValue(name, file);\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n          </Button>\r\n        )}\r\n        {variant === \"file\" && false && (\r\n          <>\r\n            <label htmlFor={id}>\r\n              <Box mb={1}>\r\n                <Typography color=\"textSecondary\">{label}</Typography>\r\n              </Box>\r\n              <Avatar\r\n                variant=\"rounded\"\r\n                style={{\r\n                  width: props.field.avatarWidth,\r\n                  height: props.field.avatarWidth,\r\n                }}\r\n              />\r\n            </label>\r\n            <input\r\n              accept=\"image/*\"\r\n              style={{ display: \"none\" }}\r\n              id={id}\r\n              type=\"file\"\r\n              {...fieldProps}\r\n            />\r\n          </>\r\n        )}\r\n      </>\r\n    ),\r\n    [\r\n      checkboxControl,\r\n      error,\r\n      fieldProps,\r\n      fieldVariant,\r\n      helperText,\r\n      id,\r\n      label,\r\n      labelProps,\r\n      menuRender,\r\n      name,\r\n      numberMinimum,\r\n      prefixAdornment,\r\n      props.disabled,\r\n      props.field.avatarWidth,\r\n      props.field.buttonIcon,\r\n      props.field.disabled,\r\n      props.field.readOnly,\r\n      props.field.step,\r\n      props.field.type,\r\n      props.field.variant,\r\n      props.formik,\r\n      rows,\r\n      selectOptions,\r\n      size,\r\n      suffixAdornment,\r\n      type,\r\n      unboundError,\r\n      variant,\r\n    ]\r\n  );\r\n  return (\r\n    <Grid item xs={xs} md={md}>\r\n      {fieldRender}\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport function CamelToSentence(text: string | number) {\r\n  if (text !== undefined) {\r\n    const parsed: string = typeof text === \"string\" ? text : text.toString();\r\n    var result = parsed.replace(/([A-Z])/g, \" $1\");\r\n    return result.charAt(0).toUpperCase() + result.slice(1);\r\n  }\r\n  throw new Error(\"Text is undefined\");\r\n}\r\n","import { Box, Typography } from \"@material-ui/core\";\r\nimport React, { ReactElement } from \"react\";\r\nimport {HeaderVariant} from \"estreeh-common-library/src/types/HeaderVariant\";\r\n\r\ninterface Props {\r\n  header?: string;\r\n  variant?: HeaderVariant;\r\n}\r\n\r\nexport default function FieldSetHeader(props: Props): ReactElement {\r\n  const variant = props.variant !== undefined ? props.variant : \"normal\";\r\n  const small = variant === \"small\";\r\n  const normal = variant === \"normal\";\r\n\r\n  return (\r\n    <>\r\n      {props.header && (\r\n        <Box py={small ? 1 : 2}>\r\n          <Typography variant={normal ? \"h6\" : undefined}>\r\n            {props.header}\r\n          </Typography>\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { Box, Grid, GridSize, Typography } from \"@material-ui/core\";\r\nimport { FormikProps } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { HeaderVariant } from \"estreeh-common-library/src/types/HeaderVariant\";\r\nimport { IBackendField } from \"estreeh-common-library/src/interfaces/IBackendField\";\r\nimport BackendField from \"./BackendField\";\r\nimport FieldSetHeader from \"./FieldSetHeader\";\r\n\r\ninterface Props {\r\n  header?: string;\r\n  headerVariant?: HeaderVariant;\r\n  fields?: IBackendField[];\r\n  children?: React.ReactNode;\r\n  md?: GridSize;\r\n  xs?: GridSize;\r\n  formik?: FormikProps<any>;\r\n  disabled?: boolean;\r\n  helpText?: React.ReactNode;\r\n}\r\n\r\nexport default function BackendFieldSet(props: Props): ReactElement {\r\n  return (\r\n    <Box>\r\n      <FieldSetHeader header={props.header} variant={props.headerVariant} />\r\n      <Box mb={2}>\r\n        <Typography color=\"primary\">\r\n          {props.helpText}\r\n        </Typography>\r\n      </Box>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        {props.fields !== undefined &&\r\n          props.fields.map((field) => (\r\n            <BackendField\r\n              formik={props.formik}\r\n              field={field}\r\n              key={field.name.toString()}\r\n              defaultMd={props.md}\r\n              defaultXs={props.xs}\r\n              size=\"small\"\r\n              disabled={props.disabled}\r\n            />\r\n          ))}\r\n        {props.children !== undefined && (\r\n          <Grid item xs={props.xs} md={props.md}>\r\n            {props.children}\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","import Faker from \"faker\";\r\n\r\nexport const nationalitiesRentalForDemo = [\"Philippines\"];\r\n\r\nexport const religions = [\"Christian\", \"Hindu\", \"Muslim\"];\r\n\r\nexport const jobTitles = [\"House Maid\", \"Nanny\", \"Driver\", \"Chef\", \"Farmer\"];\r\nexport const jobTitlesRentalForDemo = [\"House Maid\", \"Nanny\"];\r\n\r\nexport const languageSkills = [\"Arabic\", \"English\"];\r\n\r\nexport const educationLevels = [\r\n  \"Elementary School\",\r\n  \"Intermediary School\",\r\n  \"High School\",\r\n  \"College\",\r\n];\r\n\r\nexport const otherSkills = [\r\n  \"Cooking\",\r\n  \"Washing\",\r\n  \"Cleaning\",\r\n  \"Babysitting\",\r\n  \"Care of Elder\",\r\n];\r\nexport const maritalStatus = [\"Single\", \"Married\"];\r\n\r\nexport const complexions = [\"White\", \"Fair\", \"Brown\", \"Black\", \"N/A\"];\r\n\r\nexport const minSalary = 80;\r\nexport const maxSalary = 400;\r\nexport const minProcessingFees = 600;\r\nexport const maxProcessingFees = 1800;\r\nexport const minExperience = 0;\r\nexport const maxExperience = 15;\r\nexport const minAge = 18;\r\nexport const maxAge = 65;\r\nexport const minWeight = 55;\r\nexport const maxWeight = 125;\r\n\r\n\r\nexport const localTransferExplanation =\r\n  \"This worker is already in Bahrain and will be Transferred from another sponsor.\";\r\n\r\nexport const rentalServicesDetailed = [\r\n  {\r\n    fullTitle: \"Lease hourly\",\r\n    title: \"By Hour\",\r\n    // remarks: Faker.random.arrayElement(demoRentalHourlyRemarks),\r\n    isRentalHourly: true,\r\n    feesBhdUnit: \"Hour\",\r\n    feesBhd: 2,\r\n  },\r\n  // {\r\n  //   title: \"Lease hourly scheduled\",\r\n  //   isRentalHourly: true,\r\n  //   // feesBhd: 4,\r\n  // },\r\n  {\r\n    fullTitle: \"Lease monthly\",\r\n    title: \"Full Month\",\r\n    // remarks: Faker.random.arrayElement(demoRentalMonthlyRemarks),\r\n    isRentalMonthly: true,\r\n    feesBhd: Faker.random.number({ min: 15, max: 35 }) * 10,\r\n    feesBhdUnit: \"Month\",\r\n  },\r\n  // {\r\n  //   fullTitle: \"Lease monthly with Stay Over\",\r\n  //   title: \"Full Month w/Stay\",\r\n  //   remarks: Faker.random.arrayElement(demoRentalMonthlyStayOverRemarks),\r\n  //   isRentalMonthlyStayOver: true,\r\n  //   feesBhd: Faker.random.number({ min: 15, max: 35 }) * 10,\r\n  //   feesBhdUnit: \"Month\",\r\n  // },\r\n];\r\n\r\nexport const rentalServices = rentalServicesDetailed.map((x) => x.fullTitle);\r\n","import { FormikErrors } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport _ from \"lodash\";\r\n\r\n\r\ninterface Error {\r\n  key: string;\r\n  value:\r\n    | string\r\n    | FormikErrors<any>\r\n    | string[]\r\n    | FormikErrors<any>[]\r\n    | undefined;\r\n}\r\n\r\ninterface Props {\r\n  errors: FormikErrors<any>;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nexport default function FormErrors(props: Props): ReactElement {\r\n  const hasErrors = Object.keys(props.errors).length > 0;\r\n  let errors: Error[] = [];\r\n  if (hasErrors) {\r\n    for (const e in props.errors) {\r\n      errors.push({ key: e, value: props.errors[e] });\r\n    }\r\n  }\r\n  return (\r\n    <ul\r\n      style={{\r\n        margin: 0,\r\n        padding: 0,\r\n      }}\r\n    >\r\n      {errors.map((error) => (\r\n        <li\r\n          style={{\r\n            listStylePosition:\"inside\",\r\n            color: \"red\",\r\n            fontSize: 11,\r\n            ...props.style,\r\n          }}\r\n        >\r\n         <strong>{_.startCase(error.key)}</strong> {error.value}\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","import { Box, Button, Divider } from \"@material-ui/core\";\r\nimport { NavigateFn } from \"@reach/router\";\r\nimport { FormikErrors } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport FormErrors from \"./FormErrors\";\r\n\r\ninterface Props {\r\n  title: string;\r\n  navigate?: NavigateFn;\r\n  navigateUrl?: string;\r\n  type?: \"button\" | \"submit\" | \"reset\";\r\n  disabled?: boolean;\r\n  errors?: FormikErrors<any>;\r\n}\r\n\r\nexport default function SubmitButton(props: Props): ReactElement {\r\n  const navigateUrl =\r\n    props.navigateUrl !== undefined ? props.navigateUrl : \"success\";\r\n  return (\r\n    <Box>\r\n      <Box my={3}>\r\n        <Divider />\r\n      </Box>\r\n      <Box\r\n        my={3}\r\n        textAlign=\"right\"\r\n        maxWidth={160}\r\n        marginLeft=\"auto\"\r\n        // marginRight=\"auto\"\r\n      >\r\n        {props.errors !== undefined && (\r\n          <Box my={3}>\r\n            <FormErrors errors={props.errors} />\r\n          </Box>\r\n        )}\r\n        <Button\r\n          fullWidth={true}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          type={props.type}\r\n          onClick={() => {\r\n            if (props.navigate) {\r\n              props.navigate(navigateUrl);\r\n            }\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          {props.title}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","\r\nexport const nationalities = [\r\n  \"Philippines\",\r\n  \"Indonesia\",\r\n  \"India\",\r\n  \"Sri Lanka\",\r\n  \"Ethiopia\",\r\n  \"Kenya\",\r\n  \"Ghana\",\r\n];\r\n","import { Checkbox, FormControlLabel, FormGroup } from \"@material-ui/core\";\r\nimport { FormikProps } from \"formik\";\r\nimport React, { ReactElement, useEffect, useState } from \"react\";\r\n\r\ninterface Props {\r\n  options: string[];\r\n  formik: FormikProps<any>;\r\n  arrayFieldName: string;\r\n}\r\n\r\ninterface Cb {\r\n  name: string;\r\n  label: string;\r\n  key: string;\r\n  checked: boolean;\r\n  onClick: React.MouseEventHandler<HTMLButtonElement>;\r\n}\r\n\r\nexport default function BackendCheckboxGroup({\r\n  options,\r\n  formik,\r\n  arrayFieldName,\r\n}: Props): ReactElement {\r\n  const defaultValues: string[] = formik.values[arrayFieldName];\r\n\r\n  useEffect(() => {\r\n    setValues(\r\n      options.map((d) => {\r\n        const checked = defaultValues.includes(d);\r\n        //TODO: (Future) optimize maybe? Do we need to re-create the onclick each time?\r\n        return {\r\n          name: d,\r\n          checked,\r\n          label: d,\r\n          key: d,\r\n          onClick: (e) => {\r\n            const arr: string[] = formik.values[arrayFieldName];\r\n            if (checked) {\r\n              arr.splice(arr.indexOf(d, 0), 1);\r\n            } else {\r\n              arr.push(d);\r\n            }\r\n            const obj: any = { ...formik.values };\r\n            obj[arrayFieldName] = arr;\r\n            formik.setValues(obj);\r\n          },\r\n        };\r\n      })\r\n    );\r\n  }, [arrayFieldName, defaultValues, formik, options]);\r\n\r\n  const [values, setValues] = useState<Cb[]>([]);\r\n  console.log(defaultValues);\r\n  return (\r\n    <FormGroup row>\r\n      {values.map((value) => (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              name={arrayFieldName + \"_\" + value.name}\r\n              color=\"primary\"\r\n              onClick={value.onClick}\r\n              checked={value.checked}\r\n            />\r\n          }\r\n          label={value.label}\r\n          name={arrayFieldName + \"_Lbl_\" + value.name}\r\n          key={value.key}\r\n        />\r\n      ))}\r\n    </FormGroup>\r\n  );\r\n}\r\n","import { FormikProps } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport BackendFieldSet from \"../forms/BackendFieldSet\";\r\nimport {\r\n  complexions,\r\n  educationLevels,\r\n  jobTitles,\r\n  maritalStatus,\r\n  otherSkills,\r\n  religions,\r\n} from \"../../config/FilterOptions\";\r\nimport { IBackendField } from \"estreeh-common-library/src/interfaces/IBackendField\";\r\nimport IWorkerTwoYear from \"estreeh-common-library/src/interfaces/IWorkerTwoYear\";\r\nimport { Avatar, Grid } from \"@material-ui/core\";\r\nimport SubmitButton from \"../forms/SubmitButton\";\r\nimport { IBackendFieldSelectOption } from \"estreeh-common-library/src/interfaces/IBackendFieldSelectOption\";\r\nimport { nationalities } from \"../../config/Nationalities\";\r\nimport { S3Folder } from \"estreeh-common-library/src/types/S3Folder\";\r\nimport BackendCheckboxGroup from \"../forms/BackendCheckboxGroup\";\r\n\r\ninterface Props {\r\n  formik: FormikProps<any>;\r\n  id?: string;\r\n  disabled: boolean;\r\n  worker: Partial<IWorkerTwoYear>;\r\n  templateFields: IBackendField[];\r\n}\r\n\r\nexport default function AddEditWorkerForm({\r\n  formik,\r\n  disabled,\r\n  id,\r\n  worker,\r\n  templateFields,\r\n}: Props): ReactElement {\r\n  const folderSm: S3Folder = \"2y/sm\";\r\n  const folderLg: S3Folder = \"2y/lg\";\r\n\r\n  const smallPicture =\r\n    process.env.REACT_APP_IMAGES_ROOT +\r\n    \"/\" +\r\n    folderSm +\r\n    \"/\" +\r\n    worker._id +\r\n    \".\" +\r\n    worker.smallPictureFileExt;\r\n  const bigPicture =\r\n    process.env.REACT_APP_IMAGES_ROOT +\r\n    \"/\" +\r\n    folderLg +\r\n    \"/\" +\r\n    worker._id +\r\n    \".\" +\r\n    worker.bigPictureFileExt;\r\n\r\n  const mainFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"name\",\r\n    },\r\n    {\r\n      name: \"referenceId\",\r\n    },\r\n\r\n    {\r\n      name: \"jobTitle\",\r\n      variant: \"select\",\r\n      selectOptions: jobTitles.map((t) => ({\r\n        value: t,\r\n      })),\r\n    },\r\n    {\r\n      name: \"monthlySalary\",\r\n    },\r\n    // {\r\n    //   name: \"contractPeriod\",\r\n    // },\r\n    {\r\n      name: \"phone\",\r\n    },\r\n    // {\r\n    //   name:\"hide\",\r\n    //   label:\"Hide this worker\",\r\n    //   variant:\"checkbox\"\r\n    // }\r\n    {\r\n      name: \"isLocalTransfer\",\r\n      variant: \"checkbox\",\r\n    },\r\n  ];\r\n\r\n  const localTransferFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"localTransferReason\",\r\n      variant: \"textarea\",\r\n    },\r\n  ];\r\n\r\n  const hidingFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"hidden\",\r\n      label: \"Hide this worker\",\r\n      variant: \"switch\",\r\n    },\r\n    {\r\n      name: \"collected\",\r\n      label: \"Worker collected (will also hide)\",\r\n      variant: \"switch\",\r\n    },\r\n  ];\r\n\r\n  const fileFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"uploadSmallPicture\",\r\n      variant: \"file\",\r\n      avatarWidth: 80,\r\n      buttonIcon: \"photo_camera\",\r\n    },\r\n    {\r\n      name: \"uploadBigPicture\",\r\n      variant: \"file\",\r\n      avatarWidth: 200,\r\n      buttonIcon: \"photo_camera\",\r\n    },\r\n  ];\r\n\r\n  const agencyOnlyFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"agencyRemarks\",\r\n      variant: \"textarea\",\r\n    },\r\n  ];\r\n\r\n  const personalFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"nationality\",\r\n      variant: \"select\",\r\n      selectOptions: nationalities.map((n) => ({\r\n        value: n,\r\n      })),\r\n    },\r\n    {\r\n      name: \"experienceYears\",\r\n      type: \"number\",\r\n    },\r\n\r\n    {\r\n      name: \"educationalLevel\",\r\n      variant: \"select\",\r\n      selectOptions: educationLevels.map((e) => ({\r\n        value: e,\r\n      })),\r\n    },\r\n    {\r\n      name: \"dateOfBirth\",\r\n      type: \"date\",\r\n    },\r\n    {\r\n      name: \"maritalStatus\",\r\n      variant: \"select\",\r\n      // selectOptions: [{ value: \"Single\" }, { value: \"Married\" }],\r\n      selectOptions: maritalStatus.map((m) => ({ value: m })),\r\n    },\r\n    {\r\n      name: \"age\",\r\n      type: \"number\",\r\n    },\r\n    {\r\n      name: \"weightKg\",\r\n    },\r\n    {\r\n      name: \"complexion\",\r\n      variant: \"select\",\r\n      selectOptions: complexions.map((c) => ({\r\n        value: c,\r\n      })),\r\n      // selectOptions: [\r\n      //   {\r\n      //     value: \"Light\",\r\n      //   },\r\n      //   {\r\n      //     value: \"Brown\",\r\n      //   },\r\n      //   {\r\n      //     value: \"Dark\",\r\n      //   },\r\n      // ],\r\n    },\r\n    {\r\n      name: \"religion\",\r\n      variant: \"select\",\r\n      selectOptions: religions.map((r) => ({ value: r })),\r\n      // selectOptions: [\r\n      //   {\r\n      //     value: \"None\",\r\n      //   },\r\n      //   {\r\n      //     value: \"Buddhist\",\r\n      //   },\r\n      //   {\r\n      //     value: \"Christian\",\r\n      //   },\r\n      //   {\r\n      //     value: \"Hindu\",\r\n      //   },\r\n      //   {\r\n      //     value: \"Muslim\",\r\n      //   },\r\n      // ],\r\n    },\r\n\r\n    // {\r\n    //   name: \"livingTown\",\r\n    // },\r\n    {\r\n      name: \"numberOfChildren\",\r\n      type: \"number\",\r\n    },\r\n    {\r\n      name: \"heightCm\",\r\n    },\r\n\r\n    {\r\n      name: \"remarks\",\r\n      variant: \"textarea\",\r\n      md: 9,\r\n    },\r\n  ];\r\n\r\n  const languageOptions: IBackendFieldSelectOption[] = [\r\n    {\r\n      value: \"Poor\",\r\n    },\r\n    {\r\n      value: \"Fair\",\r\n    },\r\n    {\r\n      value: \"Fluent\",\r\n    },\r\n  ];\r\n\r\n  const languageFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"languageSkillEnglish\",\r\n      variant: \"select\",\r\n      selectOptions: languageOptions,\r\n    },\r\n    {\r\n      name: \"languageSkillArabic\",\r\n      variant: \"select\",\r\n      selectOptions: languageOptions,\r\n    },\r\n  ];\r\n\r\n  // const skills = [\r\n  //   \"Baby Sitting\",\r\n  //   \"Cooking\",\r\n  //   \"Nursing\",\r\n  //   \"Elder Caring\",\r\n  //   \"Washing\",\r\n  //   \"Ironing\",\r\n  // ];\r\n\r\n  function picHelpClick() {\r\n    alert(\r\n      \"To change picture please use the Upload Picture buttons near the end of this page.\"\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={formik.handleSubmit}>\r\n      {id !== undefined && (\r\n        <Grid container spacing={2}>\r\n          <Grid item>\r\n            <Avatar\r\n              src={smallPicture}\r\n              variant=\"rounded\"\r\n              style={{\r\n                width: 90,\r\n                height: 90,\r\n                cursor: \"help\",\r\n              }}\r\n              onClick={picHelpClick}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <PageTitle title={worker.name} />\r\n          </Grid>\r\n        </Grid>\r\n      )}\r\n      <BackendFieldSet\r\n        fields={mainFields}\r\n        header=\"Main Information\"\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={localTransferFields}\r\n        md={7}\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={templateFields}\r\n        header=\"Process Template\"\r\n        // formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={personalFields}\r\n        header=\"Personal Details\"\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={hidingFields}\r\n        header=\"Show/Hide Settings\"\r\n        helpText=\"WARNING: Enabling any of these options will hide the worker!\"\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={languageFields}\r\n        header=\"Language Skills\"\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n\r\n      <BackendFieldSet\r\n        header=\"Skills\"\r\n        xs={12}\r\n        formik={formik}\r\n        disabled={disabled}\r\n      >\r\n        <BackendCheckboxGroup\r\n          options={otherSkills}\r\n          formik={formik}\r\n          arrayFieldName=\"otherSkills\"\r\n        />\r\n      </BackendFieldSet>\r\n      <BackendFieldSet header=\"Pictures\" xs={12}>\r\n        <Grid container>\r\n          <Grid item xs={4}>\r\n            <Avatar\r\n              src={smallPicture}\r\n              variant=\"rounded\"\r\n              style={{\r\n                width: 160,\r\n                height: 160,\r\n                cursor: \"help\",\r\n              }}\r\n              onClick={picHelpClick}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <Avatar\r\n              src={bigPicture}\r\n              variant=\"rounded\"\r\n              style={{\r\n                width: 240,\r\n                height: 320,\r\n                cursor: \"help\",\r\n              }}\r\n              onClick={picHelpClick}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </BackendFieldSet>\r\n      <BackendFieldSet\r\n        fields={fileFields}\r\n        formik={formik}\r\n        disabled={disabled}\r\n        // header=\"Picture Uploads\"\r\n        // helpText=\"Use the below buttons to change the current pictures.\"\r\n      />\r\n      <BackendFieldSet\r\n        fields={agencyOnlyFields}\r\n        header=\"Agency Only Information\"\r\n        helpText=\"This information will be visible only to the Agency. It will NOT be visible to the customers.\"\r\n        md={7}\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <SubmitButton\r\n        title={formik.isSubmitting ? \"Saving...\" : \"Save\"}\r\n        errors={formik.errors}\r\n        type=\"submit\"\r\n        //TODO: The button does not get disabled.....\r\n        disabled={disabled || formik.isSubmitting}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","import { Box, Typography } from \"@material-ui/core\";\r\nimport { Link, RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement, useEffect, useState } from \"react\";\r\nimport { IBackendField } from \"estreeh-common-library/src/interfaces/IBackendField\";\r\nimport { Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport IWorkerTwoYear from \"estreeh-common-library/src/interfaces/IWorkerTwoYear\";\r\n\r\nimport { IResponse } from \"estreeh-common-library/src/interfaces/IResponse\";\r\nimport { IProcessTemplate } from \"estreeh-common-library/src/interfaces/IProcessTemplate\";\r\nimport { toast } from \"react-toastify\";\r\nimport AddEditWorkerForm from \"./AddEditWorkerForm\";\r\nimport { S3Folder } from \"estreeh-common-library/src/types/S3Folder\";\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport PageTitle from \"../common/PageTitle\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  id?: string;\r\n}\r\n\r\ninterface CompletedProps {\r\n  result: AxiosResponse<IResponse>;\r\n  navigateOut: boolean;\r\n  setSubmitting: Function;\r\n}\r\n\r\nexport default function AddEditWorkerPage(props: Props): ReactElement {\r\n  const [loading, setLoading] = useState(true);\r\n  // const [saving, setSaving] = useState(false);\r\n  const [processTemplates, setProcessTemplates] = useState<IProcessTemplate[]>(\r\n    []\r\n  );\r\n  const [processTemplateId, setProcessTemplateId] = useState(\"\");\r\n  // const [pendingRequests, setPendingRequests] = useState(9999);\r\n  // const [formikSubmitting, setFormikSubmitting] = useState<\r\n  //   ((isSubmitting: boolean) => void) | undefined\r\n  // >(undefined);\r\n\r\n  const [worker, setWorker] = useState<Partial<IWorkerTwoYear>>({\r\n    addressOriginalCountry: {\r\n      city: \"\",\r\n    },\r\n    // age: 0,\r\n    // agencyId: \"\",\r\n    // created: new Date(),\r\n    // dateOfBirth: new Date(),\r\n    // modified: new Date(),\r\n    // monthlySalary: 0,\r\n    // numberOfChildren: 0,\r\n    // experienceYears: 0,\r\n    // heightCm: 0,\r\n    languageSkillArabic: \"Fair\",\r\n    languageSkillEnglish: \"Fair\",\r\n    agencyRemarks: \"\",\r\n    cityOfBirth: \"\",\r\n    // contractPeriod: 2,\r\n    demoLanguageSkillsText: \"\",\r\n    educationalLevel: \"\",\r\n    hidden: false,\r\n    collected: false,\r\n    isLocalTransfer: false,\r\n    jobExperiences: [],\r\n    jobTitle: \"\",\r\n    localTransferReason: \"\",\r\n    maritalStatus: \"\",\r\n    name: \"\",\r\n    nationality: \"\",\r\n    otherSkills: [],\r\n    phone: \"\",\r\n    processFees: 0,\r\n    processTemplateId: \"\",\r\n    referenceId: \"\",\r\n    remarks: \"\",\r\n    weightKg: 0,\r\n  });\r\n\r\n  function getTotalProcessFees() {\r\n    const t = processTemplates.find((x) => x._id === processTemplateId);\r\n    if (t === undefined) return 0;\r\n    return t.totalFeesBhd;\r\n  }\r\n\r\n  function getProcessTemplates() {\r\n    axios\r\n      .get<IResponse<IProcessTemplate[]>>(\r\n        process.env.REACT_APP_API_ROOT + \"/be/process-templates\",\r\n        { withCredentials: true }\r\n      )\r\n      .then((result) => {\r\n        setProcessTemplates(result.data.data);\r\n        setLoading(false);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      if (props.id !== undefined) {\r\n        axios\r\n          .get<IResponse<IWorkerTwoYear>>(\r\n            process.env.REACT_APP_API_ROOT + \"/be/workers-two-year/\" + props.id,\r\n            { withCredentials: true }\r\n          )\r\n          .then((response) => {\r\n            let worker = response.data.data;\r\n            setWorker(worker);\r\n            setProcessTemplateId(worker.processTemplateId);\r\n            getProcessTemplates();\r\n          });\r\n      } else {\r\n        getProcessTemplates();\r\n      }\r\n    }\r\n  }, [loading, props.id]);\r\n\r\n  const templateFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"processTemplateId\",\r\n      variant: \"select\",\r\n      selectOptions: processTemplates.map((p) => ({\r\n        value: p._id ? p._id : \"NOVAL\",\r\n        title: p.title,\r\n      })),\r\n      value: processTemplateId,\r\n      onChange: (e) => {\r\n        setProcessTemplateId(e.target.value);\r\n      },\r\n      ignoreUnboundCheck: true,\r\n    },\r\n\r\n    {\r\n      name: \"processFees\",\r\n      readOnly: true,\r\n      value: getTotalProcessFees(),\r\n      ignoreUnboundCheck: true,\r\n    },\r\n  ];\r\n\r\n  const formDisabled = loading;\r\n\r\n  function uploadPicture(props: {\r\n    _id: string;\r\n    file: any;\r\n    folder: S3Folder;\r\n    result: any;\r\n    setSubmitting: (isSubmitting: boolean) => void;\r\n    navigateOut: boolean;\r\n  }) {\r\n    let formData = new FormData();\r\n    formData.append(\"_id\", props._id);\r\n    formData.append(\"folder\", props.folder);\r\n    formData.append(\"file\", props.file);\r\n    return axios.request<IResponse>({\r\n      method: \"PUT\",\r\n      url: process.env.REACT_APP_API_ROOT + \"/be/workers-two-year/picture\",\r\n      data: formData,\r\n      withCredentials: true,\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n    // .then((result) => {\r\n    //   toast.success(result.data.message);\r\n    //   completed(props.result, props.navigateOut, props.setSubmitting);\r\n    // });\r\n  }\r\n\r\n  // const updatePending = (increment: number, setSubmitting: Function) => {\r\n  // let p = pendingRequests + increment;\r\n\r\n  // console.log(\"Pending requests ::\", pendingRequests, \"now:\", p);\r\n  // if (p <= 0) {\r\n  // setSubmitting(false);\r\n\r\n  // p = 9999;\r\n  // } else {\r\n  // setSubmitting(true);\r\n  // }\r\n  // setPendingRequests(p);\r\n  // };\r\n\r\n  function completed(props: CompletedProps) {\r\n    const message = props.result.data.message\r\n      ? props.result.data.message\r\n      : \"No Message.\";\r\n    toast.success(message);\r\n    // updatePending(-1, props.setSubmitting);\r\n  }\r\n\r\n  async function saveData(values: any, isNew: boolean) {\r\n    const url = process.env.REACT_APP_API_ROOT + \"/be/workers-two-year\";\r\n    const method = isNew ? \"POST\" : \"PUT\";\r\n    return axios.request<IResponse<IWorkerTwoYear>>({\r\n      url,\r\n      method,\r\n      data: values,\r\n      withCredentials: true,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <PageTitle title={props.id===undefined? \"Add a New Worker\" : \"Edit Worker\"} />\r\n      {loading && (\r\n        <Typography>\r\n          Loading <strong>Worker Details</strong> and{\" \"}\r\n          <strong>Process Templates...</strong>\r\n        </Typography>\r\n      )}\r\n      {!loading && processTemplates.length < 1 && (\r\n        <Typography>\r\n          To add a worker, you must add one <b>Process Template</b> at least.\r\n          <br />\r\n          <br />\r\n          To do that, please access the \"Process Templates\" using the left-side\r\n          navigation, or{\" \"}\r\n          <Link to=\"/panel/agency/settings/process-templates\">click here</Link>.\r\n        </Typography>\r\n      )}\r\n      {!loading && processTemplates.length > 0 && (\r\n        <>\r\n        \r\n        <Formik\r\n          initialValues={worker}\r\n          validationSchema={Yup.object({\r\n            name: Yup.string().required(\"Required\"),\r\n            experienceYears: Yup.number().required(\"Required\"),\r\n            // contractPeriod: Yup.number().required(\"Required\"),\r\n            // monthlySalary: Yup.number().required(\"Required\"),\r\n            hidden: Yup.bool().required(\"Required\"),\r\n\r\n            // processTemplateId: Yup.string().required(\"Required\"),\r\n          })}\r\n          onSubmit={(formValues, { setSubmitting }) => {\r\n            setSubmitting(true);\r\n            // setSaving(true);\r\n\r\n            const values: Partial<IWorkerTwoYear> = {\r\n              ...formValues,\r\n              processTemplateId,\r\n              processFees: getTotalProcessFees(),\r\n            };\r\n\r\n            const isNew = props.id === undefined;\r\n\r\n            let promises: Promise<any>[] = [];\r\n\r\n            // let requests = 1;\r\n            // if (formValues.uploadSmallPicture !== undefined) requests++;\r\n            // if (formValues.uploadBigPicture !== undefined) requests++;\r\n\r\n            // console.log(\"Setting requests to:\", requests, \"(Problem?)\");\r\n            // setPendingRequests(requests);\r\n\r\n            saveData(values, isNew)\r\n              .then((result) => {\r\n                // completed({\r\n                //   result,\r\n                //   navigateOut: isNew,\r\n                //   setSubmitting,\r\n                // });\r\n                const _id = result.data.data._id;\r\n                if (_id !== undefined) {\r\n                  if (formValues.uploadSmallPicture !== undefined) {\r\n                    promises.push(\r\n                      uploadPicture({\r\n                        _id,\r\n                        file: formValues.uploadSmallPicture,\r\n                        folder: \"2y/sm\",\r\n                        navigateOut: isNew,\r\n                        result,\r\n                        setSubmitting,\r\n                      })\r\n                    );\r\n                    // uploadPicture({\r\n                    //   _id,\r\n                    //   file: formValues.uploadSmallPicture,\r\n                    //   folder: \"2y/sm\",\r\n                    //   navigateOut: isNew,\r\n                    //   result,\r\n                    //   setSubmitting,\r\n                    // }).then((resultPic) => {\r\n                    //   // setSubmitting(false);\r\n                    //   completed({\r\n                    //     result: resultPic,\r\n                    //     navigateOut: isNew,\r\n                    //     setSubmitting,\r\n                    //   });\r\n                    // });\r\n                  }\r\n\r\n                  if (formValues.uploadBigPicture !== undefined) {\r\n                    promises.push(\r\n                      uploadPicture({\r\n                        _id,\r\n                        file: formValues.uploadBigPicture,\r\n                        folder: \"2y/lg\",\r\n                        navigateOut: isNew,\r\n                        result,\r\n                        setSubmitting,\r\n                      })\r\n                    );\r\n                    // uploadPicture({\r\n                    //   _id,\r\n                    //   file: formValues.uploadBigPicture,\r\n                    //   folder: \"2y/lg\",\r\n                    //   navigateOut: isNew,\r\n                    //   result,\r\n                    //   setSubmitting,\r\n                    // }).then((resultPic) => {\r\n                    //   // setSubmitting(false);\r\n                    //   completed({\r\n                    //     result: resultPic,\r\n                    //     navigateOut: isNew,\r\n                    //     setSubmitting,\r\n                    //   });\r\n                    // });\r\n                  }\r\n                }\r\n                Promise.all(promises).finally(() => {\r\n                  completed({\r\n                    result,\r\n                    navigateOut: isNew,\r\n                    setSubmitting,\r\n                  });\r\n                  if (props.navigate !== undefined) {\r\n                    if (isNew === true)\r\n                      props.navigate(\"/panel/my-workers/success\");\r\n                    else props.navigate(\"/panel/my-workers\");\r\n                  }\r\n                });\r\n              })\r\n              .catch((reason) => {\r\n                toast.error(reason.message);\r\n                // updatePending(-1000000, setSubmitting);\r\n                // setSaving(false);\r\n              });\r\n          }}\r\n        >\r\n          {(formik) => (\r\n            <>\r\n              {/* {setFormikSubmitting(formik.setSubmitting)} */}\r\n              <AddEditWorkerForm\r\n                id={props.id}\r\n                formik={formik}\r\n                templateFields={templateFields}\r\n                disabled={formDisabled}\r\n                worker={worker}\r\n              />\r\n            </>\r\n          )}\r\n        </Formik>\r\n        </>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, IconButton, TextField } from \"@material-ui/core\";\r\nimport { Clear, Search } from \"@material-ui/icons\";\r\nimport React, { ReactElement } from \"react\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\ninterface Props {\r\n  value: string | number;\r\n  onChange?: React.ChangeEventHandler<HTMLTextAreaElement | HTMLInputElement>;\r\n  clearSearch?: React.MouseEventHandler<HTMLButtonElement>;\r\n}\r\n\r\nexport default function QuickSearchToolbar(props: Props): ReactElement {\r\n  return (\r\n    <Box\r\n      p={2.5}\r\n      pb={0}\r\n      style={{\r\n        // justifyContent: \"space-between\",\r\n        // display: \"flex\",\r\n        // alignItems: \"flex-start\",\r\n        // flexWrap: \"wrap\",\r\n        maxWidth:640,\r\n      }}\r\n    >\r\n      <TextField\r\n        variant=\"outlined\"\r\n        value={props.value}\r\n        onChange={props.onChange}\r\n        placeholder=\"Search…\"\r\n        InputProps={{\r\n          startAdornment: <Search fontSize=\"small\" style={{ marginRight:8, color:Branding.primary }} />,\r\n          endAdornment: (\r\n            <IconButton\r\n              title=\"Clear\"\r\n              aria-label=\"Clear\"\r\n              size=\"small\"\r\n              style={{ visibility: props.value ? \"visible\" : \"hidden\" }}\r\n              onClick={props.clearSearch}\r\n            >\r\n              <Clear fontSize=\"small\" style={{ color:Branding.text.warning }} />\r\n            </IconButton>\r\n          ),\r\n        }}\r\n        // sx={{\r\n        //   width: {\r\n        //     xs: 1,\r\n        //     sm: \"auto\",\r\n        //   },\r\n        //   m: (theme) => theme.spacing(1, 0.5, 1.5),\r\n        //   \"& .MuiSvgIcon-root\": {\r\n        //     mr: 0.5,\r\n        //   },\r\n        //   \"& .MuiInput-underline:before\": {\r\n        //     borderBottom: 1,\r\n        //     borderColor: \"divider\",\r\n        //   },\r\n        // }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","function escapeRegExp(value: string) {\r\n  return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\r\n}\r\n\r\nexport const filterAllKeys = ({\r\n  array,\r\n  searchValue,\r\n}: {\r\n  array: any[];\r\n  searchValue: string;\r\n}) => {\r\n  const searchRegex = new RegExp(escapeRegExp(searchValue), \"i\");\r\n  return array.filter((row) => {\r\n    return Object.keys(row).some((field) => {\r\n      return searchRegex.test(row[field].toString());\r\n    });\r\n  });\r\n};\r\n","import { Avatar, Box, Button, ButtonGroup } from \"@material-ui/core\";\r\nimport { DataGrid, GridColumns, GridRowData } from \"@material-ui/data-grid\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { ReactElement, useEffect, useState } from \"react\";\r\nimport IWorkerTwoYear from \"estreeh-common-library/src/interfaces/IWorkerTwoYear\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport { IRequest } from \"estreeh-common-library/src/interfaces/IRequest\";\r\nimport { IResponse } from \"estreeh-common-library/src/interfaces/IResponse\";\r\nimport dateFormat from \"dateformat\";\r\nimport { S3Folder } from \"estreeh-common-library/src/types/S3Folder\";\r\nimport axios from \"axios\";\r\n// import { useStoreActions } from \"../../helpers/StoreTypedHooks\";\r\nimport { useStoreState } from \"../../helpers/StoreTypedHooks\";\r\nimport QuickSearchToolbar from \"../common/QuickSearchToolbar\";\r\nimport { filterAllKeys } from \"../../helpers/FilterAllKeys\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  // config: IApiResConfig;\r\n}\r\n\r\nexport default function MyRequestsPage(props: Props): ReactElement {\r\n  //TODO: \"New requests\" page or filter\r\n  //TODO: \"Pending for Action\" page or filter\r\n\r\n  const [requests, setRequests] = useState<any[]>([]);\r\n  const config = useStoreState((s) => s.config.item);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [rows, setRows] = useState<GridRowData[]>([]);\r\n  // const requests = useStoreState((s) => s.requests.items);\r\n  // const setRequests = useStoreActions((a) => a.requests.setItems);\r\n\r\n  const requestSearch = (searchValue: string) => {\r\n    setSearchText(searchValue);\r\n\r\n    if (searchValue === \"\") {\r\n      setRows(requests);\r\n    } else {\r\n      const filteredRows = filterAllKeys({\r\n        array: requests,\r\n        searchValue: searchValue,\r\n      });\r\n      setRows(filteredRows);\r\n    }\r\n  };\r\n\r\n  const columns: GridColumns = [\r\n    {\r\n      sortable: false,\r\n      disableColumnMenu: true,\r\n      field: \"actions\",\r\n      headerName: \"Actions\",\r\n      width: 140,\r\n      renderCell: (params) => (\r\n        <Box textAlign=\"center\">\r\n          <ButtonGroup color=\"primary\" variant=\"outlined\">\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                console.log(params.row);\r\n                if (props.navigate) props.navigate(`update/${params.row.id}`);\r\n              }}\r\n            >\r\n              <Edit fontSize=\"small\" />\r\n            </Button>\r\n            {/* <Button size=\"small\">\r\n              <ListAlt fontSize=\"small\" />\r\n            </Button> */}\r\n          </ButtonGroup>\r\n        </Box>\r\n      ),\r\n    },\r\n    {\r\n      field: \"created\",\r\n      headerName: \"Date\",\r\n      sortable: true,\r\n      width: 140,\r\n      valueFormatter: (params) => {\r\n        return dateFormat(params.row.created, \"dd mmm yy\");\r\n      },\r\n    },\r\n    {\r\n      field: \"avatar\",\r\n      headerName: \"Pic\",\r\n      disableColumnMenu: true,\r\n      renderCell: (params) => {\r\n        const folder: S3Folder = \"2y/sm\";\r\n        const worker: IWorkerTwoYear = params.row.workerTwoYear;\r\n        const src =\r\n          \"/\" + folder + \"/\" + worker._id + \".\" + worker.smallPictureFileExt;\r\n        return (\r\n          <Box>\r\n            <Avatar src={process.env.REACT_APP_IMAGES_ROOT + src} />\r\n          </Box>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      field: \"Worker Name\",\r\n      sortable: true,\r\n      width: 200,\r\n      valueGetter: (params) => {\r\n        const w: IWorkerTwoYear = params.row.workerTwoYear;\r\n        return w.name;\r\n      },\r\n    },\r\n\r\n    {\r\n      field: \"statusCode\",\r\n      headerName: \"Status\",\r\n      sortable: true,\r\n      width: 180,\r\n      // valueGetter: (params) => {\r\n      //   return\r\n      // },\r\n      renderCell: (params) => {\r\n        const item = config?.statusCodesTwoYear.find(\r\n          (x) => x.code === params.row.statusCode\r\n        );\r\n        return (\r\n          <Box\r\n            px={1}\r\n            py={0.5}\r\n            bgcolor={item?.bgColor}\r\n            borderRadius={50}\r\n            whiteSpace=\"normal\"\r\n            lineHeight={1}\r\n            fontSize=\"90%\"\r\n            width=\"100%\"\r\n            textAlign=\"center\"\r\n          >\r\n            {item?.title}\r\n          </Box>\r\n        );\r\n      },\r\n    },\r\n\r\n    {\r\n      field: \"fullName\",\r\n      headerName: \"Applicant\",\r\n      sortable: true,\r\n      width: 220,\r\n    },\r\n\r\n    {\r\n      field: \"mobileNumber\",\r\n      headerName: \"Mobile\",\r\n      sortable: true,\r\n      width: 140,\r\n    },\r\n    {\r\n      field: \"workerReferenceId\",\r\n      headerName: \"REF\",\r\n      sortable: true,\r\n      width: 130,\r\n    },\r\n    {\r\n      field: \"Tracking\",\r\n      sortable: false,\r\n      width: 130,\r\n      valueGetter: (params) => {\r\n        return params.row.trackingCode;\r\n      },\r\n    },\r\n    {\r\n      field: \"workerJobTitle\",\r\n      headerName: \"Job\",\r\n      sortable:false,\r\n    },\r\n    {\r\n      field: \"workerNationality\",\r\n      headerName: \"Nation.\",\r\n      sortable:false,\r\n    },\r\n    // {\r\n    //   field: \"specialNotes\",\r\n    //   sortable: true,\r\n    //   width: 200,\r\n    // },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    console.log(\"Preparing to get Requests\");\r\n    axios\r\n      .get<IResponse<IRequest[]>>(\r\n        process.env.REACT_APP_API_ROOT + \"/be/requests\",\r\n        { withCredentials: true }\r\n      )\r\n      .then((requests) => {\r\n        console.log(`Got ${requests.data.data.length} requests`);\r\n        // setRequests({\r\n        //   payload: requests.data.data,\r\n        // });\r\n        // setRequests(requests.data.data);\r\n        const origData = requests.data.data;\r\n        const data = origData.map((v) => {\r\n          const a = {\r\n            ...v.applicationForm,\r\n            trackingCode: v.trackingCode,\r\n            // requestId: v.id,\r\n            id: v._id,\r\n            workerTwoYear: v.workerTwoYear,\r\n            statusCode: v.statusCode,\r\n            created: v.created,\r\n            workerName: v.workerTwoYear?.name,\r\n            workerNationality: v.workerTwoYear?.nationality,\r\n            workerJobTitle: v.workerTwoYear?.jobTitle,\r\n            workerReferenceId: v.workerTwoYear?.referenceId,\r\n            applicantName: v.applicationForm.fullName,\r\n            applicantMobile: v.applicationForm.mobileNumber,\r\n          };\r\n          return a;\r\n        });\r\n        setRequests(data);\r\n        setRows(data);\r\n      });\r\n  }, [setRequests]);\r\n  // const applications: IApplicationForm[] = ApplicationFormFactory.buildList(14);\r\n\r\n  return (\r\n    <Box>\r\n      <PageTitle title=\"My Requests\" />\r\n      <Box height={700}>\r\n        <DataGrid\r\n          sortModel={[\r\n            {\r\n              field: \"created\",\r\n              sort: \"desc\",\r\n            },\r\n          ]}\r\n          disableSelectionOnClick={true}\r\n          rows={rows}\r\n          columns={columns}\r\n          pageSize={15}\r\n          components={{ Toolbar: QuickSearchToolbar }}\r\n          componentsProps={{\r\n            toolbar: {\r\n              value: searchText,\r\n              onChange: (event: any) => requestSearch(event.target.value),\r\n              clearSearch: () => requestSearch(\"\"),\r\n            },\r\n          }}\r\n          // checkboxSelection\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Avatar, Box, Button, ButtonGroup } from \"@material-ui/core\";\r\nimport { DataGrid, GridColumns, GridRowData } from \"@material-ui/data-grid\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport axios from \"axios\";\r\n\r\nimport React, { ReactElement } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { IResponse } from \"estreeh-common-library/src/interfaces/IResponse\";\r\nimport IWorkerTwoYear from \"estreeh-common-library/src/interfaces/IWorkerTwoYear\";\r\nimport { S3Folder } from \"estreeh-common-library/src/types/S3Folder\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport { filterAllKeys } from \"../../helpers/FilterAllKeys\";\r\nimport QuickSearchToolbar from \"../common/QuickSearchToolbar\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function MyWorkersPage(props: Props): ReactElement {\r\n  const [workers, setWorkers] = useState<IWorkerTwoYear[]>([]);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [rows, setRows] = useState<GridRowData[]>([]);\r\n\r\n  const requestSearch = (searchValue: string) => {\r\n    setSearchText(searchValue);\r\n\r\n    if (searchValue === \"\") {\r\n      setRows(workers);\r\n    } else {\r\n      const filteredRows = filterAllKeys({\r\n        array: workers,\r\n        searchValue: searchValue,\r\n      });\r\n      setRows(filteredRows);\r\n    }\r\n  };\r\n\r\n  const columns: GridColumns = [\r\n    {\r\n      sortable: false,\r\n      disableColumnMenu: true,\r\n      field: \"actions\",\r\n      headerName: \"Worker CV\",\r\n      width: 140,\r\n      renderCell: (params) => (\r\n        <Box textAlign=\"center\">\r\n          <ButtonGroup color=\"primary\" variant=\"outlined\">\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                if (props.navigate) props.navigate(\"edit/\" + params.row._id);\r\n              }}\r\n            >\r\n              <Edit fontSize=\"small\" />\r\n            </Button>\r\n            {/* <Button size=\"small\">\r\n              <ListAlt fontSize=\"small\" />\r\n            </Button> */}\r\n          </ButtonGroup>\r\n        </Box>\r\n      ),\r\n    },\r\n    // {\r\n    //   field: \"id\",\r\n    //   sortable: true,\r\n    // },\r\n    {\r\n      field: \"referenceId\",\r\n      headerName: \"REF\",\r\n      sortable: true,\r\n      width: 200,\r\n    },\r\n    {\r\n      field: \"avatar\",\r\n      headerName: \"Pic\",\r\n      disableColumnMenu: true,\r\n      renderCell: (params) => {\r\n        const folder: S3Folder = \"2y/sm\";\r\n        const src =\r\n          \"/\" +\r\n          folder +\r\n          \"/\" +\r\n          params.row._id +\r\n          \".\" +\r\n          params.row.smallPictureFileExt;\r\n        return (\r\n          <Box>\r\n            <Avatar src={process.env.REACT_APP_IMAGES_ROOT + src} />\r\n          </Box>\r\n        );\r\n      },\r\n    },\r\n\r\n    {\r\n      field: \"nationality\",\r\n      headerName: \"Nationality\",\r\n      width: 200,\r\n      // valueGetter: (params) => {\r\n      //   const n: INationality = params.row.nationality;\r\n      //   return n.title;\r\n      // },\r\n    },\r\n    {\r\n      field: \"name\",\r\n      headerName: \"Worker Name\",\r\n      sortable: true,\r\n      width: 250,\r\n    },\r\n    {\r\n      field: \"jobTitle\",\r\n      headerName: \"Job Title\",\r\n      sortable: true,\r\n      description: \"Job title of the worker\",\r\n      width: 200,\r\n    },\r\n    {\r\n      field: \"hidden\",\r\n      headerName: \"Hidden\",\r\n      width: 130,\r\n    },\r\n    {\r\n      field: \"collected\",\r\n      headerName: \"Collected\",\r\n      width: 140,\r\n    },\r\n    // {\r\n    //   field: \"age\",\r\n    //   headerName: \"Age\",\r\n    //   sortable: false,\r\n    // },\r\n    // {\r\n    //   field: \"maritalStatus\",\r\n    //   headerName: \"Marital Status\",\r\n    //   sortable: true,\r\n    //   width: 200,\r\n    // },\r\n  ];\r\n\r\n  // const workers: IWorkerTwoYear[] = WorkerTwoYearFactory.buildList(14);\r\n  useEffect(() => {\r\n    axios\r\n      .get<IResponse<IWorkerTwoYear[]>>(\r\n        process.env.REACT_APP_API_ROOT + \"/be/workers-two-year\",\r\n        { withCredentials: true }\r\n      )\r\n      .then((result) => {\r\n        setWorkers(result.data.data);\r\n        setRows(result.data.data);\r\n      });\r\n  }, [setWorkers]);\r\n\r\n  return (\r\n    <Box>\r\n      <PageTitle title=\"My Workers\" />\r\n      <Box height={700}>\r\n        <DataGrid\r\n          rows={rows}\r\n          columns={columns}\r\n          pageSize={15}\r\n          components={{ Toolbar: QuickSearchToolbar }}\r\n          componentsProps={{\r\n            toolbar: {\r\n              value: searchText,\r\n              onChange: (event: any) => requestSearch(event.target.value),\r\n              clearSearch: () => requestSearch(\"\"),\r\n            },\r\n          }}\r\n          // checkboxSelection\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Box } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\nconst SmallText = (props: {\r\n  style?: React.CSSProperties;\r\n  children: React.ReactNode;\r\n  fontSize?: number;\r\n  title?: string;\r\n}) => {\r\n  const fontSize = props.fontSize ? props.fontSize : 13;\r\n  return (\r\n    <Box\r\n      title={props.title}\r\n      style={{\r\n        fontSize: fontSize,\r\n        color: Branding.text.secondary,\r\n        ...props.style,\r\n      }}\r\n    >\r\n      {typeof props.children === \"string\" && (\r\n        <div dangerouslySetInnerHTML={{ __html: props.children }}></div>\r\n      )}\r\n      {typeof props.children !== \"string\" && <>{props.children}</>}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SmallText;\r\n","import { Box, Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport SmallText from \"./SmallText\";\r\n\r\nconst LabelValueLine = (props: {\r\n  title: string | React.ReactNode;\r\n  oneLine?: boolean;\r\n  children?: React.ReactNode;\r\n  style?: React.CSSProperties;\r\n  oneLineTitleSizeMd?: 1 | 2 | 3;\r\n  oneLineValueSizeMd?: 9 | 10 | 11;\r\n}) => {\r\n  const oneLine = props.oneLine !== undefined ? props.oneLine : true;\r\n  const oneLineTitleSizeMd = props.oneLineTitleSizeMd\r\n    ? props.oneLineTitleSizeMd\r\n    : 3;\r\n  const oneLineValueSizeMd = props.oneLineValueSizeMd\r\n    ? props.oneLineValueSizeMd\r\n    : 9;\r\n  const titleSizeMd = oneLine ? oneLineTitleSizeMd : 3;\r\n  const valueSizeMd = oneLine ? oneLineValueSizeMd : 3;\r\n  const valueSizeXs = 6;\r\n  const titleSizeXs = 6;\r\n  const paddingBottom = 0.5;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid item xs={titleSizeXs} md={titleSizeMd}>\r\n        <Box pb={paddingBottom}>\r\n          <SmallText style={{ fontWeight: \"bold\",...props.style }}>{props.title}</SmallText>\r\n        </Box>\r\n      </Grid>\r\n      <Grid item xs={valueSizeXs} md={valueSizeMd}>\r\n        <Box pb={paddingBottom}>\r\n          <SmallText style={props.style}>{props.children}</SmallText>\r\n        </Box>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default LabelValueLine;\r\n","import { Box, Grid, Typography } from \"@material-ui/core\";\r\nimport { Variant } from \"@material-ui/core/styles/createTypography\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IApplicationForm } from \"estreeh-common-library/src/interfaces/IApplicationForm\";\r\nimport LabelValueLine from \"../common/LabelValueLine\";\r\n\r\ninterface Props {\r\n  applicationForm: IApplicationForm;\r\n  headerVariant: \"inherit\" | Variant;\r\n}\r\n\r\nexport default function ApplicationDetails({\r\n  applicationForm: a,\r\n  headerVariant: hVar,\r\n}: Props): ReactElement {\r\n  return (\r\n    <>\r\n      <Typography variant={hVar}>Application Details</Typography>\r\n      <Box my={2}>\r\n        <Grid container>\r\n          <LabelValueLine title=\"Full Name\">{a.fullName}</LabelValueLine>\r\n          <LabelValueLine title=\"Mobile\">{a.mobileNumber}</LabelValueLine>\r\n          <LabelValueLine title=\"Other Mobile\">\r\n            {a.otherMobileNumber}\r\n          </LabelValueLine>\r\n          <LabelValueLine title=\"Special Notes\">\r\n            {a.specialNotes}\r\n          </LabelValueLine>\r\n          {/* <LabelValueLine title=\"Email\">{a.email}</LabelValueLine> */}\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n","import { Avatar, Box, Grid, Typography } from \"@material-ui/core\";\r\nimport { Variant } from \"@material-ui/core/styles/createTypography\";\r\nimport React, { ReactElement } from \"react\";\r\nimport IWorkerTwoYear from \"estreeh-common-library/src/interfaces/IWorkerTwoYear\";\r\nimport { S3Folder } from \"estreeh-common-library/src/types/S3Folder\";\r\nimport LabelValueLine from \"../common/LabelValueLine\";\r\n\r\ninterface Props {\r\n  worker: IWorkerTwoYear;\r\n  headerVariant: \"inherit\" | Variant;\r\n}\r\n\r\nexport default function Worker2Card({ worker: w, headerVariant: hVar }: Props): ReactElement {\r\n  const folder: S3Folder = \"2y/sm\";\r\n  return (\r\n    <>\r\n      <Typography variant={hVar}>Requested Worker</Typography>\r\n      <Box my={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={4}>\r\n            <Avatar\r\n              src={`${process.env.REACT_APP_IMAGES_ROOT}/${folder}/${w.id}.${w.smallPictureFileExt}`}\r\n              style={{\r\n                // width: 160,\r\n                width: \"100%\",\r\n                minHeight: 160,\r\n                alignSelf: \"center\",\r\n              }}\r\n              variant=\"rounded\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={8}>\r\n            <Grid container>\r\n              <LabelValueLine title=\"Agency\">{w.agency?.title}</LabelValueLine>\r\n              <LabelValueLine title=\"Ref #\">{w.referenceId}</LabelValueLine>\r\n              <LabelValueLine title=\"Name\">{w.name}</LabelValueLine>\r\n              <LabelValueLine title=\"Nationality\">\r\n                {w.nationality}\r\n              </LabelValueLine>\r\n              <LabelValueLine title=\"Job Title\">{w.jobTitle}</LabelValueLine>\r\n              <LabelValueLine title=\"Salary\">\r\n                BHD {w.monthlySalary} / Month\r\n              </LabelValueLine>\r\n              <LabelValueLine title=\"Processing Fees\">\r\n                BHD {w.processFees}\r\n              </LabelValueLine>\r\n              <LabelValueLine title=\"Contract Period\">\r\n                {w.contractPeriod} Years\r\n              </LabelValueLine>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n","import { Box, Grid } from \"@material-ui/core\";\r\nimport dateFormat from \"dateformat\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IRequestStatusHistory } from \"estreeh-common-library/src/interfaces/IRequestStatusHistory\";\r\nimport { IApiResConfig } from \"estreeh-common-library/src/interfaces/api/res/IApiResConfig\";\r\nimport Branding from \"../../config/Branding\";\r\nimport SmallText from \"../common/SmallText\";\r\n\r\ninterface Props {\r\n  config: IApiResConfig;\r\n  history: IRequestStatusHistory;\r\n}\r\n\r\nexport default function HistoryItem({ history, config }: Props): ReactElement {\r\n  const status = config.statusCodesTwoYear.find(\r\n    (x) => x.code === history.statusCode\r\n  );\r\n  return (\r\n    <Box\r\n      boxShadow={\"0 0 9px \" + Branding.primary + \"44\"}\r\n      my={1}\r\n      py={1}\r\n      px={2}\r\n      borderRadius={16}\r\n    >\r\n      <SmallText>\r\n        <Grid container spacing={1}>\r\n          <Grid item xs={12} md={8}>\r\n            <Box color=\"cornflowerblue\" fontWeight=\"bold\">\r\n              {status?.title}\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs={12} md={4}>\r\n            <Box textAlign=\"right\" fontStyle=\"italic\">\r\n              {dateFormat(history.created, \"d mmm yyyy, h:MM tt\")}\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            {history.statusRemarks}\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Box style={{ color: \"yellowgreen\", textAlign:\"right\" }}  fontStyle=\"italic\">{history.createdBy}</Box>\r\n          </Grid>\r\n        </Grid>\r\n      </SmallText>\r\n    </Box>\r\n  );\r\n}\r\n","import { Grid } from \"@material-ui/core\";\r\nimport { FormikProps } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IRequest } from \"estreeh-common-library/src/interfaces/IRequest\";\r\nimport { IBackendField } from \"estreeh-common-library/src/interfaces/IBackendField\";\r\n// import { WorkerWorkflowDropdown } from \"../../config/WorkerWorkflowDropdown\";\r\nimport BackendFieldSet from \"../forms/BackendFieldSet\";\r\nimport SubmitButton from \"../forms/SubmitButton\";\r\nimport { IBackendFieldSelectOption } from \"estreeh-common-library/src/interfaces/IBackendFieldSelectOption\";\r\nimport HistoryItem from \"./HistoryItem\";\r\nimport { IApiResConfig } from \"estreeh-common-library/src/interfaces/api/res/IApiResConfig\";\r\n\r\ninterface Props {\r\n  formik: FormikProps<any>;\r\n  disabled: boolean;\r\n  request: IRequest;\r\n  dropdownOptions: IBackendFieldSelectOption[];\r\n  config: IApiResConfig;\r\n}\r\n\r\nexport default function UpdateRequestForm({\r\n  formik,\r\n  disabled,\r\n  request,\r\n  dropdownOptions,\r\n  config,\r\n}: Props): ReactElement {\r\n  const fields: IBackendField<IRequest>[] = [\r\n    {\r\n      name: \"statusCode\",\r\n      variant: \"select\",\r\n      // defaultValue: defaultStatus,\r\n      selectOptions: dropdownOptions,\r\n    },\r\n    {\r\n      name: \"statusRemarksNew\",\r\n      label:\"Remarks\",\r\n      variant: \"textarea\",\r\n    },\r\n    // {\r\n    //   name: \"notify\",\r\n    //   label: \"Notify customer of status update.\",\r\n    //   variant: \"checkbox\",\r\n    //   defaultValue: true,\r\n    // },\r\n    // {\r\n    //   name: \"showHistory\",\r\n    //   label: \"Record status change in the customer request's history.\",\r\n    //   variant: \"checkbox\",\r\n    //   defaultValue: true,\r\n    // },\r\n    // {\r\n    //   name: \"hide\",\r\n    //   label: \"Hide this worker from other customers\",\r\n    //   variant: \"checkbox\",\r\n    // },\r\n  ];\r\n\r\n  return (\r\n    <form onSubmit={formik.handleSubmit}>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <BackendFieldSet\r\n            header=\"Agency Actions\"\r\n            fields={fields}\r\n            md={12}\r\n            formik={formik}\r\n          />\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <BackendFieldSet header=\"History\" md={12}>\r\n            {request.statusHistory.map((history) => (\r\n              <HistoryItem\r\n                history={history}\r\n                key={history.created.toString() + history.createdByUserId}\r\n                config={config}\r\n              />\r\n            ))}\r\n          </BackendFieldSet>\r\n        </Grid>\r\n      </Grid>\r\n      <SubmitButton\r\n        title=\"Save\"\r\n        type=\"submit\"\r\n        disabled={disabled || formik.isSubmitting}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","import { Box, Grid } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement, useEffect, useState } from \"react\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport * as Yup from \"yup\";\r\nimport ApplicationDetails from \"./ApplicationDetails\";\r\nimport { IRequest } from \"estreeh-common-library/src/interfaces/IRequest\";\r\n\r\nimport { IResponse } from \"estreeh-common-library/src/interfaces/IResponse\";\r\nimport Worker2Card from \"../workers/Worker2Card\";\r\nimport { Formik } from \"formik\";\r\nimport UpdateRequestForm from \"./UpdateRequestForm\";\r\nimport { IBackendFieldSelectOption } from \"estreeh-common-library/src/interfaces/IBackendFieldSelectOption\";\r\nimport { toast } from \"react-toastify\";\r\nimport { IStatus } from \"estreeh-common-library/src/interfaces/IStatus\";\r\nimport axios from \"axios\";\r\nimport { useStoreState } from \"../../helpers/StoreTypedHooks\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  id?: string;\r\n  // config: IApiResConfig;\r\n}\r\n\r\nexport default function UpdateRequestPage(props: Props): ReactElement {\r\n  // const defaultStatus = Faker.random.arrayElement(WorkerWorkflowStatuses);\r\n  const config = useStoreState((s) => s.config.item);\r\n  const [loading, setLoading] = useState(true);\r\n  const [request, setRequest] = useState<IRequest | null>(null);\r\n  const headerVariant = \"h6\";\r\n  let visibleStatus: IStatus[] = [];\r\n  const status = request?.status;\r\n\r\n  if (config !== undefined) {\r\n    if (request !== null && status?.nextCodes !== undefined) {\r\n      visibleStatus = config.statusCodesTwoYear.filter(\r\n        (x) =>\r\n          status.nextCodes.includes(x.code) || x.code === request.statusCode\r\n      );\r\n    } else {\r\n      visibleStatus = config.statusCodesTwoYear;\r\n    }\r\n  }\r\n  const dropdown = visibleStatus.map<IBackendFieldSelectOption>((x) => ({\r\n    value: x.code,\r\n    title: x.title,\r\n    color: x.isReject\r\n      ? \"red\"\r\n      : x.nextCodes.length === 0\r\n      ? \"darkgreen\"\r\n      : undefined,\r\n  }));\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      axios\r\n        .get<IResponse<IRequest>>(\r\n          process.env.REACT_APP_API_ROOT + \"/be/requests/\" + props.id,\r\n          { withCredentials: true }\r\n        )\r\n        .then((result) => {\r\n          setLoading(false);\r\n          setRequest(result.data.data);\r\n        });\r\n    }\r\n  }, [loading, props.id]);\r\n\r\n  return (\r\n    <>\r\n      <PageTitle title={\"Update Request\"}>\r\n        Tracking # {request?.trackingCode}\r\n      </PageTitle>\r\n\r\n      {request !== null && request.workerTwoYear !== undefined && (\r\n        <>\r\n          <Box>\r\n            <Grid container>\r\n              <Grid item xs={12} md={6}>\r\n                <ApplicationDetails\r\n                  headerVariant={headerVariant}\r\n                  applicationForm={request.applicationForm}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Worker2Card\r\n                  headerVariant={headerVariant}\r\n                  worker={request.workerTwoYear}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n          <Box>\r\n            <Formik\r\n              initialValues={request}\r\n              validationSchema={Yup.object({\r\n                // name: Yup.string().required(\"Required\"),\r\n                // experienceYears: Yup.number().required(\"Required\"),\r\n                // contractPeriod: Yup.number().required(\"Required\"),\r\n                // monthlySalary: Yup.number().required(\"Required\"),\r\n                // hidden: Yup.bool().required(\"Required\"),\r\n\r\n                // processTemplateId: Yup.string().required(\"Required\"),\r\n                statusCode: Yup.number().required(\"Required\"),\r\n              })}\r\n              onSubmit={(formValues, { setSubmitting }) => {\r\n                axios\r\n                  .put<IResponse>(\r\n                    process.env.REACT_APP_API_ROOT + \"/be/requests\",\r\n                    formValues,\r\n                    { withCredentials: true }\r\n                  )\r\n                  .then((result) => {\r\n                    toast.success(result.data.message);\r\n                    setSubmitting(false);\r\n                    setLoading(true);\r\n                  });\r\n                // saveData(values, isNew)\r\n                //   .then((result) => {\r\n                //     completed({ result, navigateOut: isNew, setSubmitting });\r\n                //     const _id = result.data.data._id;\r\n                //     if (_id !== undefined) {\r\n                //       if (formValues.uploadSmallPicture !== undefined) {\r\n                //         uploadPicture({\r\n                //           _id,\r\n                //           file: formValues.uploadSmallPicture,\r\n                //           folder: \"2y/sm\",\r\n                //           navigateOut: isNew,\r\n                //           result,\r\n                //           setSubmitting,\r\n                //         }).then((resultPic) => {\r\n                //           // setSubmitting(false);\r\n                //           completed({\r\n                //             result: resultPic,\r\n                //             navigateOut: isNew,\r\n                //             setSubmitting,\r\n                //           });\r\n                //         });\r\n                //       }\r\n\r\n                //       if (formValues.uploadBigPicture !== undefined) {\r\n                //         uploadPicture({\r\n                //           _id,\r\n                //           file: formValues.uploadBigPicture,\r\n                //           folder: \"2y/lg\",\r\n                //           navigateOut: isNew,\r\n                //           result,\r\n                //           setSubmitting,\r\n                //         }).then((resultPic) => {\r\n                //           // setSubmitting(false);\r\n                //           completed({\r\n                //             result: resultPic,\r\n                //             navigateOut: isNew,\r\n                //             setSubmitting,\r\n                //           });\r\n                //         });\r\n                //       }\r\n                //     }\r\n                //   })\r\n                //   .catch((reason) => {\r\n                //     toast.error(reason.message);\r\n                //     setSubmitting(false);\r\n                //     // setSaving(false);\r\n                //   });\r\n              }}\r\n            >\r\n              {(formik) => (\r\n                <UpdateRequestForm\r\n                  formik={formik}\r\n                  request={request}\r\n                  disabled={loading}\r\n                  dropdownOptions={dropdown}\r\n                  config={config!}\r\n                />\r\n              )}\r\n            </Formik>\r\n          </Box>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/check.6b6350a4.svg\";","import { Box, Divider, Typography } from \"@material-ui/core\";\r\nimport React, { ReactElement } from \"react\";\r\nimport check from \"../../images/check.svg\";\r\n\r\ninterface Props {\r\n  bigText?: string;\r\n  smallText?: string;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function SuccessBigMessage(props: Props): ReactElement {\r\n  return (\r\n    <Box textAlign=\"center\">\r\n      <Box maxWidth={120} mx=\"auto\" pb={3}>\r\n        <img src={check} style={{ display: \"block\" }} alt=\"success\" />\r\n      </Box>\r\n      <Typography variant=\"h5\">Success!</Typography>\r\n      <Box py={1}>\r\n        <Typography variant=\"h6\">{props.bigText}</Typography>\r\n      </Box>\r\n      <Box>\r\n        <Typography>{props.smallText}</Typography>\r\n      </Box>\r\n      <Box p={2}>\r\n        <Divider variant=\"middle\" />\r\n      </Box>\r\n      <Box>{props.children}</Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport SuccessBigMessage from \"../common/SuccessBigMessage\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  message: string;\r\n}\r\n\r\nexport default function SuccessWorkerPage(props: Props): ReactElement {\r\n\r\n  const navigate =\r\n    props.navigate !== undefined ? props.navigate : (s: string) => {};\r\n  return (\r\n    <SuccessBigMessage bigText={`${props.message} successfully`}>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        style={{ marginRight: 16 }}\r\n        onClick={() => {\r\n          navigate(\"../add\");\r\n        }}\r\n      >\r\n        Add Another\r\n      </Button>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          navigate(\"..\");\r\n        }}\r\n      >\r\n        Workers List\r\n      </Button>\r\n    </SuccessBigMessage>\r\n  );\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport SuccessBigMessage from \"../common/SuccessBigMessage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function SuccessRequestPage(props: Props): ReactElement {\r\n  const navigate =\r\n    props.navigate !== undefined ? props.navigate : (s: string) => {};\r\n  return (\r\n    <SuccessBigMessage bigText=\"Request updated successfully\">\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          navigate(\"..\");\r\n        }}\r\n      >\r\n        Done\r\n      </Button>\r\n    </SuccessBigMessage>\r\n  );\r\n}\r\n","import { IRegionConfiguration } from \"estreeh-common-library/src/interfaces/IRegionConfiguration\";\r\n\r\nconst bahrain: IRegionConfiguration = {\r\n  currencyCode: \"BHD\",\r\n  currencySymbol: \"BD\",\r\n  currencySymbolAr: \"د.ب\",\r\n  currencyDecimals: 3,\r\n  fixedProcessFees: {\r\n    lmraFees: 20,\r\n    vatPercentage: 0.05,\r\n    workPermitFees: 30,\r\n  },\r\n};\r\n\r\nexport const Regions = {\r\n  bahrain: bahrain,\r\n};\r\n","import { Box } from \"@material-ui/core\";\r\nimport { FormikProps } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IProcessTemplate } from \"estreeh-common-library/src/interfaces/IProcessTemplate\";\r\nimport { IRegionConfiguration } from \"estreeh-common-library/src/interfaces/IRegionConfiguration\";\r\nimport { IBackendField } from \"estreeh-common-library/src/interfaces/IBackendField\";\r\nimport BackendFieldSet from \"../forms/BackendFieldSet\";\r\n\r\ninterface Props {\r\n  process: IProcessTemplate;\r\n  region: IRegionConfiguration;\r\n  editing: boolean;\r\n  saving: boolean;\r\n  formik: FormikProps<any>;\r\n}\r\n\r\nexport default function ProcessTemplateCard(props: Props): ReactElement {\r\n  const p = props.process;\r\n  const currencyCodeSuffix = props.region.currencyCode;\r\n\r\n  const readOnly = !props.editing || props.saving;\r\n\r\n  // TODO: Somehow apply 3 digit decimals formatting\r\n  // const formatted = (n: number): string => {\r\n  //   // const mult = (Math.pow(10,props.region.currencyDecimals));\r\n  //   // return Math.round(n * mult) / mult;\r\n  //   return n.toFixed(props.region.currencyDecimals);\r\n  // };\r\n\r\n  // const sumFeesNoVat = (): number => {\r\n  //   return (\r\n  //     f.lmraFees +\r\n  //     f.workPermitFees +\r\n  //     processFees +\r\n  //     insuranceFees +\r\n  //     othersFees +\r\n  //     accommodationFees\r\n  //   );\r\n  // };\r\n\r\n  // const vatFees = (): number => {\r\n  //   return (\r\n  //     (processFees + insuranceFees + othersFees + accommodationFees) *\r\n  //     f.vatPercentage\r\n  //   );\r\n  // };\r\n\r\n  // const totalFees = (): number => {\r\n  //   return sumFeesNoVat() + vatFees();\r\n  // };\r\n\r\n  const fields: IBackendField<IProcessTemplate>[] = [\r\n    {\r\n      name: \"title\",\r\n      // defaultValue: p.title,\r\n      readOnly: readOnly,\r\n    },\r\n  ];\r\n\r\n  const fieldsFees1: IBackendField<IProcessTemplate>[] = [\r\n    {\r\n      name: \"processFeesBhd\",\r\n      readOnly: readOnly,\r\n      // defaultValue: p.processFeesBhd > 0 ? p.processFeesBhd : undefined,\r\n      // value: processFees,\r\n      suffix: currencyCodeSuffix,\r\n      type: \"number\",\r\n      // onChange: (e) => {\r\n      //   setprocessFees(parseInt(e.target.value));\r\n      // },\r\n    },\r\n    {\r\n      name: \"governmentFeesBhd\",\r\n      readOnly: readOnly,\r\n      type: \"number\",\r\n      // readOnly: true,\r\n      // defaultValue: f.lmraFees,\r\n      suffix: currencyCodeSuffix,\r\n    },\r\n    {\r\n      name: \"insuranceFeesBhd\",\r\n      readOnly: readOnly,\r\n      // defaultValue: p.insuranceFeesBhd > 0 ? p.insuranceFeesBhd : undefined,\r\n      // value: insuranceFees,\r\n      suffix: currencyCodeSuffix,\r\n      type: \"number\",\r\n      // onChange: (e) => {\r\n      //   setinsuranceFees(parseInt(e.target.value));\r\n      // },\r\n    },\r\n    {\r\n      name: \"accommodationFeesBhd\",\r\n      // defaultValue: p.accommodationFeesBhd > 0 ? p.accommodationFeesBhd : undefined,\r\n      // value: accommodationFees,\r\n      readOnly: readOnly,\r\n      suffix: currencyCodeSuffix,\r\n      type: \"number\",\r\n      // onChange: (e) => {\r\n      //   setaccommodationFees(parseInt(e.target.value));\r\n      // },\r\n    },\r\n    {\r\n      name: \"otherFeesLabel\",\r\n      defaultValue: p.otherFeesLabel,\r\n      readOnly: readOnly,\r\n      variant: \"text\",\r\n      // md: 6,\r\n      // selectOptions: [\r\n      //   {\r\n      //     value: \"Others\",\r\n      //   },\r\n      //   {\r\n      //     value: \"Travel Insurance & Training\",\r\n      //   },\r\n      // ],\r\n    },\r\n    {\r\n      name: \"otherFeesBhd\",\r\n      // defaultValue: p.otherFeesBhd > 0 ? p.otherFeesBhd : undefined,\r\n      // value: othersFees,\r\n      readOnly: readOnly,\r\n      suffix: currencyCodeSuffix,\r\n      type: \"number\",\r\n      // onChange: (e) => {\r\n      //   setothersFees(parseInt(e.target.value));\r\n      // },\r\n    },\r\n  ];\r\n\r\n  const fieldsTotals: IBackendField<IProcessTemplate>[] = [\r\n    // {\r\n    //   name: \"Sum\",\r\n    //   value: formatted(sumFeesNoVat()),\r\n    //   readOnly: true,\r\n    //   suffix: currencyCodeSuffix,\r\n    // },\r\n    {\r\n      name: \"vatFeesBhd\",\r\n      // value: formatted(vatFees()),\r\n      readOnly,\r\n      suffix: currencyCodeSuffix,\r\n    },\r\n    {\r\n      name: \"totalFeesBhd\",\r\n      // value: formatted(totalFees()),\r\n      readOnly: true,\r\n      suffix: currencyCodeSuffix,\r\n    },\r\n  ];\r\n\r\n  const fieldsDurations: IBackendField<IProcessTemplate>[] = [\r\n    {\r\n      name: \"processDurationMinimumMonths\",\r\n      label: \"Minimum\",\r\n      type: \"number\",\r\n      readOnly: readOnly,\r\n      step: 0.25,\r\n      suffix: \"Months\",\r\n      defaultValue:\r\n        p.processDurationMinimumMonths > 0\r\n          ? p.processDurationMinimumMonths\r\n          : undefined,\r\n    },\r\n    {\r\n      name: \"processDurationMaximumMonths\",\r\n      label: \"Maximum\",\r\n      type: \"number\",\r\n      readOnly: readOnly,\r\n      suffix: \"Months\",\r\n      step: 0.25,\r\n      defaultValue:\r\n        p.processDurationMaximumMonths > 0\r\n          ? p.processDurationMaximumMonths\r\n          : undefined,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Box px={1}>\r\n      <BackendFieldSet\r\n        header=\"Process Name\"\r\n        fields={fields}\r\n        md={6}\r\n        headerVariant=\"small\"\r\n        formik={props.formik}\r\n      />\r\n      <BackendFieldSet\r\n        fields={fieldsFees1}\r\n        md={4}\r\n        headerVariant=\"small\"\r\n        formik={props.formik}\r\n      />\r\n      <BackendFieldSet\r\n        fields={fieldsTotals}\r\n        md={4}\r\n        headerVariant=\"small\"\r\n        formik={props.formik}\r\n      />\r\n      <BackendFieldSet\r\n        header=\"Durations\"\r\n        fields={fieldsDurations}\r\n        md={4}\r\n        headerVariant=\"small\"\r\n        formik={props.formik}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Button, Grid } from \"@material-ui/core\";\r\nimport { Formik } from \"formik\";\r\nimport React, { ReactElement, useState } from \"react\";\r\nimport { IProcessTemplate } from \"estreeh-common-library/src/interfaces/IProcessTemplate\";\r\nimport { IRegionConfiguration } from \"estreeh-common-library/src/interfaces/IRegionConfiguration\";\r\nimport Branding from \"../../config/Branding\";\r\nimport ProcessTemplateCard from \"./ProcessTemplateCard\";\r\nimport * as Yup from \"yup\";\r\nimport { IResponse } from \"estreeh-common-library/src/interfaces/IResponse\";\r\nimport { toast } from \"react-toastify\";\r\nimport FormErrors from \"../forms/FormErrors\";\r\nimport axios from \"axios\";\r\n\r\ninterface Props {\r\n  process: IProcessTemplate;\r\n  region: IRegionConfiguration;\r\n  newItem: boolean;\r\n}\r\n\r\nexport default function ProcessTemplate(props: Props): ReactElement {\r\n  const [editing, setEditing] = useState(props.newItem);\r\n  const [saving, setSaving] = useState(false);\r\n  const count = props.process.countAssignedWorkers;\r\n  const smallFontSize = \"0.7rem\";\r\n  const minAmount = 5;\r\n  const minMonths = 0.25;\r\n\r\n  return (\r\n    <Box\r\n      boxShadow={Branding.shadow.niceShadow}\r\n      borderRadius={Branding.borderRadius.niceRadius}\r\n      border={editing ? \"2px dashed blue\" : \"1px solid \" + Branding.lighter}\r\n      p={1}\r\n      my={1}\r\n    >\r\n      <Formik\r\n        initialValues={props.process}\r\n        validationSchema={Yup.object({\r\n          title: Yup.string().min(3,\"Minimum 3 characters\").required(\"Required\"),\r\n          accommodationFeesBhd: Yup.number().required(\"Required\"),\r\n          governmentFeesBhd: Yup.number().required(\"Required\"),\r\n          insuranceFeesBhd: Yup.number().required(\"Required\"),\r\n          otherFeesBhd: Yup.number().required(\"Required\"),\r\n          vatFeesBhd: Yup.number().required(\"Required\"),\r\n          processFeesBhd: Yup.number().min(minAmount,`Minimum ${minAmount} BHD`).required(\"Required\"),\r\n          otherFeesLabel: Yup.string().required(\"Required\"),\r\n          agencyId: Yup.string().optional(),\r\n          countAssignedWorkers: Yup.number().optional(),\r\n          created: Yup.date().optional(),\r\n          modified: Yup.date().optional(),\r\n          processDurationMinimumMonths: Yup.number().min(minMonths,`Minimum ${minMonths} Months`).required(\"Required\"),\r\n          processDurationMaximumMonths: Yup.number().min(minMonths,`Minimum ${minMonths} Months`).required(\"Required\"),\r\n          totalFeesBhd: Yup.number().optional(),\r\n          vatPercentage: Yup.number().optional(),\r\n          _id: Yup.string().optional(),\r\n          id: Yup.string().optional(),\r\n        })}\r\n        onSubmit={(formValues, { setSubmitting }) => {\r\n          setSubmitting(true);\r\n          setSaving(true);\r\n          const isNew = formValues._id === undefined;\r\n          const method = isNew ? \"POST\" : \"PUT\";\r\n          const url = process.env.REACT_APP_API_ROOT + \"/be/process-templates\";\r\n\r\n          axios\r\n            .request<IResponse<IProcessTemplate>>({\r\n              method,\r\n              url,\r\n              data: formValues,\r\n              withCredentials: true,\r\n            })\r\n            .then((result) => {\r\n              toast.success(result.data.message);\r\n              setEditing(false);\r\n              setSaving(false);\r\n              setSubmitting(false);\r\n            })\r\n            .catch((reason) => {\r\n              toast.error(reason.message);\r\n              setSaving(false);\r\n              setSubmitting(false);\r\n            });\r\n        }}\r\n      >\r\n        {(formik) => (\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <Grid container spacing={2} alignItems=\"flex-end\">\r\n              <Grid item md={10} xs={12}>\r\n                <ProcessTemplateCard\r\n                  process={props.process}\r\n                  region={props.region}\r\n                  editing={editing}\r\n                  saving={saving}\r\n                  formik={formik}\r\n                />{\" \"}\r\n              </Grid>\r\n              <Grid item md={2} xs={12}>\r\n                <Box p={1}>\r\n                  <Box p={1} textAlign=\"center\" fontSize={smallFontSize}>\r\n                    Assigned Workers: {count}\r\n                  </Box>\r\n                  {editing && (\r\n                    <>\r\n                      <FormErrors\r\n                        errors={formik.errors}\r\n                        style={{ fontSize: smallFontSize }}\r\n                      />\r\n                      <Box\r\n                        my={1}\r\n                        textAlign=\"center\"\r\n                        fontSize={smallFontSize}\r\n                        color=\"blue\"\r\n                        fontStyle=\"italic\"\r\n                      >\r\n                        {Object.keys(formik.errors).length === 0 && (\r\n                          <>\r\n                            Please save your changes\r\n                            {count > 0\r\n                              ? `, they will be applied automatically to ${count} workers`\r\n                              : \"\"}\r\n                          </>\r\n                        )}\r\n                      </Box>\r\n                      <Button\r\n                        fullWidth={true}\r\n                        color=\"primary\"\r\n                        variant=\"outlined\"\r\n                        disabled={saving}\r\n                        type=\"submit\"\r\n                      >\r\n                        {saving ? \"Saving...\" : \"Save\"}\r\n                      </Button>\r\n                    </>\r\n                  )}\r\n                  {!editing && (\r\n                    <Button\r\n                      fullWidth={true}\r\n                      variant=\"outlined\"\r\n                      color=\"primary\"\r\n                      onClick={() => {\r\n                        setEditing(true);\r\n                      }}\r\n                    >\r\n                      Edit\r\n                    </Button>\r\n                  )}\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n          </form>\r\n        )}\r\n      </Formik>\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Button } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport axios from \"axios\";\r\nimport React, { ReactElement, useEffect, useState } from \"react\";\r\nimport { IProcessTemplate } from \"estreeh-common-library/src/interfaces/IProcessTemplate\";\r\nimport { IResponse } from \"estreeh-common-library/src/interfaces/IResponse\";\r\nimport { Regions } from \"../../config/Regions\";\r\n// import { ProcessTemplateFactory } from \"../../factories/ProcessTemplateFactory\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport SubmitButton from \"../forms/SubmitButton\";\r\nimport ProcessTemplate from \"./ProcessTemplate\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function AgencyProcessTemplatesPage(props: Props): ReactElement {\r\n  const makeBlankProcess = (): IProcessTemplate => {\r\n    return {\r\n      accommodationFeesBhd: 0,\r\n      insuranceFeesBhd: 0,\r\n      otherFeesBhd: 0,\r\n      processFeesBhd: 0,\r\n      processDurationMaximumMonths: 0,\r\n      processDurationMinimumMonths: 0,\r\n      vatFeesBhd: 0,\r\n      governmentFeesBhd: 0,\r\n      vatPercentage: 0,\r\n      title: \"\",\r\n      agencyId: \"\",\r\n      otherFeesLabel: \"Others\",\r\n      countAssignedWorkers: 0,\r\n      totalFeesBhd: 0,\r\n      created: new Date(),\r\n      modified: new Date(),\r\n    };\r\n  };\r\n  // const fakeProcesses: IProcessTemplate[] = ProcessTemplateFactory.buildList(0);\r\n\r\n  // const [processes, setProcesses] = useState([...fakeProcesses, makeBlankProcess()]);\r\n  const [processes, setProcesses] = useState<IProcessTemplate[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const addClicked = () => {\r\n    setProcesses((prev) => [...prev, makeBlankProcess()]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      console.log(\"Loading process templates...\");\r\n      axios\r\n        .get<IResponse<IProcessTemplate[]>>(\r\n          process.env.REACT_APP_API_ROOT + \"/be/process-templates\",\r\n          { withCredentials: true }\r\n        )\r\n        .then((result) => {\r\n          setProcesses(result.data.data);\r\n          console.log(\"Process templates loaded\");\r\n          setLoading(false);\r\n          if (result.data.data.length === 0) addClicked();\r\n        });\r\n    }\r\n  });\r\n\r\n  const addMore = (\r\n    <Box>\r\n      <Button color=\"primary\" variant=\"contained\" onClick={addClicked}>\r\n        + Add More\r\n      </Button>\r\n    </Box>\r\n  );\r\n\r\n  return (\r\n    <Box>\r\n      <PageTitle title=\"Process Templates\" />\r\n      {/* {addMore} */}\r\n      <Box>\r\n        {processes.map((process, index) => (\r\n          <ProcessTemplate\r\n            key={process._id}\r\n            process={process}\r\n            region={Regions.bahrain}\r\n            newItem={process._id === undefined}\r\n          />\r\n        ))}\r\n      </Box>\r\n      {addMore}\r\n      <SubmitButton\r\n        title=\"Exit\"\r\n        navigate={props.navigate}\r\n        navigateUrl=\"/panel/dashboard\"\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React, { ReactElement } from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { Link, Typography } from \"@material-ui/core\";\r\nimport ErrorPage from \"./ErrorPage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function UnauthorizedPage(props: Props): ReactElement {\r\n  return (\r\n    <ErrorPage title=\"401\" subtitle=\"❌ Unauthorized\">\r\n      <Typography>\r\n        Unauthorized or session has expired. Please make sure you have <Link href=\"/login\">logged in</Link>.\r\n      </Typography>\r\n    </ErrorPage>\r\n  );\r\n}\r\n","import React, { ReactElement, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  FormGroup,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Divider,\r\n  Grid,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport SubmitButton from \"../forms/SubmitButton\";\r\nimport { IBackendField } from \"estreeh-common-library/src/interfaces/IBackendField\";\r\n// import { AreasDropdown } from \"../../config/AreasDropdown\";\r\nimport Faker from \"faker\";\r\nimport BackendFieldSet from \"../forms/BackendFieldSet\";\r\nimport { nationalities } from \"../../config/Nationalities\";\r\nimport { Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport IAgency from \"estreeh-common-library/src/interfaces/IAgency\";\r\nimport { IResponse } from \"estreeh-common-library/src/interfaces/IResponse\";\r\nimport { S3Folder } from \"estreeh-common-library/src/types/S3Folder\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"axios\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  showNationalitiesSection: boolean;\r\n  showTermsAndConditionsSection: boolean;\r\n}\r\n\r\nexport default function AgencySettingsPage(props: Props): ReactElement {\r\n  const [agency, setAgency] = useState<Partial<IAgency>>({});\r\n  const [loading, setLoading] = useState(true);\r\n  const folder: S3Folder = \"agency/sm\";\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      axios\r\n        .get<IResponse<IAgency>>(\r\n          process.env.REACT_APP_API_ROOT + \"/be/agency\",\r\n          { withCredentials: true }\r\n        )\r\n        .then((result) => {\r\n          setAgency(result.data.data);\r\n          setLoading(false);\r\n        });\r\n    }\r\n  }, [loading, setLoading]);\r\n\r\n  const fields: IBackendField<IAgency>[] = [\r\n    {\r\n      name: \"title\",\r\n      label: \"Agency Name (English)\",\r\n      readOnly: true,\r\n      // defaultValue: agencyName.name,\r\n    },\r\n    {\r\n      name: \"titleAr\",\r\n      label: \"Agency Name (Arabic)\",\r\n      readOnly: true,\r\n      // defaultValue: agencyName.nameAr,\r\n    },\r\n    {\r\n      name: \"cr\",\r\n      readOnly: true,\r\n      defaultValue:\r\n        Faker.datatype.number({ min: 10000, max: 99999 }) +\r\n        \"-\" +\r\n        Faker.datatype.number({ min: 0, max: 9 }),\r\n    },\r\n    // {\r\n    //   name: \"area\",\r\n    //   label: \"Agency Area\",\r\n    //   // variant: \"select\",\r\n    //   readOnly: true,\r\n    //   defaultValue: CamelToSentence(\r\n    //     Faker.random.arrayElement(AreasDropdown.map((a) => a.value))\r\n    //   ),\r\n    //   // selectOptions: AreasDropdown,\r\n    // },\r\n    {\r\n      name: \"telephone\",\r\n    },\r\n    {\r\n      name: \"mobile\",\r\n    },\r\n    {\r\n      name: \"email\",\r\n    },\r\n    {\r\n      name: \"openingTimes\",\r\n      md: 12,\r\n      variant: \"textarea\",\r\n      textareaLines: 4,\r\n    },\r\n  ];\r\n\r\n  const pictureFields: IBackendField<IAgency>[] = [\r\n    {\r\n      name: \"uploadLogo\",\r\n      // label: \"Change Logo\",\r\n      variant: \"file\",\r\n      buttonIcon: \"photo_camera\",\r\n    },\r\n  ];\r\n\r\n  // const unitField: IBackendField = {\r\n  //   name: \"unit\",\r\n  //   variant: \"select\",\r\n  //   selectOptions: [{ value: \"weeks\" }, { value: \"months\" }],\r\n  // };\r\n\r\n  const termsLines = 11;\r\n\r\n  const termsFields: IBackendField[] = [\r\n    // {\r\n    //   name: \"General T&C\",\r\n    //   variant: \"textarea\",\r\n    // },\r\n    // {\r\n    //   name: \"General Terms & Conditions\",\r\n    //   variant: \"textarea\",\r\n    //   textareaLines:lines,\r\n    // },\r\n    // {\r\n    //   name: \"Contract Terms & Conditions\",\r\n    //   variant: \"textarea\",\r\n    //   textareaLines:lines,\r\n    //   md:12,\r\n    // },\r\n    {\r\n      name: \"Local Transfer Worker Terms & Conditions\",\r\n      variant: \"textarea\",\r\n      textareaLines: termsLines,\r\n    },\r\n    // {\r\n    //   name: \"Payments Terms & Conditions\",\r\n    //   variant: \"textarea\",\r\n    //   textareaLines:lines,\r\n    // },\r\n    // {\r\n    //   name: \"Rental Workers T&C\",\r\n    //   variant: \"textarea\",\r\n    // },\r\n  ];\r\n\r\n  // TODO: TO use this in future\r\n\r\n  const nationalitiesComponent = (\r\n    <Box>\r\n      <PageTitle title=\"Nationalities\" />\r\n      <BackendFieldSet xs={12}>\r\n        <FormGroup row>\r\n          {nationalities.map((nationality) => (\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox name={\"nationality_\" + nationality} color=\"primary\" />\r\n              }\r\n              label={nationality}\r\n              key={nationality}\r\n            />\r\n          ))}\r\n        </FormGroup>\r\n      </BackendFieldSet>\r\n    </Box>\r\n  );\r\n\r\n  const div = (\r\n    <Box my={4}>\r\n      <Divider />\r\n    </Box>\r\n  );\r\n\r\n  function completed(setSubmitting: (isSubmitting: boolean) => void) {\r\n    setSubmitting(false);\r\n    if (props.navigate) props.navigate(\"success\");\r\n  }\r\n\r\n  function uploadPicture(\r\n    file: any,\r\n    setSubmitting: (isSubmitting: boolean) => void\r\n  ) {\r\n    let formData = new FormData();\r\n    // let folder:S3Folder = \"\"\r\n    // formData.append(\"_id\", v._id);\r\n    // formData.append(\"folder\", )\r\n    formData.append(\"file\", file);\r\n    axios\r\n      .request<IResponse>({\r\n        method: \"PUT\",\r\n        url: process.env.REACT_APP_API_ROOT + \"/be/agency/picture\",\r\n        data: formData,\r\n        withCredentials: true,\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((result) => {\r\n        // toast.success(result.data.message);\r\n        completed(setSubmitting);\r\n      });\r\n  }\r\n\r\n  /* ----------------------------------------\r\n  TODO: IDEAS to be in this page:\r\n\r\n  - On/Off Payment methods support:\r\n  --- Cash\r\n  --- VISA\r\n  --- Benefit\r\n  --- Debit Card\r\n\r\n  -----------------------------------------*/\r\n\r\n  return (\r\n    <>\r\n      {!loading && (\r\n        <Formik\r\n          initialValues={agency}\r\n          validationSchema={Yup.object({\r\n            // name: Yup.string().required(\"Required\"),\r\n            // processTemplateId: Yup.string().required(\"Required\"),\r\n          })}\r\n          onSubmit={(formValues, { setSubmitting }) => {\r\n            setSubmitting(true);\r\n            const method = \"PUT\";\r\n            const url = process.env.REACT_APP_API_ROOT + \"/be/agency\";\r\n            axios\r\n              .request<IResponse<IAgency>>({\r\n                method,\r\n                url,\r\n                data: formValues,\r\n                withCredentials: true,\r\n              })\r\n              .then((result) => {\r\n                toast.success(result.data.message);\r\n                if (formValues.uploadLogo !== undefined) {\r\n                  uploadPicture(formValues.uploadLogo, setSubmitting);\r\n                } else {\r\n                  completed(setSubmitting);\r\n                }\r\n              })\r\n              .catch((reason) => {\r\n                toast.error(reason.message);\r\n                setSubmitting(false);\r\n              });\r\n          }}\r\n        >\r\n          {(formik) => (\r\n            <form onSubmit={formik.handleSubmit}>\r\n              <React.Fragment>\r\n                <PageTitle title=\"Agency Settings\" />\r\n                <BackendFieldSet\r\n                  // header=\"Agency Profile\"\r\n                  fields={fields}\r\n                  md={6}\r\n                  formik={formik}\r\n                />\r\n                <BackendFieldSet header=\"Images\" xs={12}>\r\n                  <Grid container>\r\n                    <Grid item xs={4}>\r\n                      <Avatar\r\n                        src={\r\n                          process.env.REACT_APP_IMAGES_ROOT +\r\n                          \"/\" +\r\n                          folder +\r\n                          \"/\" +\r\n                          agency._id +\r\n                          \".\" +\r\n                          agency.logoFileExt\r\n                        }\r\n                        variant=\"rounded\"\r\n                        style={{\r\n                          width: 160,\r\n                          height: 160,\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                </BackendFieldSet>\r\n                <BackendFieldSet\r\n                  xs={12}\r\n                  fields={pictureFields}\r\n                  formik={formik}\r\n                />\r\n              </React.Fragment>\r\n              {div}\r\n\r\n              {props.showNationalitiesSection && nationalitiesComponent}\r\n              {props.showTermsAndConditionsSection && (\r\n                <>\r\n                  <PageTitle title=\"Terms & Conditions\" />\r\n                  <BackendFieldSet\r\n                    fields={termsFields}\r\n                    md={12}\r\n                    formik={formik}\r\n                  />\r\n                </>\r\n              )}\r\n\r\n              {div}\r\n              <React.Fragment>\r\n                <PageTitle title=\"Payment Methods\" />\r\n                <Box>\r\n                  <Alert severity=\"info\">\r\n                    Currently only Cash option is available. More options will\r\n                    be available in near future.\r\n                  </Alert>\r\n                </Box>\r\n                <SubmitButton\r\n                  errors={formik.errors}\r\n                  type=\"submit\"\r\n                  title=\"save\"\r\n                  disabled={formik.isSubmitting}\r\n                />\r\n              </React.Fragment>\r\n            </form>\r\n          )}\r\n        </Formik>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport SuccessBigMessage from \"../common/SuccessBigMessage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function SuccessAgencyPage(props: Props): ReactElement {\r\n  const navigate =\r\n    props.navigate !== undefined ? props.navigate : (s: string) => {};\r\n  return (\r\n    <SuccessBigMessage bigText=\"Agency settings updated successfully\" smallText={`If you have updated the logo, it might take up to 60 seconds to appear.`}>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          navigate(\"/panel/dashboard\");\r\n        }}\r\n      >\r\n        Done\r\n      </Button>\r\n    </SuccessBigMessage>\r\n  );\r\n}\r\n","import { Box, Typography } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport QRCode from \"react-qr-code\";\r\nimport { useStoreState } from \"../../helpers/StoreTypedHooks\";\r\n\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function AgencyQrCodePage(props: Props): ReactElement {\r\n\r\n  const agency = useStoreState(s => s.agency.item);\r\n\r\n  const qr = process.env.REACT_APP_FE_ROOT + \"/agencies/contract/\" + agency?.slug;\r\n\r\n  return (\r\n    <Box>\r\n      <PageTitle title=\"QR Code Print\" />\r\n      <Box>\r\n        Use this page to generate a printable QR Code that redirects customers\r\n        to your own ESTREEH page!\r\n      </Box>\r\n      <Box my={2}>\r\n        <Typography variant=\"h5\">QR Code</Typography>\r\n      </Box>\r\n      <Box p={3}>\r\n        <QRCode value={qr} size={400} />\r\n      </Box>\r\n      <Box px={3} py={1}>\r\n        <a href={qr} target=\"_blank\" rel=\"noreferrer\">{qr}</a>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Redirect, Router } from \"@reach/router\";\r\nimport { ReactElement } from \"react\";\r\nimport DashboardPage from \"../dashboard/DashboardPage\";\r\nimport AdminPanelLayout from \"../layouts/AdminPanelLayout\";\r\nimport EmptySection from \"./EmptySection\";\r\nimport LoginLayout from \"../layouts/LoginLayout\";\r\nimport NotFoundPage from \"../layouts/NotFoundPage\";\r\nimport LoginPage from \"../login/LoginPage\";\r\nimport AddEditWorkerPage from \"../workers/AddEditWorkerPage\";\r\nimport MyRequestsPage from \"../requests/MyRequestsPage\";\r\nimport MyWorkersPage from \"../workers/MyWorkersPage\";\r\nimport UpdateRequestPage from \"../requests/UpdateRequestPage\";\r\nimport SuccessWorkerPage from \"../workers/SuccessWorkerPage\";\r\nimport SuccessRequestPage from \"../requests/SuccessRequestPage\";\r\nimport AgencyProcessTemplatesPage from \"../settings/AgencyProcessTemplatesPage\";\r\nimport UnauthorizedPage from \"../layouts/UnauthorizedPage\";\r\nimport AgencySettingsPage from \"../settings/AgencySettingsPage\";\r\nimport SuccessAgencyPage from \"../settings/SuccessAgencyPage\";\r\nimport { useStoreState } from \"../../helpers/StoreTypedHooks\";\r\nimport AgencyQrCodePage from \"../settings/AgencyQrCodePage\";\r\n\r\ninterface Props {}\r\n\r\nexport default function MasterRouter(props: Props): ReactElement {\r\n  const user = useStoreState((s) => s.user.item);\r\n  // const [loading1, setLoading1] = useState(true);\r\n  // const [loading2, setLoading2] = useState(true);\r\n  // const [user, setUser] = useState<IUser | undefined>(undefined);\r\n  // const [config, setConfig] = useState<IApiResConfig>();\r\n  // const [dashSummary, setDashSummary] = useState<\r\n  //   IApiResDashboardSummary | undefined\r\n  // >(undefined);\r\n  // const [agency, setAgency] = useState<IAgency | null>(null);\r\n  // const [validUser, setValidUser] = useState<boolean>(false);\r\n\r\n  // const allowedRoles: UserRole[] = ;\r\n  // const allowedRoles: UserRole[] = useMemo(\r\n  //   () => [\"Agency\", \"Agency Manager\"],\r\n  //   []\r\n  // );\r\n\r\n  // useEffect(() => {\r\n  //   if (loading2 || user === undefined) {\r\n  //     console.log(\"Getting user\");\r\n  //     getUser().then((result) => {\r\n  //       console.log(\"User received from API\");\r\n  //       const user = result.data.data;\r\n  //       if (\r\n  //         user !== undefined &&\r\n  //         user.agencyId !== undefined &&\r\n  //         allowedRoles.includes(user.role)\r\n  //       ) {\r\n  //         // console.log(\"Role is OK.\", user.role, allowedRoles);\r\n  //         // console.log(\"User is OK. user: \",user);\r\n  //         setValidUser(true);\r\n  //         setLoading1(false);\r\n  //         setUser(user);\r\n  //         getConfig().then((configResult) => {\r\n  //           setConfig(configResult.data.data);\r\n  //           getDashSummary().then((dashResult) => {\r\n  //             setDashSummary(dashResult.data.data);\r\n  //             getAgency().then((agencyResult) => {\r\n  //               setAgency(agencyResult.data.data);\r\n  //               setLoading2(false);\r\n  //             });\r\n  //           });\r\n  //         });\r\n  //       } else {\r\n  //         setValidUser(false);\r\n  //         setLoading1(false);\r\n  //       }\r\n  //     });\r\n  //   }\r\n  // }, [setUser, setLoading1, loading1, loading2, user, allowedRoles]);\r\n\r\n  // console.log(\"Valid User: \", validUser);\r\n\r\n  return (\r\n    <Router primary={false}>\r\n      {user === undefined && (\r\n        <>\r\n          <Redirect from=\"/\" to=\"/login\" noThrow />\r\n          <Redirect from=\"/panel\" to=\"/login\" noThrow />\r\n          <UnauthorizedPage default />\r\n          <LoginLayout path=\"login\">\r\n            <LoginPage path=\"/\" />\r\n          </LoginLayout>\r\n        </>\r\n      )}\r\n      {user !== undefined && (\r\n        <>\r\n          <Redirect from=\"/\" to=\"/panel\" noThrow />\r\n          <Redirect from=\"/login\" to=\"/panel\" noThrow />\r\n          <NotFoundPage default />\r\n          <AdminPanelLayout path=\"panel\" user={user}>\r\n            <Redirect from=\"/\" to=\"dashboard\" noThrow />\r\n            <DashboardPage path=\"dashboard\" user={user} />\r\n            <EmptySection path=\"my-workers\">\r\n              <MyWorkersPage path=\"/\" />\r\n              <AddEditWorkerPage path=\"add\" />\r\n              <AddEditWorkerPage path=\"edit/:id\" />\r\n              <SuccessWorkerPage path=\"success\" message=\"New worker added\" />\r\n              <SuccessWorkerPage path=\"success-edit\" message=\"Worker updated\" />\r\n            </EmptySection>\r\n            <EmptySection path=\"my-requests\">\r\n              <MyRequestsPage path=\"/\" />\r\n              <UpdateRequestPage path=\"update/:id\" />\r\n              <SuccessRequestPage path=\"success\" />\r\n            </EmptySection>\r\n            <EmptySection path=\"agency/settings\">\r\n              <AgencySettingsPage default showNationalitiesSection={false} showTermsAndConditionsSection={false} />\r\n              <AgencyProcessTemplatesPage path=\"process-templates\" />\r\n              <SuccessAgencyPage path=\"success\" />\r\n              <AgencyQrCodePage path=\"qr-code\" />\r\n            </EmptySection>\r\n          </AdminPanelLayout>\r\n        </>\r\n      )}\r\n    </Router>\r\n  );\r\n}\r\n","import { Box, Typography } from \"@material-ui/core\";\r\nimport React, { ReactElement, useEffect } from \"react\";\r\nimport { useStoreActions, useStoreState } from \"../../helpers/StoreTypedHooks\";\r\nimport Logo from \"../common/Logo\";\r\nimport MasterRouter from \"./MasterRouter\";\r\n\r\ninterface Props {}\r\n\r\nexport default function MasterData(props: Props): ReactElement {\r\n\r\n  const dataLoaded = useStoreState((s) => s.dataLoaded.item);\r\n  const loadAllInit = useStoreActions((a) => a.loadAllInit);\r\n\r\n  useEffect(() => {\r\n    if (dataLoaded === false) {\r\n      console.log(\"Loading all data init\");\r\n      loadAllInit();\r\n    }\r\n  }, [dataLoaded, loadAllInit]);\r\n\r\n  return (\r\n    <>\r\n      {dataLoaded === true && <MasterRouter />}\r\n      {dataLoaded === false && (\r\n        <Box p={2} textAlign=\"center\">\r\n          <Box py={5}>\r\n            <Logo styles={{\r\n              maxHeight:80,\r\n              marginLeft:\"auto\",\r\n              marginRight:\"auto\",\r\n            }}/>\r\n          </Box>\r\n          <Typography variant=\"h5\">Loading...</Typography>\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport \"@fontsource/roboto\";\r\nimport UseStyles from \"../../config/UseStyles\";\r\nimport MyTheme from \"../../config/MyTheme\";\r\n// import { myBreakpoints } from \"../../config/Breakpoints\";\r\nimport Branding from \"../../config/Branding\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport MasterData from \"./MasterData\";\r\n\r\n\r\nexport default function MasterTheme(props: { useRtl: boolean }) {\r\n  const classes = UseStyles();\r\n  // const {i18n} = useTranslation();\r\n  // const lang = i18n.language;\r\n  // const dir = props.useRtl && lang === \"ar\" ? \"rtl\" : \"ltr\";\r\n  const lang = \"en\";\r\n  const dir = \"ltr\";\r\n\r\n  document.documentElement.dir = dir;\r\n  document.documentElement.lang = lang;\r\n  document.body.dir = dir;\r\n  document.body.lang = lang;\r\n\r\n  // console.log(MyTheme);\r\n\r\n  return (\r\n    // <ReactBreakpoints breakpoints={myBreakpoints}>\r\n    <ThemeProvider theme={MyTheme}>\r\n      {/* <link rel=\"stylesheet\" href=\"https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css\"/> */}\r\n      <link rel=\"stylesheet\" href=\"https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css\"/>\r\n      <ToastContainer />\r\n      <div\r\n        className={classes.root}\r\n        id=\"after-root\"\r\n        dir={dir}\r\n        style={{ height: \"100%\", fontFamily: Branding.fontFamily.body }}\r\n      >\r\n        {/* <ToolboxState classes={classes}/> */}\r\n        \r\n        <MasterData />\r\n      </div>\r\n    </ThemeProvider>\r\n    // </ReactBreakpoints>\r\n  );\r\n}\r\n","import { action, Actions, createStore, thunk } from \"easy-peasy\";\r\n\r\n// import _ from \"lodash\";\r\n\r\nimport { Base_ModelSingular } from \"estreeh-common-library/src/interfaces/store/Base_ModelSingular\";\r\n// import { IBasicFilterableModel } from \"estreeh-common-library/src/interfaces/store/IBasicFilterableModel\";\r\n// import { Base_Model } from \"estreeh-common-library/src/interfaces/store/Base_Model\";\r\nimport { toast } from \"react-toastify\";\r\nimport { IBeStoreModel } from \"../interfaces/IBeStoreModel\";\r\nimport axios from \"axios\";\r\nimport { IResponse } from \"estreeh-common-library/src/interfaces/IResponse\";\r\nimport { IUser } from \"estreeh-common-library/src/interfaces/IUser\";\r\nimport { IApiResConfig } from \"estreeh-common-library/src/interfaces/api/res/IApiResConfig\";\r\nimport IAgency from \"estreeh-common-library/src/interfaces/IAgency\";\r\nimport { IApiResDashboardSummary } from \"estreeh-common-library/src/interfaces/api/res/IApiResDashboardSummary\";\r\nimport { IApiReqLogin } from \"estreeh-common-library/src/interfaces/api/req/IApiReqLogin\";\r\n\r\nconst loadUser = thunk(async (actions: Actions<IBeStoreModel>) => {\r\n  let user: IUser | undefined = undefined;\r\n  try {\r\n    const userResponse = await axios.get<IResponse<IUser | undefined>>(\r\n      process.env.REACT_APP_API_ROOT + \"/auth/me/agency-be\",\r\n      { withCredentials: true }\r\n    );\r\n    user = userResponse.data.data;\r\n  } catch (ex) {}\r\n  if (user !== undefined) {\r\n    actions.user.setItem(user);\r\n    toast.success(`Welcome, ${user.fullName}!`);\r\n  }\r\n  return user;\r\n});\r\n\r\nconst loadAgency = thunk(async (actions: Actions<IBeStoreModel>) => {\r\n  const response = await axios.get<IResponse<IAgency>>(\r\n    process.env.REACT_APP_API_ROOT + \"/be/agency\",\r\n    { withCredentials: true }\r\n  );\r\n  actions.agency.setItem(response.data.data);\r\n});\r\n\r\nconst loadConfig = thunk(async (actions: Actions<IBeStoreModel>) => {\r\n  const response = await axios.get<IResponse<IApiResConfig>>(\r\n    process.env.REACT_APP_API_ROOT + \"/pub/config\",\r\n    { withCredentials: true }\r\n  );\r\n  actions.config.setItem(response.data.data);\r\n});\r\n\r\nconst loadRequests = thunk(async (actions: Actions<IBeStoreModel>) => {});\r\n\r\nconst loadWorkers = thunk(async (actions: Actions<IBeStoreModel>) => {});\r\n\r\nconst loadDashboardSummary = thunk(async (actions: Actions<IBeStoreModel>) => {\r\n  const response = await axios.get<IResponse<IApiResDashboardSummary>>(\r\n    process.env.REACT_APP_API_ROOT + \"/be/dashboard\",\r\n    { withCredentials: true }\r\n  );\r\n  actions.dashboardSummary.setItem(response.data.data);\r\n});\r\n\r\nconst loadAllInit = thunk(async (actions: Actions<IBeStoreModel>) => {\r\n  actions.dataLoading.setItem(true);\r\n\r\n  const [user] = await Promise.all([actions.loadUser(), actions.loadConfig()]);\r\n  if (user !== undefined) {\r\n    await Promise.all([\r\n      actions.loadAgency(),\r\n      actions.loadDashboardSummary(),\r\n      actions.loadAgency(),\r\n    ]);\r\n  }\r\n  actions.dataLoading.setItem(false);\r\n  actions.dataLoaded.setItem(true);\r\n});\r\n\r\nconst login = thunk(\r\n  async (actions: Actions<IBeStoreModel>, payload: IApiReqLogin) => {\r\n    const result = await axios.post<IResponse<IUser | undefined>>(\r\n      process.env.REACT_APP_API_ROOT + \"/auth/login\",\r\n      payload,\r\n      { withCredentials: true }\r\n    );\r\n    const user = result.data.data;\r\n    if (user !== undefined) {\r\n      actions.dataLoaded.setItem(false);\r\n      // actions.loadUser();\r\n    }\r\n    return user;\r\n  }\r\n);\r\n\r\nconst logout = thunk(async (actions: Actions<IBeStoreModel>) => {\r\n  const result = await axios.get<IResponse<boolean>>(\r\n    process.env.REACT_APP_API_ROOT + \"/auth/logout\",\r\n    { withCredentials: true }\r\n  );\r\n  actions.user.setItem(undefined);\r\n  const success = result.data.data;\r\n  return success;\r\n});\r\n\r\nconst makeStoreDefault = (): IBeStoreModel => {\r\n  return {\r\n    // selectedWorkerTwoYear: twoYear(),\r\n    // selectedSlots: slots(),\r\n    // selectedWorkerRental: hourly(),\r\n    // translationPack: singleModel(),\r\n    // transformData: transformData,\r\n\r\n    // workerTwoYear: arrayModel(),\r\n    // requests: arrayModel(),\r\n\r\n    agency: singleModel(),\r\n    user: singleModel(),\r\n    config: singleModel(),\r\n    dashboardSummary: singleModel(),\r\n    dataLoading: singleModel(false),\r\n    dataLoaded: singleModel(false),\r\n    loadAllInit,\r\n    loadUser,\r\n    loadAgency,\r\n    loadConfig,\r\n    loadRequests,\r\n    loadDashboardSummary,\r\n    loadWorkers,\r\n    login,\r\n    logout,\r\n  };\r\n};\r\n\r\nconst singleModel = <T>(itemDefault?: T): Base_ModelSingular<T | any> => {\r\n  return {\r\n    item: itemDefault,\r\n    setItem: action((state: any, payload) => {\r\n      state.item = payload;\r\n    }),\r\n  };\r\n};\r\n\r\n// const arrayModel = <T>(): Base_Model<T> => {\r\n// const arrayModel = (): any => {\r\n//   return {\r\n//     items: [],\r\n//     setItems: action((state: any, payload) => {\r\n//       state.items = payload.payload;\r\n//     }),\r\n//   };\r\n// };\r\n\r\nconst beStoreDefault: IBeStoreModel = makeStoreDefault();\r\nexport const beStore = createStore(beStoreDefault);\r\n","import MasterTheme from \"./components/preloaders/MasterTheme\";\nimport \"./App.css\";\nimport { StoreProvider } from \"easy-peasy\";\nimport { beStore } from \"./config/BeStoreDefault\";\n\n\nfunction App() {\n  return (\n    <StoreProvider store={beStore}>\n      <MasterTheme useRtl={false} />\n    </StoreProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n  ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}