{"version":3,"sources":["config/Branding.ts","config/UseStyles.ts","config/MyTheme.ts","components/common/PageTitle.tsx","components/dashboard/DashboardCard.tsx","components/dashboard/DashboardPage.tsx","images/logo.svg","components/common/Logo.tsx","components/navigation/LeftNavItem.tsx","components/navigation/LeftNav.tsx","components/navigation/TopNav.tsx","components/layouts/AdminPanelLayout.tsx","components/preloaders/EmptySection.tsx","components/layouts/LoginLayout.tsx","components/layouts/ErrorPage.tsx","components/layouts/NotFoundPage.tsx","components/login/LoginPage.tsx","components/forms/BackendField.tsx","components/forms/FieldSetHeader.tsx","components/forms/BackendFieldSet.tsx","config/FilterOptions.ts","components/forms/FormErrors.tsx","components/forms/SubmitButton.tsx","config/Nationalities.ts","components/workers/AddEditWorkerForm.tsx","components/workers/AddEditWorkerPage.tsx","components/requests/MyRequestsPage.tsx","components/workers/MyWorkersPage.tsx","images/details.png","config/WorkerWorkflowDropdown.ts","components/requests/UpdateRequestPage.tsx","images/check.svg","components/common/SuccessBigMessage.tsx","components/workers/SuccessWorkerPage.tsx","components/requests/SuccessRequestPage.tsx","config/Regions.ts","components/settings/ProcessTemplateCard.tsx","components/settings/ProcessTemplate.tsx","components/settings/AgencyProcessTemplatesPage.tsx","components/layouts/UnauthorizedPage.tsx","components/settings/AgencySettingsPage.tsx","components/settings/SuccessAgencyPage.tsx","components/preloaders/MasterRouter.tsx","components/preloaders/MasterTheme.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["light","lightest","Branding","primary","lighter","lightBg","warning","dark","slotColors","free","booked","off","hover","selected","shadowColor","color","Color","darken","alpha","toString","shadow","iOffset","iBlur","offset","slotColorsDot","text","secondary","string","fontSize","small","fontFamily","heading","body","niceShadow","borderRadius","niceRadius","transition","UseStyles","makeStyles","theme","createStyles","root","flexGrow","verticalAlign","marginTop","spacing","marginBottom","width","objectFit","borderTop","borderRight","borderBottom","objectFitContain","paper","padding","textAlign","palette","transitionDefault","wizardCardLink","display","boxShadow","background","textDecoration","hoverBox","userSelect","backgroundColor","MyTheme","createMuiTheme","main","contrastThreshold","tonalOffset","typography","PageTitle","props","Box","pb","Typography","variant","title","DashboardCard","Grid","item","md","xs","bgcolor","p","style","textTransform","undefined","value","Skeleton","animation","marginLeft","marginRight","DashboardPage","useState","dashSummary","setDashSummary","agency","setAgency","useEffect","axios","get","process","withCredentials","then","result","data","console","log","container","direction","Avatar","src","_id","logoFileExt","height","titleAr","cr","user","fullName","alignItems","newRequests","pendingRequests","myWorkers","customerReviews","Logo","logo","maxWidth","margin","maxHeight","styles","alt","LeftNavItem","nav","navItem","itemStyles","icon","Icon","ml","mx","my","to","Link","href","children","map","LeftNav","position","px","py","key","TopNav","bg","gridItemStyle","lineHeight","top","right","left","zIndex","Button","onClick","response","setUser","navigate","AdminPanelLayout","pt","EmptySection","LoginLayout","useTheme","isMd","useMediaQuery","breakpoints","up","gradientDir","backgroundImage","textShadow","Container","ErrorPage","m","subtitle","mb","NotFoundPage","LoginPage","loggingIn","setLoggingIn","password","setPassword","email","setEmail","allowedRoles","loginFail","reason","TextField","id","label","onChange","e","target","type","FormControlLabel","control","Checkbox","name","size","disabled","postBody","post","agencyId","includes","role","getUser","finally","catch","BackendField","field","useMemo","CamelToSentence","xsDefault","defaultXs","mdDefault","defaultMd","labelProps","shrink","fieldVariant","readOnly","rowsDefault","rows","textareaLines","numberMinimum","prefixAdornment","prefix","InputAdornment","suffixAdornment","suffix","fieldProps","formik","getFieldProps","checked","onBlur","error","touched","errors","helperText","selectOptions","length","menuRender","option","MenuItem","checkboxControl","Switch","fieldRender","select","multiline","InputLabelProps","inputProps","min","step","InputProps","startAdornment","endAdornment","classes","notchedOutline","component","buttonIcon","hidden","currentTarget","files","file","setFieldValue","avatarWidth","replace","charAt","toUpperCase","slice","Error","FieldSetHeader","normal","header","BackendFieldSet","headerVariant","helpText","fields","jobTitles","fullTitle","isRentalHourly","feesBhdUnit","feesBhd","isRentalMonthly","Faker","random","number","max","x","FormErrors","Object","keys","push","listStylePosition","SubmitButton","navigateUrl","Divider","fullWidth","nationalities","AddEditWorkerForm","worker","templateFields","smallPicture","smallPictureFileExt","bigPicture","bigPictureFileExt","mainFields","t","personalFields","n","languageOptions","languageFields","picHelpClick","alert","onSubmit","handleSubmit","cursor","FormGroup","row","skill","isSubmitting","AddEditWorkerPage","loading","setLoading","processTemplates","setProcessTemplates","processTemplateId","setProcessTemplateId","setPendingRequests","formikSubmitting","setFormikSubmitting","isNew","setIsNew","addressOriginalCountry","city","languageSkillArabic","languageSkillEnglish","agencyRemarks","cityOfBirth","contractPeriod","demoLanguageSkillsText","educationalLevel","isLocalTransfer","jobExperiences","jobTitle","localTransferReason","maritalStatus","nationality","otherSkills","phone","processFees","referenceId","remarks","weightKg","setWorker","getProcessTemplates","find","totalFeesBhd","getTotalProcessFees","formDisabled","uploadPicture","formData","FormData","append","folder","request","method","url","headers","completed","message","toast","success","previous","values","a","initialValues","validationSchema","Yup","required","experienceYears","monthlySalary","formValues","setSubmitting","requests","uploadSmallPicture","uploadBigPicture","saveData","navigateOut","resultPic","MyRequestsPage","setRequests","columns","headerName","sortable","valueFormatter","params","dateFormat","created","valueGetter","workerTwoYear","disableColumnMenu","renderCell","ButtonGroup","Edit","disableSelectionOnClick","v","applicationForm","trackingCode","requestId","status","pageSize","MyWorkersPage","workers","setWorkers","description","checkboxSelection","WorkerWorkflowStatuses","WorkerWorkflowDropdown","stat","UpdateRequestPage","defaultValue","mock","SuccessBigMessage","check","bigText","smallText","SuccessWorkerPage","s","SuccessRequestPage","Regions","bahrain","currencyCode","currencySymbol","currencySymbolAr","currencyDecimals","fixedProcessFees","lmraFees","vatPercentage","workPermitFees","ProcessTemplateCard","currencyCodeSuffix","region","editing","saving","fieldsFees1","otherFeesLabel","fieldsTotals","fieldsDurations","processDurationMinimumMonths","processDurationMaximumMonths","ProcessTemplate","newItem","setEditing","setSaving","count","countAssignedWorkers","smallFontSize","minMonths","border","accommodationFeesBhd","governmentFeesBhd","insuranceFeesBhd","otherFeesBhd","vatFeesBhd","processFeesBhd","optional","modified","fontStyle","AgencyProcessTemplatesPage","processes","setProcesses","loadProcessTemplates","index","prev","Date","UnauthorizedPage","AgencySettingsPage","datatype","pictureFields","termsFields","div","uploadLogo","Fragment","Alert","severity","SuccessAgencyPage","MasterRouter","validUser","from","noThrow","default","path","MasterTheme","dir","document","documentElement","lang","ThemeProvider","className","App","useRtl","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fd84c49c.chunk.js","sourcesContent":["import Color from \"color\";\r\n\r\nconst warning = \"#ffd294\";\r\nconst light = \"#B3D9E3\";\r\nconst lightest = \"#E6F1F4\";\r\nconst darkWarning = Color(warning).darken(0.45).string();\r\n\r\nconst Branding = {\r\n  primary: \"#5890A7\",\r\n  light: light,\r\n  lighter: \"#D9E5EA\",\r\n  lightest: lightest,\r\n  lightBg: \"#f8f8f8\",\r\n  warning: \"#ffd294\",\r\n  dark: \"#172C42\",\r\n  slotColors: {\r\n    free: \"#a0ffae\",\r\n    booked: \"#ff929c\",\r\n    off: \"#dfdfdf\",\r\n    hover: light,\r\n    selected: lightest,\r\n    shadowColor: (color: string): string =>\r\n      new Color(color).darken(0.5).alpha(0.5).toString(),\r\n    shadow: (color: string, iOffset?: number, iBlur?: number): string => {\r\n      let offset = iOffset ? iOffset : 1;\r\n      let blur = iBlur ? iBlur : 2;\r\n      return (\r\n        offset +\r\n        \"px \" +\r\n        offset +\r\n        \"px \" +\r\n        blur +\r\n        \"px \" +\r\n        new Color(color).darken(0.5).alpha(0.5).toString()\r\n      );\r\n    },\r\n  },\r\n  slotColorsDot: {\r\n    free: \"#50af56\",\r\n    booked: \"#ea1542\",\r\n    off: \"#dfdfdf\",\r\n  },\r\n  text: {\r\n    primary: \"#000000\",\r\n    secondary: \"#777777\",\r\n    warning: darkWarning,\r\n  },\r\n  fontSize: {\r\n    small: 13,\r\n  },\r\n  fontFamily: {\r\n    heading: \"\",\r\n    body: '\"Roboto\", \"Segoe UI\", \"Helvetica\", \"Arial\", open_sansregular,Helvetica Neue,Helvetica,-apple-system, BlinkMacSystemFont, \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\", sans-serif',\r\n  },\r\n  shadow: {\r\n    niceShadow: \"0 0 25px #00000011\",\r\n  },\r\n  borderRadius: {\r\n    niceRadius: 10,\r\n  },\r\n  transition: \"all 0.1s\",\r\n};\r\n\r\n// const Branding1 = {\r\n//   primary: \"#5890A7\",\r\n//   light: \"#7AA6B8\",\r\n//   veryLight: \"#D9E5EA\",\r\n//   lightest: \"#EBF2F4\",\r\n//   lightBg: \"#f8f8f8\",\r\n// };\r\n\r\nexport default Branding;\r\n","import { createStyles, makeStyles, Theme } from \"@material-ui/core\";\r\nimport Branding from \"./Branding\";\r\n\r\nconst UseStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n      // backgroundColor: Branding.primary,\r\n      \"& a\": {\r\n        color: Branding.primary,\r\n      },\r\n      \"& .material-icons\": {\r\n        verticalAlign: \"text-bottom\",\r\n      },\r\n\r\n      \"& .transitionDefault\": {\r\n        transition: Branding.transition,\r\n      },\r\n      \"& .MuiTextField-root\": {\r\n        marginTop: theme.spacing(0.5),\r\n        marginBottom: theme.spacing(0.5),\r\n        width: \"100%\",\r\n      },\r\n      \"& .MuiAvatar-img\": {\r\n        objectFit: \"contain\",\r\n      },\r\n      \"& .notched-outline-no-border\":{\r\n        borderTop:0,\r\n        borderRight:0,\r\n        borderBottom:0\r\n      }\r\n    },\r\n    objectFitContain: {\r\n      \"& .MuiAvatar-img\": {\r\n        objectFit: \"contain\",\r\n      },\r\n    },\r\n    paper: {\r\n      padding: theme.spacing(2),\r\n      textAlign: \"center\",\r\n      color: theme.palette.text.primary,\r\n      // boxShadow: \"0 0 3px #000\",\r\n    },\r\n\r\n    transitionDefault: {\r\n      transition: Branding.transition,\r\n    },\r\n\r\n    wizardCardLink: {\r\n      display: \"block\",\r\n      color: \"#000\",\r\n      borderRadius: 10,\r\n      boxShadow: \"0 0 22px #00000022\",\r\n      background: \"white\",\r\n      textDecoration: \"none\",\r\n      transition: Branding.transition,\r\n      \"&:hover\": {\r\n        background: Branding.lightest,\r\n        boxShadow: \"0 0 2px \" + Branding.primary,\r\n      },\r\n    },\r\n\r\n    hoverBox: {\r\n      transition: Branding.transition,\r\n      userSelect: \"none\",\r\n      \"&:hover\": {\r\n        backgroundColor: Branding.lightBg,\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport default UseStyles;\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport Branding from \"./Branding\";\r\n\r\n\r\nconst MyTheme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      // light: will be calculated from palette.primary.main,\r\n      main: Branding.primary,\r\n      // dark: will be calculated from palette.primary.main,\r\n      // contrastText: will be calculated to contrast with palette.primary.main\r\n    },\r\n    secondary: {\r\n      // light: \"#0066ff\",\r\n      main: Branding.warning,\r\n      // dark: will be calculated from palette.secondary.main,\r\n      // contrastText: \"#ffcc00\",\r\n    },\r\n    // Used by `getContrastText()` to maximize the contrast between\r\n    // the background and the text.\r\n    contrastThreshold: 3,\r\n    // Used by the functions below to shift a color's luminance by approximately\r\n    // two indexes within its tonal palette.\r\n    // E.g., shift from Red 500 to Red 300 or Red 700.\r\n    tonalOffset: 0.2,\r\n  },\r\n  typography: {\r\n    fontFamily: Branding.fontFamily.body,\r\n  },\r\n});\r\n\r\nexport default MyTheme;\r\n","import { Box, Typography } from \"@material-ui/core\";\r\nimport React, { ReactElement } from \"react\";\r\n\r\ninterface Props {\r\n  title: string;\r\n}\r\n\r\nexport default function PageTitle(props: Props): ReactElement {\r\n  return (\r\n    <Box pb={2}>\r\n      <Typography variant=\"h4\">{props.title}</Typography>\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Grid, Typography } from \"@material-ui/core\";\r\nimport { Skeleton } from \"@material-ui/lab\";\r\nimport { CSSProperties } from \"@material-ui/styles\";\r\nimport React, { ReactElement } from \"react\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\ninterface Props {\r\n  title?: string;\r\n  value?: number;\r\n}\r\n\r\nexport default function DashboardCard(props: Props): ReactElement {\r\n  const styles: CSSProperties = {\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n  };\r\n  return (\r\n    <Grid item md={3} xs={12}>\r\n      <Box\r\n        bgcolor={Branding.lighter}\r\n        p={3}\r\n        borderRadius={Branding.borderRadius.niceRadius}\r\n        boxShadow={Branding.shadow.niceShadow}\r\n        textAlign=\"center\"\r\n      >\r\n        <Box pb={2}>\r\n          <Typography style={{ textTransform: \"uppercase\" }}>\r\n            {props.title}\r\n          </Typography>\r\n        </Box>\r\n        <Box pb={2} fontSize=\"3.5rem\">\r\n          {props.value === undefined && (\r\n          <Skeleton\r\n            variant=\"text\"\r\n            width={120}\r\n            animation=\"wave\"\r\n            style={styles}\r\n          />\r\n          )}\r\n          {props.value !== undefined && (\r\n            <Box>\r\n              {props.value}\r\n            </Box>\r\n          )}\r\n        </Box>\r\n        {/* <Box>\r\n          <Skeleton variant=\"text\" animation=\"wave\" style={styles} />\r\n        </Box> */}\r\n      </Box>\r\n    </Grid>\r\n  );\r\n}\r\n","import { Avatar, Box, Grid, Typography } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport axios from \"axios\";\r\nimport React, { ReactElement, useEffect, useState } from \"react\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport DashboardCard from \"./DashboardCard\";\r\nimport { IApiDashboardSummaryResponse } from \"../../../../estreeh-common-library/build/interfaces/IApiDashboardSummaryResponse\";\r\nimport { IUser } from \"../../../../estreeh-common-library/build/interfaces/IUser\";\r\nimport IAgency from \"../../../../estreeh-common-library/src/interfaces/IAgency\";\r\nimport {S3Folder} from \"../../../../estreeh-common-library/src/types/S3Folder\";\r\n// import IAgency from \"../../../../estreeh-common-library/build/interfaces/IAgency\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  user: IUser;\r\n}\r\n\r\nexport default function DashboardPage(props: Props): ReactElement {\r\n  const [dashSummary, setDashSummary] = useState<\r\n    IApiDashboardSummaryResponse | undefined\r\n  >(undefined);\r\n  const [agency, setAgency] = useState<IAgency | null>(null);\r\n  const folder:S3Folder = \"agency/sm\";\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get<IResponse<IApiDashboardSummaryResponse>>(\r\n        process.env.REACT_APP_API_ROOT + \"/be/dashboard\",\r\n        { withCredentials: true }\r\n      )\r\n      .then((result) => {\r\n        setDashSummary(result.data.data);\r\n        console.log(\"Got dashboard summary\", result.data.data);\r\n      });\r\n    axios\r\n      .get<IResponse<IAgency>>(process.env.REACT_APP_API_ROOT + \"/be/agency\", {\r\n        withCredentials: true,\r\n      })\r\n      .then((result) => {\r\n        setAgency(result.data.data);\r\n        console.log(\"Got agency\");\r\n      });\r\n  }, [setDashSummary]);\r\n\r\n  return (\r\n    <Box>\r\n      <Grid container direction=\"row-reverse\" spacing={2}>\r\n        <Grid item md={3} xs={12}>\r\n          <Box textAlign=\"center\">\r\n            <Avatar\r\n              src={process.env.REACT_APP_IMAGES_ROOT + \"/\" + folder + \"/\" + agency?._id + \".\" + agency?.logoFileExt}\r\n              variant=\"rounded\"\r\n              style={{\r\n                width: 260,\r\n                height: 220,\r\n                marginLeft:\"auto\",\r\n                marginRight:\"auto\"\r\n              }}\r\n            />\r\n            <Typography>{agency?.title}</Typography>\r\n            <Typography>{agency?.titleAr}</Typography>\r\n            <Typography>CR: {agency?.cr}</Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9} xs={12}>\r\n          <PageTitle title={`Welcome, ${props.user.fullName}`} />\r\n          <Typography>Welcome to the Estreeh agency portal.</Typography>\r\n          <Typography>Please use the left menu to navigate.</Typography>\r\n          <Box p={3}>\r\n            <Grid container spacing={2} alignItems=\"center\">\r\n              <DashboardCard\r\n                title=\"New Requests\"\r\n                value={dashSummary?.newRequests}\r\n              />\r\n              <DashboardCard\r\n                title=\"Pending Requests\"\r\n                value={dashSummary?.pendingRequests}\r\n              />\r\n              <DashboardCard\r\n                title=\"My Workers\"\r\n                value={dashSummary?.myWorkers}\r\n              />\r\n              <DashboardCard\r\n                title=\"Customer Reviews\"\r\n                value={dashSummary?.customerReviews}\r\n              />\r\n            </Grid>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.d1016dba.svg\";","import React, { ReactElement } from \"react\";\r\nimport logo from \"../../images/logo.svg\";\r\n\r\ninterface Props {\r\n  styles?:React.CSSProperties;\r\n}\r\n\r\nexport default function Logo(props: Props): ReactElement {\r\n  return (\r\n    <img\r\n      src={logo}\r\n      style={{\r\n        display: \"block\",\r\n        maxWidth: \"100%\",\r\n        margin: \"0\",\r\n        maxHeight: 40,\r\n        ...props.styles\r\n      }}\r\n      alt=\"Estreeh Logo\"\r\n    />\r\n  );\r\n}\r\n","import { Box, Icon, Link } from \"@material-ui/core\";\r\nimport { Link as RouterLink } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { INavItem } from \"../../../../estreeh-common-library/build/interfaces/INavItem\";\r\n\r\ninterface Props {\r\n  navItem: INavItem;\r\n  my: number;\r\n  mx: number;\r\n}\r\n\r\nexport default function LeftNavItem(props: Props): ReactElement {\r\n  const nav = props.navItem;\r\n  const itemStyles: React.CSSProperties = {\r\n    display: \"block\",\r\n    color: \"white\",\r\n    padding: \"2px 8px\",\r\n    // margin: \"20px 0\",\r\n    textDecoration: \"none\",\r\n  };\r\n\r\n  let title: React.ReactNode = (\r\n    <Box>\r\n      {nav.icon && (\r\n        <Icon fontSize=\"small\" style={{ marginRight: 6 }}>\r\n          {nav.icon}\r\n        </Icon>\r\n      )}\r\n      {nav.title}\r\n    </Box>\r\n  );\r\n\r\n  return (\r\n    <Box ml={props.mx} my={props.my}>\r\n      {nav.to && (\r\n        <RouterLink style={{ ...itemStyles }} to={nav.to}>\r\n          {title}\r\n        </RouterLink>\r\n      )}\r\n      {!nav.to && (\r\n        <Link\r\n          href=\"#\"\r\n          style={{\r\n            ...itemStyles,\r\n          }}\r\n        >\r\n          {title}\r\n        </Link>\r\n      )}\r\n      {props.navItem.children !== undefined && (\r\n        <Box fontSize=\"90%\">\r\n          {props.navItem.children?.map((navItem) => (\r\n            <LeftNavItem\r\n              my={0.5}\r\n              mx={5}\r\n              navItem={navItem}\r\n              key={navItem.title + \"_\" + navItem.to}\r\n            />\r\n          ))}\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import { Box } from \"@material-ui/core\";\r\nimport { Link } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { INavItem } from \"../../../../estreeh-common-library/build/interfaces/INavItem\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\nimport Logo from \"../common/Logo\";\r\nimport LeftNavItem from \"./LeftNavItem\";\r\n\r\ninterface Props {}\r\n\r\nexport default function LeftNav(props: Props): ReactElement {\r\n  const navs: INavItem[] = [\r\n    {\r\n      key: \"dash1\",\r\n      title: \"Dashboard\",\r\n      to: \"/panel/dashboard\",\r\n      icon: \"arrow_forward_ios\",\r\n    },\r\n    {\r\n      key: \"myrequests\",\r\n      title: \"My Requests\",\r\n      to: \"/panel/my-requests\",\r\n      icon: \"arrow_forward_ios\",\r\n    },\r\n\r\n    {\r\n      key: \"myworkers\",\r\n      title: \"My Workers\",\r\n      to: \"/panel/my-workers\",\r\n      icon: \"arrow_forward_ios\",\r\n      children: [\r\n        {\r\n          key: \"mw-manageworkers\",\r\n          title: \"Manage Workers\",\r\n          to: \"/panel/my-workers\",\r\n          // icon: \"arrow_forward_ios\",\r\n        },\r\n        {\r\n          key: \"mw-addnewworker\",\r\n          title: \"Add New Worker\",\r\n          to: \"/panel/my-workers/add\",\r\n          // icon: \"arrow_forward_ios\",\r\n        },\r\n      ],\r\n    },\r\n\r\n    //TODO: New link: QR Code\r\n\r\n    {\r\n      key: \"agencysettings\",\r\n      title: \"Agency Settings\",\r\n      icon: \"arrow_forward_ios\",\r\n      children: [\r\n        {\r\n          key: \"as-settings\",\r\n          title: \"General Settings\",\r\n          to: \"/panel/agency/settings\",\r\n        },\r\n        // {\r\n        //   key: \"as-nationalities\",\r\n        //   title: \"Nationalities\",\r\n        //   to: \"/panel/agency/settings/nationalities\",\r\n        // },\r\n        {\r\n          key: \"as-processes\",\r\n          title: \"Process Templates\",\r\n          to: \"/panel/agency/settings/process-templates\",\r\n        },\r\n        // {\r\n        //   key: \"as-payment\",\r\n        //   title: \"Payment Methods\",\r\n        //   to: \"/panel/agency/settings/payment-methods\",\r\n        // },\r\n\r\n        // {\r\n        //   key: \"as-terms\",\r\n        //   title: \"Terms & Conditions\",\r\n        //   to: \"/panel/agency/settings/terms\",\r\n        // },\r\n        {\r\n          key: \"as-qr\",\r\n          title: \"QR Code\",\r\n        },\r\n        // {\r\n        //   title: \"Workflow\",\r\n        // },\r\n      ],\r\n    },\r\n    // {\r\n    //   title: \"Archive\",\r\n    //   to: \"/panel/archive\",\r\n    //   icon: \"arrow_forward_ios\",\r\n    // },\r\n    // {\r\n    //   key: \"logout\",\r\n    //   title: \"Logout\",\r\n    //   to: \"/login\",\r\n    //   icon: \"logout\",\r\n    // },\r\n  ];\r\n\r\n  return (\r\n    <Box position=\"fixed\" width=\"16.6666667%\" height=\"100%\">\r\n      <Box bgcolor={Branding.primary} color=\"white\" height=\"100%\">\r\n        <Box p={2} bgcolor={Branding.lighter} textAlign=\"left\">\r\n          <Link to=\"/panel\" style={{ display: \"inline-block\" }}>\r\n            <Logo />\r\n          </Link>\r\n        </Box>\r\n\r\n        <Box px={0} py={4}>\r\n          {navs.map((nav) => (\r\n            <LeftNavItem\r\n              my={2}\r\n              mx={1}\r\n              navItem={nav}\r\n              key={nav.title + \"_\" + nav.to}\r\n            />\r\n          ))}\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Avatar, Box, Button, Grid } from \"@material-ui/core\";\r\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\r\nimport { navigate } from \"@reach/router\";\r\nimport axios from \"axios\";\r\nimport Color from \"color\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IUser } from \"../../../../estreeh-common-library/build/interfaces/IUser\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\ninterface Props {\r\n  setUser: React.Dispatch<React.SetStateAction<IUser | undefined>>;\r\n  user: IUser;\r\n}\r\n\r\nexport default function TopNav(props: Props): ReactElement {\r\n  const bg = Color(Branding.lightBg).alpha(0.8).string();\r\n  const gridItemStyle: CSSProperties = {\r\n    lineHeight: \"40px\",\r\n  };\r\n  const logoutClick = () => {\r\n    axios\r\n      .get(process.env.REACT_APP_API_ROOT + \"/auth/logout\", {\r\n        withCredentials: true,\r\n      })\r\n      .then((response) => {\r\n        props.setUser(undefined);\r\n        navigate(\"/login\");\r\n      });\r\n  };\r\n  return (\r\n    <Box position=\"fixed\" top={0} right={0} left=\"16.66667%\" zIndex={1000}>\r\n      <Box p={2} bgcolor={bg}>\r\n        <Grid container spacing={3} direction=\"row-reverse\">\r\n          <Grid item>\r\n            <Box>\r\n              <Grid container spacing={1}>\r\n                <Grid item style={gridItemStyle}>\r\n                  Welcome {props.user.fullName}\r\n                </Grid>\r\n                <Grid item style={gridItemStyle}>\r\n                  <Button color=\"primary\" onClick={logoutClick}>\r\n                    Logout\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Avatar />\r\n                </Grid>\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Grid } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IUser } from \"../../../../estreeh-common-library/build/interfaces/IUser\";\r\nimport LeftNav from \"../navigation/LeftNav\";\r\nimport TopNav from \"../navigation/TopNav\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  user: IUser;\r\n  setUser: React.Dispatch<React.SetStateAction<IUser | undefined>>;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function AdminPanelLayout(props: Props): ReactElement {\r\n  return (\r\n    <Box height=\"100%\">\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        style={{\r\n          height: \"100%\",\r\n        }}\r\n      >\r\n        <Grid item xs={12}>\r\n          <Grid\r\n            container\r\n            alignItems=\"stretch\"\r\n            style={{\r\n              height: \"100%\",\r\n            }}\r\n          >\r\n            <Grid item md={2} xs={2}>\r\n              <LeftNav />\r\n            </Grid>\r\n            <Grid item md={10} xs={10}>\r\n              <TopNav user={props.user} setUser={props.setUser} />\r\n              <Box px={2} pb={2} pt={12}>\r\n                {props.children}\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","import { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function EmptySection(props: Props): ReactElement {\r\n  return <>{props.children}</>;\r\n}\r\n","import { Box, Container, Grid, Typography, useTheme } from \"@material-ui/core\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport Logo from \"../common/Logo\";\r\nimport Branding from \"../../config/Branding\";\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function LoginLayout(props: Props): ReactElement {\r\n  const white = \"#fff\";\r\n  const theme = useTheme();\r\n  const isMd = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n  const gradientDir = isMd ? \"right\" : \"bottom\"\r\n  return (\r\n    <Grid container>\r\n      <Grid item md={5} xs={12}>\r\n        <Box\r\n          px={4}\r\n          bgcolor={Branding.lightest}\r\n          style={{\r\n            backgroundImage: `linear-gradient(to ${gradientDir}, ${Branding.lightest} 75%, ${white})`,\r\n          }}\r\n          height={isMd ? \"100vh\" : undefined}\r\n        >\r\n          <Box py={isMd ? 6 : 3} style={{ textShadow: \"0 0 8px #ffffff\" }}>\r\n            <Logo\r\n              styles={{\r\n                maxHeight: isMd ? 120 : 50,\r\n                marginBottom: 8 * 3,\r\n              }}\r\n            />\r\n            <Typography variant={isMd ? \"h4\" : \"h5\"}>Estreeh Management Portal</Typography>\r\n            <Typography>\r\n              Please login to access your management portal.\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Grid>\r\n      <Grid item md={7} xs={12}>\r\n        <Container>\r\n          {isMd && (\r\n            <Box py={4}>\r\n              <Logo\r\n                styles={{\r\n                  maxHeight: 50,\r\n                  margin: \"0 auto\",\r\n                }}\r\n              />\r\n            </Box>\r\n          )}\r\n          <Box>{props.children}</Box>\r\n        </Container>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { ReactElement } from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { Box, Container, Link, Typography } from \"@material-ui/core\";\r\nimport Branding from \"../../config/Branding\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  title: string;\r\n  subtitle?: string;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function ErrorPage(props: Props): ReactElement {\r\n  // navigate(\"/panel/myrequests\");\r\n  return (\r\n    <Container>\r\n      <Box m={5} p={3} boxShadow={Branding.shadow.niceShadow}>\r\n        <Typography variant=\"h1\">{props.title}</Typography>\r\n        <Typography variant=\"h5\">{props.subtitle}</Typography>\r\n\r\n        <Box py={2}>\r\n          <Box mb={1}>{props.children}</Box>\r\n          <Box>\r\n            <Typography>\r\n              <Link href=\"/\">Back to homepage.</Link>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { ReactElement } from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport ErrorPage from \"./ErrorPage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function NotFoundPage(props: Props): ReactElement {\r\n  return (\r\n    <ErrorPage title=\"404\" subtitle=\"🤨 Page not found\">\r\n      <Typography>\r\n        Sorry but the page you're looking for cannot be found. Please double\r\n        check the link you have entered.\r\n      </Typography>\r\n    </ErrorPage>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Grid,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { Link, RouteComponentProps, navigate } from \"@reach/router\";\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport React, { ReactElement, useState } from \"react\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport { IUser } from \"../../../../estreeh-common-library/build/interfaces/IUser\";\r\nimport Branding from \"../../config/Branding\";\r\nimport { IApiLoginBody } from \"../../../../estreeh-common-library/build/interfaces/IApiLoginBody\";\r\nimport { UserRole } from \"../../../../estreeh-common-library/build/types/UserRole\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  setUser: React.Dispatch<React.SetStateAction<IUser | undefined>>;\r\n  getUser: () => Promise<AxiosResponse<IResponse<IUser | undefined>>>;\r\n}\r\n\r\nexport default function LoginPage(props: Props): ReactElement {\r\n  const [loggingIn, setLoggingIn] = useState(false);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  const allowedRoles: UserRole[] = [\"Agency\", \"Agency Manager\"];\r\n\r\n  const loginFail = (reason?: string) => {\r\n    setLoggingIn(false);\r\n    if (reason !== undefined) console.log(\"Login error:\", reason);\r\n  };\r\n  const onClick = () => {\r\n    setLoggingIn(true);\r\n    const postBody: IApiLoginBody = {\r\n      email,\r\n      password,\r\n    };\r\n    axios\r\n      .post<IResponse<IUser | undefined>>(\r\n        process.env.REACT_APP_API_ROOT + \"/auth/login\",\r\n        postBody,\r\n        { withCredentials: true }\r\n      )\r\n      .then((result) => {\r\n        const user = result.data.data;\r\n        if (\r\n          user !== undefined &&\r\n          user.agencyId !== undefined &&\r\n          allowedRoles.includes(user.role)\r\n        ) {\r\n          props\r\n            .getUser()\r\n            .then((result) => {\r\n              props.setUser(result.data.data);\r\n              navigate(\"/\");\r\n            })\r\n            .finally(() => {\r\n              loginFail();\r\n            });\r\n        } else {\r\n          loginFail(\"User is not authorized to use this platform.\");\r\n        }\r\n      })\r\n      .catch((reason) => {\r\n        loginFail(reason);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box\r\n        p={3}\r\n        maxWidth={440}\r\n        marginLeft=\"auto\"\r\n        marginRight=\"auto\"\r\n        my={5}\r\n        boxShadow={Branding.shadow.niceShadow}\r\n        borderRadius={Branding.borderRadius.niceRadius}\r\n      >\r\n        <form>\r\n          <TextField\r\n            id=\"username\"\r\n            label=\"Email\"\r\n            variant=\"outlined\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <TextField\r\n            id=\"username\"\r\n            label=\"Password\"\r\n            variant=\"outlined\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <Box py={0}>\r\n            <Grid container spacing={1}>\r\n              <Grid item xs={6}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox name=\"checkedB\" color=\"primary\" size=\"small\" />\r\n                  }\r\n                  label=\"Keep me Logged In\"\r\n                />\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Box textAlign=\"right\">\r\n                  <Link to=\"reset-password\">\r\n                    <Box lineHeight=\"38px\">Forgot password?</Box>\r\n                  </Link>\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n          <Box py={3} textAlign=\"center\">\r\n            <Button\r\n              disabled={loggingIn}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={onClick}\r\n            >\r\n              Login\r\n            </Button>\r\n          </Box>\r\n        </form>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  Avatar,\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Grid,\r\n  GridSize,\r\n  Icon,\r\n  InputAdornment,\r\n  InputLabelProps,\r\n  MenuItem,\r\n  Switch,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { FieldInputProps, FormikProps } from \"formik\";\r\nimport React, { ReactElement, useMemo } from \"react\";\r\nimport { IBackendField } from \"../../../../estreeh-common-library/build/interfaces/IBackendField\";\r\nimport { IBackendFieldSelectOption } from \"../../../../estreeh-common-library/build/interfaces/IBackendFieldSelectOption\";\r\n\r\ninterface Props {\r\n  field: IBackendField;\r\n  defaultXs?: GridSize;\r\n  defaultMd?: GridSize;\r\n  size?: \"medium\" | \"small\";\r\n  formik?: FormikProps<any>;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport default function BackendField(props: Props): ReactElement {\r\n  const name = props.field.name.toString();\r\n  const label = useMemo(\r\n    () =>\r\n      props.field.label !== undefined\r\n        ? props.field.label\r\n        : CamelToSentence(name),\r\n    [props.field.label, name]\r\n  );\r\n\r\n  const id = \"field_\" + name;\r\n  const type = props.field.type !== undefined ? props.field.type : \"text\";\r\n  const variant =\r\n    props.field.variant !== undefined ? props.field.variant : \"text\";\r\n\r\n  const xsDefault = props.defaultXs !== undefined ? props.defaultXs : 12;\r\n  const mdDefault = props.defaultMd !== undefined ? props.defaultMd : 4;\r\n  const xs = props.field.xs !== undefined ? props.field.xs : xsDefault;\r\n  const md = props.field.md !== undefined ? props.field.md : mdDefault;\r\n\r\n  const size = props.size !== undefined ? props.size : \"medium\";\r\n\r\n  const labelProps: Partial<InputLabelProps> = useMemo(\r\n    () => ({\r\n      shrink: true,\r\n    }),\r\n    []\r\n  );\r\n\r\n  const fieldVariant = props.field.readOnly ? \"outlined\" : \"outlined\";\r\n\r\n  const rowsDefault = props.field.variant === \"textarea\" ? 3 : undefined;\r\n  const rows =\r\n    props.field.textareaLines !== undefined\r\n      ? props.field.textareaLines\r\n      : rowsDefault;\r\n\r\n  const numberMinimum =\r\n    props.field.numberMinimum !== undefined ? props.field.numberMinimum : 0;\r\n\r\n  const onChange = useMemo(\r\n    () => (props.field.onChange ? props.field.onChange : () => {}),\r\n    [props.field.onChange]\r\n  );\r\n\r\n  const prefixAdornment: React.ReactNode = useMemo(\r\n    () =>\r\n      props.field.prefix !== undefined ? (\r\n        <InputAdornment position=\"start\">{props.field.prefix}</InputAdornment>\r\n      ) : undefined,\r\n    [props.field.prefix]\r\n  );\r\n  const suffixAdornment: React.ReactNode = useMemo(\r\n    () =>\r\n      props.field.suffix !== undefined ? (\r\n        <InputAdornment position=\"end\">{props.field.suffix}</InputAdornment>\r\n      ) : undefined,\r\n    [props.field.suffix]\r\n  );\r\n\r\n  const fieldProps: Partial<FieldInputProps<any>> = useMemo(\r\n    () =>\r\n      props.formik !== undefined\r\n        ? props.formik.getFieldProps(name)\r\n        : {\r\n            onChange: onChange,\r\n            name: name,\r\n            value: props.field.value,\r\n            checked: props.field.value,\r\n            onBlur: () => {},\r\n          },\r\n    [onChange, name, props.field.value, props.formik]\r\n  );\r\n\r\n  //FIXME: On submit the errors dont show for fields that have long names (more than 1 word)\r\n\r\n  const error =\r\n    props.formik !== undefined &&\r\n    props.formik.touched[name] &&\r\n    props.formik.errors[name] !== undefined;\r\n\r\n  const helperText =\r\n    props.formik !== undefined &&\r\n    props.formik.touched[name] &&\r\n    props.formik.errors[name];\r\n\r\n  const selectOptions: IBackendFieldSelectOption[] | undefined = useMemo(\r\n    () =>\r\n      props.field.variant === \"select\"\r\n        ? props.field.selectOptions.length > 0\r\n          ? props.field.selectOptions\r\n          : [\r\n              // {\r\n              //   value: \"loading\",\r\n              //   title: \"Loading\",\r\n              // },\r\n            ]\r\n        : undefined,\r\n    [props.field]\r\n  );\r\n\r\n  const menuRender = useMemo(\r\n    () =>\r\n      selectOptions !== undefined &&\r\n      selectOptions.map((option) => {\r\n        const title =\r\n          option.title !== undefined\r\n            ? option.title\r\n            : CamelToSentence(option.value);\r\n        return (\r\n          <MenuItem key={\"opt_\" + option.value} value={option.value}>\r\n            {title}\r\n          </MenuItem>\r\n        );\r\n      }),\r\n    [selectOptions]\r\n  );\r\n  // const checkboxOnChange = () => {\r\n  //   setChecked(!checked);\r\n  //   if (props.field.onChange !== undefined) {\r\n  //     // props.field.onChange();\r\n  //     // setChecked(props.field.value)\r\n  //   } else {\r\n  //   }\r\n  // };\r\n\r\n  // const selectOnChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n  //   setSelectValue(event.target.value);\r\n  // };\r\n\r\n  const checkboxControl = useMemo(\r\n    () =>\r\n      variant === \"switch\" ? (\r\n        <Switch\r\n          // checked={props.field.value}\r\n          color=\"primary\"\r\n          // defaultValue={props.field.defaultValue}\r\n          {...fieldProps}\r\n        />\r\n      ) : (\r\n        <Checkbox\r\n          // checked={props.field.value}\r\n          color=\"primary\"\r\n          // defaultValue={props.field.defaultValue}\r\n          {...fieldProps}\r\n        />\r\n      ),\r\n    [fieldProps, variant]\r\n  );\r\n\r\n  const fieldRender = useMemo(\r\n    () => (\r\n      <>\r\n        {((variant !== \"file\" &&\r\n          variant !== \"switch\" &&\r\n          variant !== \"checkbox\" &&\r\n          props.field.variant !== \"select\") ||\r\n          (props.field.variant === \"select\" &&\r\n            selectOptions !== undefined &&\r\n            selectOptions?.length > 0)) && (\r\n          <TextField\r\n            id={id}\r\n            color=\"primary\"\r\n            variant={fieldVariant}\r\n            type={props.field.type}\r\n            label={label + (props.formik === undefined ? \" [UNBOUND]\" : \"\")}\r\n            size={size}\r\n            select={variant === \"select\"}\r\n            multiline={variant === \"textarea\"}\r\n            rows={rows}\r\n            InputLabelProps={type === \"date\" ? labelProps : undefined}\r\n            // defaultValue={props.field.defaultValue}\r\n            disabled={props.field.disabled || props.disabled}\r\n            inputProps={{\r\n              min: numberMinimum,\r\n              step: props.field.step,\r\n            }}\r\n            InputProps={{\r\n              startAdornment: prefixAdornment,\r\n              endAdornment: suffixAdornment,\r\n              readOnly: props.field.readOnly,\r\n              classes: props.field.readOnly\r\n                ? {\r\n                    notchedOutline: \"notched-outline-no-border\",\r\n                  }\r\n                : undefined,\r\n            }}\r\n            error={error}\r\n            helperText={helperText}\r\n            {...fieldProps}\r\n          >\r\n            {menuRender}\r\n          </TextField>\r\n        )}\r\n\r\n        {(variant === \"switch\" || variant === \"checkbox\") && (\r\n          <FormControlLabel\r\n            control={checkboxControl}\r\n            label={label}\r\n            {...fieldProps}\r\n          />\r\n        )}\r\n        {variant === \"file\" && (\r\n          <Button variant=\"contained\" component=\"label\">\r\n            {props.field.buttonIcon !== undefined && (\r\n              <Icon style={{ marginRight: 8 }}>{props.field.buttonIcon}</Icon>\r\n            )}\r\n            {label}\r\n            <input\r\n              type=\"file\"\r\n              id={id}\r\n              name={name}\r\n              hidden\r\n              onChange={(e) => {\r\n                if (e.currentTarget.files !== null) {\r\n                  const file = e.currentTarget.files[0];\r\n                  if (props.formik !== undefined) {\r\n                    console.log(file);\r\n                    props.formik.setFieldValue(name, file);\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n          </Button>\r\n        )}\r\n        {variant === \"file\" && false && (\r\n          <>\r\n            <label htmlFor={id}>\r\n              <Box mb={1}>\r\n                <Typography color=\"textSecondary\">{label}</Typography>\r\n              </Box>\r\n              <Avatar\r\n                variant=\"rounded\"\r\n                style={{\r\n                  width: props.field.avatarWidth,\r\n                  height: props.field.avatarWidth,\r\n                }}\r\n              />\r\n            </label>\r\n            <input\r\n              accept=\"image/*\"\r\n              style={{ display: \"none\" }}\r\n              id={id}\r\n              type=\"file\"\r\n              {...fieldProps}\r\n            />\r\n          </>\r\n        )}\r\n      </>\r\n    ),\r\n    [\r\n      checkboxControl,\r\n      error,\r\n      fieldProps,\r\n      fieldVariant,\r\n      helperText,\r\n      id,\r\n      label,\r\n      labelProps,\r\n      menuRender,\r\n      name,\r\n      numberMinimum,\r\n      prefixAdornment,\r\n      props.disabled,\r\n      props.field.avatarWidth,\r\n      props.field.buttonIcon,\r\n      props.field.disabled,\r\n      props.field.readOnly,\r\n      props.field.step,\r\n      props.field.type,\r\n      props.field.variant,\r\n      props.formik,\r\n      rows,\r\n      selectOptions,\r\n      size,\r\n      suffixAdornment,\r\n      type,\r\n      variant,\r\n    ]\r\n  );\r\n  return (\r\n    <Grid item xs={xs} md={md}>\r\n      {fieldRender}\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport function CamelToSentence(text: string | number) {\r\n  if (text !== undefined) {\r\n    const parsed: string = typeof text === \"string\" ? text : text.toString();\r\n    var result = parsed.replace(/([A-Z])/g, \" $1\");\r\n    return result.charAt(0).toUpperCase() + result.slice(1);\r\n  }\r\n  throw new Error(\"Text is undefined\");\r\n}\r\n","import { Box, Typography } from \"@material-ui/core\";\r\nimport React, { ReactElement } from \"react\";\r\nimport {HeaderVariant} from \"../../../../estreeh-common-library/build/types/HeaderVariant\";\r\n\r\ninterface Props {\r\n  header?: string;\r\n  variant?: HeaderVariant;\r\n}\r\n\r\nexport default function FieldSetHeader(props: Props): ReactElement {\r\n  const variant = props.variant !== undefined ? props.variant : \"normal\";\r\n  const small = variant === \"small\";\r\n  const normal = variant === \"normal\";\r\n\r\n  return (\r\n    <>\r\n      {props.header && (\r\n        <Box py={small ? 1 : 2}>\r\n          <Typography variant={normal ? \"h6\" : undefined}>\r\n            {props.header}\r\n          </Typography>\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { Box, Grid, GridSize, Typography } from \"@material-ui/core\";\r\nimport { FormikProps } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { HeaderVariant } from \"../../../../estreeh-common-library/build/types/HeaderVariant\";\r\nimport { IBackendField } from \"../../../../estreeh-common-library/build/interfaces/IBackendField\";\r\nimport BackendField from \"./BackendField\";\r\nimport FieldSetHeader from \"./FieldSetHeader\";\r\n\r\ninterface Props {\r\n  header?: string;\r\n  headerVariant?: HeaderVariant;\r\n  fields?: IBackendField[];\r\n  children?: React.ReactNode;\r\n  md?: GridSize;\r\n  xs?: GridSize;\r\n  formik?: FormikProps<any>;\r\n  disabled?: boolean;\r\n  helpText?: React.ReactNode;\r\n}\r\n\r\nexport default function BackendFieldSet(props: Props): ReactElement {\r\n  return (\r\n    <Box>\r\n      <FieldSetHeader header={props.header} variant={props.headerVariant} />\r\n      <Box mb={2}>\r\n        <Typography color=\"primary\">\r\n          {props.helpText}\r\n        </Typography>\r\n      </Box>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        {props.fields !== undefined &&\r\n          props.fields.map((field) => (\r\n            <BackendField\r\n              formik={props.formik}\r\n              field={field}\r\n              key={field.name.toString()}\r\n              defaultMd={props.md}\r\n              defaultXs={props.xs}\r\n              size=\"small\"\r\n              disabled={props.disabled}\r\n            />\r\n          ))}\r\n        {props.children !== undefined && (\r\n          <Grid item xs={props.xs} md={props.md}>\r\n            {props.children}\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","import Faker from \"faker\";\r\n\r\nexport const nationalitiesRentalForDemo = [\"Philippines\"];\r\n\r\nexport const religions = [\"Christian\", \"Hindu\", \"Muslim\"];\r\n\r\nexport const jobTitles = [\"House Maid\", \"Nanny\", \"Driver\", \"Chef\", \"Farmer\"];\r\nexport const jobTitlesRentalForDemo = [\"House Maid\", \"Nanny\"];\r\n\r\nexport const languageSkills = [\"Arabic\", \"English\"];\r\n\r\nexport const educationLevels = [\r\n  \"Elementary School\",\r\n  \"Intermediary School\",\r\n  \"High School\",\r\n  \"College\",\r\n];\r\n\r\nexport const otherSkills = [\r\n  \"Cooking\",\r\n  \"Washing\",\r\n  \"Cleaning\",\r\n  \"Babysitting\",\r\n  \"Care of Elder\",\r\n];\r\nexport const maritalStatus = [\"Single\", \"Married\"];\r\n\r\nexport const complexions = [\"White\", \"Fair\", \"Brown\", \"Black\", \"N/A\"];\r\n\r\nexport const minSalary = 80;\r\nexport const maxSalary = 400;\r\nexport const minProcessingFees = 600;\r\nexport const maxProcessingFees = 1800;\r\nexport const minExperience = 0;\r\nexport const maxExperience = 15;\r\nexport const minAge = 18;\r\nexport const maxAge = 65;\r\nexport const minWeight = 55;\r\nexport const maxWeight = 125;\r\n\r\n\r\nexport const localTransferExplanation =\r\n  \"This worker is already in Bahrain and will be Transferred from another sponsor.\";\r\n\r\nexport const rentalServicesDetailed = [\r\n  {\r\n    fullTitle: \"Lease hourly\",\r\n    title: \"By Hour\",\r\n    // remarks: Faker.random.arrayElement(demoRentalHourlyRemarks),\r\n    isRentalHourly: true,\r\n    feesBhdUnit: \"Hour\",\r\n    feesBhd: 2,\r\n  },\r\n  // {\r\n  //   title: \"Lease hourly scheduled\",\r\n  //   isRentalHourly: true,\r\n  //   // feesBhd: 4,\r\n  // },\r\n  {\r\n    fullTitle: \"Lease monthly\",\r\n    title: \"Full Month\",\r\n    // remarks: Faker.random.arrayElement(demoRentalMonthlyRemarks),\r\n    isRentalMonthly: true,\r\n    feesBhd: Faker.random.number({ min: 15, max: 35 }) * 10,\r\n    feesBhdUnit: \"Month\",\r\n  },\r\n  // {\r\n  //   fullTitle: \"Lease monthly with Stay Over\",\r\n  //   title: \"Full Month w/Stay\",\r\n  //   remarks: Faker.random.arrayElement(demoRentalMonthlyStayOverRemarks),\r\n  //   isRentalMonthlyStayOver: true,\r\n  //   feesBhd: Faker.random.number({ min: 15, max: 35 }) * 10,\r\n  //   feesBhdUnit: \"Month\",\r\n  // },\r\n];\r\n\r\nexport const rentalServices = rentalServicesDetailed.map((x) => x.fullTitle);\r\n","import { FormikErrors } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\n\r\ninterface Error {\r\n  key: string;\r\n  value:\r\n    | string\r\n    | FormikErrors<any>\r\n    | string[]\r\n    | FormikErrors<any>[]\r\n    | undefined;\r\n}\r\n\r\ninterface Props {\r\n  errors: FormikErrors<any>;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nexport default function FormErrors(props: Props): ReactElement {\r\n  const hasErrors = Object.keys(props.errors).length > 0;\r\n  let errors: Error[] = [];\r\n  if (hasErrors) {\r\n    for (const e in props.errors) {\r\n      errors.push({ key: e, value: props.errors[e] });\r\n    }\r\n  }\r\n  return (\r\n    <ul\r\n      style={{\r\n        margin: 0,\r\n        padding: 0,\r\n      }}\r\n    >\r\n      {errors.map((error) => (\r\n        <li\r\n          style={{\r\n            listStylePosition:\"inside\",\r\n            color: \"red\",\r\n            fontSize: 11,\r\n            ...props.style,\r\n          }}\r\n        >\r\n         <strong>{error.key}</strong> {error.value}\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","import { Box, Button, Divider } from \"@material-ui/core\";\r\nimport { NavigateFn } from \"@reach/router\";\r\nimport { FormikErrors } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport FormErrors from \"./FormErrors\";\r\n\r\ninterface Props {\r\n  title: string;\r\n  navigate?: NavigateFn;\r\n  navigateUrl?: string;\r\n  type?: \"button\" | \"submit\" | \"reset\";\r\n  disabled?: boolean;\r\n  errors?: FormikErrors<any>;\r\n}\r\n\r\nexport default function SubmitButton(props: Props): ReactElement {\r\n  const navigateUrl =\r\n    props.navigateUrl !== undefined ? props.navigateUrl : \"success\";\r\n  return (\r\n    <Box>\r\n      <Box my={3}>\r\n        <Divider />\r\n      </Box>\r\n      <Box\r\n        my={3}\r\n        textAlign=\"right\"\r\n        maxWidth={160}\r\n        marginLeft=\"auto\"\r\n        // marginRight=\"auto\"\r\n      >\r\n        {props.errors !== undefined && (\r\n          <Box my={3}>\r\n            <FormErrors errors={props.errors} />\r\n          </Box>\r\n        )}\r\n        <Button\r\n          fullWidth={true}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          type={props.type}\r\n          onClick={() => {\r\n            if (props.navigate) {\r\n              props.navigate(navigateUrl);\r\n            }\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          {props.title}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","\r\nexport const nationalities = [\r\n  \"Philippines\",\r\n  \"Indonesia\",\r\n  \"India\",\r\n  \"Sri Lanka\",\r\n  \"Ethiopia\",\r\n  \"Kenya\",\r\n  \"Ghana\",\r\n];\r\n","import { FormikProps } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport BackendFieldSet from \"../forms/BackendFieldSet\";\r\nimport { jobTitles } from \"../../config/FilterOptions\";\r\nimport { IBackendField } from \"../../../../estreeh-common-library/src/interfaces/IBackendField\";\r\nimport IWorkerTwoYear from \"../../../../estreeh-common-library/src/interfaces/IWorkerTwoYear\";\r\nimport {\r\n  Avatar,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport SubmitButton from \"../forms/SubmitButton\";\r\nimport { IBackendFieldSelectOption } from \"../../../../estreeh-common-library/src/interfaces/IBackendFieldSelectOption\";\r\nimport { nationalities } from \"../../config/Nationalities\";\r\nimport { S3Folder } from \"../../../../estreeh-common-library/src/types/S3Folder\";\r\n\r\ninterface Props {\r\n  formik: FormikProps<any>;\r\n  id?: string;\r\n  disabled: boolean;\r\n  worker: Partial<IWorkerTwoYear>;\r\n  templateFields: IBackendField[];\r\n}\r\n\r\nexport default function AddEditWorkerForm({\r\n  formik,\r\n  disabled,\r\n  id,\r\n  worker,\r\n  templateFields,\r\n}: Props): ReactElement {\r\n\r\n  const folderSm:S3Folder = \"2y/sm\";\r\n  const folderLg:S3Folder = \"2y/lg\";\r\n\r\n  const smallPicture = process.env.REACT_APP_IMAGES_ROOT + \"/\" + folderSm + \"/\" + worker._id + \".\" + worker.smallPictureFileExt;\r\n  const bigPicture = process.env.REACT_APP_IMAGES_ROOT + \"/\" + folderLg + \"/\" + worker._id + \".\" + worker.bigPictureFileExt;\r\n\r\n  const mainFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"name\",\r\n    },\r\n    {\r\n      name: \"referenceId\",\r\n    },\r\n\r\n    {\r\n      name: \"jobTitle\",\r\n      variant: \"select\",\r\n      selectOptions: jobTitles.map((t) => ({\r\n        value: t,\r\n      })),\r\n    },\r\n    {\r\n      name: \"monthlySalary\",\r\n    },\r\n    {\r\n      name: \"contractPeriod\",\r\n    },\r\n    {\r\n      name: \"phone\",\r\n    },\r\n    // {\r\n    //   name:\"hide\",\r\n    //   label:\"Hide this worker\",\r\n    //   variant:\"checkbox\"\r\n    // }\r\n    {\r\n      name: \"isLocalTransfer\",\r\n      variant: \"checkbox\",\r\n    },\r\n  ];\r\n\r\n  const localTransferFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"localTransferReason\",\r\n      variant: \"textarea\",\r\n    },\r\n  ];\r\n\r\n  const fileFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"uploadSmallPicture\",\r\n      variant: \"file\",\r\n      avatarWidth: 80,\r\n      buttonIcon: \"photo_camera\",\r\n    },\r\n    {\r\n      name: \"uploadBigPicture\",\r\n      variant: \"file\",\r\n      avatarWidth: 200,\r\n      buttonIcon: \"photo_camera\",\r\n    },\r\n  ];\r\n\r\n  const agencyOnlyFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"agencyRemarks\",\r\n      variant: \"textarea\",\r\n    },\r\n  ];\r\n\r\n  const personalFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"nationality\",\r\n      variant: \"select\",\r\n      selectOptions: nationalities.map((n) => ({\r\n        value: n,\r\n      })),\r\n    },\r\n    {\r\n      name: \"experienceYears\",\r\n      type: \"number\",\r\n    },\r\n\r\n    {\r\n      name: \"educationalLevel\",\r\n    },\r\n    {\r\n      name: \"dateOfBirth\",\r\n      type: \"date\",\r\n    },\r\n    {\r\n      name: \"maritalStatus\",\r\n      variant: \"select\",\r\n      selectOptions: [{ value: \"Single\" }, { value: \"Married\" }],\r\n    },\r\n    {\r\n      name: \"age\",\r\n      type: \"number\",\r\n    },\r\n    {\r\n      name: \"weightKg\",\r\n    },\r\n    {\r\n      name: \"complexion\",\r\n    },\r\n    {\r\n      name: \"religion\",\r\n    },\r\n\r\n    // {\r\n    //   name: \"livingTown\",\r\n    // },\r\n    {\r\n      name: \"numberOfChildren\",\r\n      type: \"number\",\r\n    },\r\n    {\r\n      name: \"heightCm\",\r\n    },\r\n\r\n    {\r\n      name: \"remarks\",\r\n      variant: \"textarea\",\r\n      md: 9,\r\n    },\r\n  ];\r\n\r\n  const languageOptions: IBackendFieldSelectOption[] = [\r\n    {\r\n      value: \"Poor\",\r\n    },\r\n    {\r\n      value: \"Fair\",\r\n    },\r\n    {\r\n      value: \"Fluent\",\r\n    },\r\n  ];\r\n\r\n  const languageFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"languageSkillEnglish\",\r\n      variant: \"select\",\r\n      selectOptions: languageOptions,\r\n    },\r\n    {\r\n      name: \"languageSkillArabic\",\r\n      variant: \"select\",\r\n      selectOptions: languageOptions,\r\n    },\r\n  ];\r\n\r\n  const skills = [\r\n    \"Baby Sitting\",\r\n    \"Cooking\",\r\n    \"Nursing\",\r\n    \"Elder Caring\",\r\n    \"Washing\",\r\n    \"Ironing\",\r\n  ];\r\n\r\n  function picHelpClick() {\r\n    alert(\r\n      \"To change picture please use the Upload Picture buttons near the end of this page.\"\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={formik.handleSubmit}>\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Avatar\r\n            src={smallPicture}\r\n            variant=\"rounded\"\r\n            style={{\r\n              width: 90,\r\n              height: 90,\r\n              cursor: \"help\",\r\n            }}\r\n            onClick={picHelpClick}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={9}>\r\n          <PageTitle\r\n            title={\r\n              id === undefined\r\n                ? \"Add a New Worker\"\r\n                : \"Edit Worker: \" + worker.name\r\n            }\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <BackendFieldSet\r\n        fields={mainFields}\r\n        header=\"Main Information\"\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={localTransferFields}\r\n        md={7}\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={templateFields}\r\n        header=\"Process Template\"\r\n        // formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={personalFields}\r\n        header=\"Personal Details\"\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        fields={languageFields}\r\n        header=\"Language Skills\"\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <BackendFieldSet\r\n        header=\"Skills\"\r\n        xs={12}\r\n        formik={formik}\r\n        disabled={disabled}\r\n      >\r\n        <FormGroup row>\r\n          {skills.map((skill) => (\r\n            <FormControlLabel\r\n              control={<Checkbox name={\"skill_\" + skill} color=\"primary\" />}\r\n              label={skill}\r\n              key={skill}\r\n            />\r\n          ))}\r\n        </FormGroup>\r\n      </BackendFieldSet>\r\n      <BackendFieldSet header=\"Pictures\" xs={12}>\r\n        <Grid container>\r\n          <Grid item xs={4}>\r\n            <Avatar\r\n              src={smallPicture}\r\n              variant=\"rounded\"\r\n              style={{\r\n                width: 160,\r\n                height: 160,\r\n                cursor: \"help\",\r\n              }}\r\n              onClick={picHelpClick}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <Avatar\r\n              src={bigPicture}\r\n              variant=\"rounded\"\r\n              style={{\r\n                width: 240,\r\n                height: 320,\r\n                cursor: \"help\",\r\n              }}\r\n              onClick={picHelpClick}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </BackendFieldSet>\r\n      <BackendFieldSet\r\n        fields={fileFields}\r\n        formik={formik}\r\n        disabled={disabled}\r\n        // header=\"Picture Uploads\"\r\n        // helpText=\"Use the below buttons to change the current pictures.\"\r\n      />\r\n      <BackendFieldSet\r\n        fields={agencyOnlyFields}\r\n        header=\"Agency Only Information (Hidden)\"\r\n        md={7}\r\n        formik={formik}\r\n        disabled={disabled}\r\n      />\r\n      <SubmitButton\r\n        title={id === undefined ? \"Create Worker\" : \"Save Changes\"}\r\n        errors={formik.errors}\r\n        type=\"submit\"\r\n        disabled={disabled || formik.isSubmitting}\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","import { Box, Typography } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement, useEffect, useState } from \"react\";\r\nimport { IBackendField } from \"../../../../estreeh-common-library/build/interfaces/IBackendField\";\r\nimport { Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport IWorkerTwoYear from \"../../../../estreeh-common-library/build/interfaces/IWorkerTwoYear\";\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport { IProcessTemplate } from \"../../../../estreeh-common-library/build/interfaces/IProcessTemplate\";\r\nimport { toast } from \"react-toastify\";\r\nimport AddEditWorkerForm from \"./AddEditWorkerForm\";\r\nimport { S3Folder } from \"../../../../estreeh-common-library/src/types/S3Folder\";\r\n\r\ninterface Props extends RouteComponentProps {\r\n  id?: string;\r\n}\r\n\r\ninterface CompletedProps {\r\n  result: AxiosResponse<IResponse>;\r\n  navigateOut: boolean;\r\n  setSubmitting: Function;\r\n}\r\n\r\nexport default function AddEditWorkerPage(props: Props): ReactElement {\r\n  const [loading, setLoading] = useState(true);\r\n  // const [saving, setSaving] = useState(false);\r\n  const [processTemplates, setProcessTemplates] = useState<IProcessTemplate[]>(\r\n    []\r\n  );\r\n  const [processTemplateId, setProcessTemplateId] = useState(\"\");\r\n  const [pendingRequests, setPendingRequests] = useState(100);\r\n  const [formikSubmitting, setFormikSubmitting] = useState<\r\n    ((isSubmitting: boolean) => void) | undefined\r\n  >(undefined);\r\n  const [isNew, setIsNew] = useState(false);\r\n\r\n  const [worker, setWorker] = useState<Partial<IWorkerTwoYear>>({\r\n    addressOriginalCountry: {\r\n      city: \"\",\r\n    },\r\n    // age: 0,\r\n    // agencyId: \"\",\r\n    // created: new Date(),\r\n    // dateOfBirth: new Date(),\r\n    // modified: new Date(),\r\n    // monthlySalary: 0,\r\n    // numberOfChildren: 0,\r\n    // experienceYears: 0,\r\n    // heightCm: 0,\r\n    languageSkillArabic: \"Fair\",\r\n    languageSkillEnglish: \"Fair\",\r\n    agencyRemarks: \"\",\r\n    cityOfBirth: \"\",\r\n    contractPeriod: 2,\r\n    demoLanguageSkillsText: \"\",\r\n    educationalLevel: \"\",\r\n    hidden: true,\r\n    isLocalTransfer: false,\r\n    jobExperiences: [],\r\n    jobTitle: \"\",\r\n    localTransferReason: \"\",\r\n    maritalStatus: \"\",\r\n    name: \"\",\r\n    nationality: \"\",\r\n    otherSkills: [],\r\n    phone: \"\",\r\n    processFees: 0,\r\n    processTemplateId: \"\",\r\n    referenceId: \"\",\r\n    remarks: \"\",\r\n    weightKg: 0,\r\n  });\r\n\r\n  function getTotalProcessFees() {\r\n    const t = processTemplates.find((x) => x._id === processTemplateId);\r\n    if (t === undefined) return 0;\r\n    return t.totalFeesBhd;\r\n  }\r\n\r\n  function getProcessTemplates() {\r\n    axios\r\n      .get<IResponse<IProcessTemplate[]>>(\r\n        process.env.REACT_APP_API_ROOT + \"/be/process-templates\",\r\n        { withCredentials: true }\r\n      )\r\n      .then((result) => {\r\n        setProcessTemplates(result.data.data);\r\n        setLoading(false);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(\"Pending requests\", pendingRequests);\r\n    if (loading) {\r\n      if (props.id !== undefined) {\r\n        axios\r\n          .get<IResponse<IWorkerTwoYear>>(\r\n            process.env.REACT_APP_API_ROOT + \"/be/workers-two-year/\" + props.id,\r\n            { withCredentials: true }\r\n          )\r\n          .then((response) => {\r\n            let worker = response.data.data;\r\n            setWorker(worker);\r\n            setProcessTemplateId(worker.processTemplateId);\r\n            getProcessTemplates();\r\n          });\r\n      } else {\r\n        getProcessTemplates();\r\n      }\r\n    } else {\r\n      if (pendingRequests < 1) {\r\n        if (formikSubmitting !== undefined) formikSubmitting(false);\r\n        // if (props.navigateOut) {\r\n        if (props.navigate !== undefined && (isNew || !isNew))\r\n          props.navigate(\"/panel/my-workers/success\");\r\n        setPendingRequests(100);\r\n        // }\r\n      }\r\n    }\r\n  }, [loading, setLoading, pendingRequests, formikSubmitting, props, isNew]);\r\n\r\n  const templateFields: IBackendField<IWorkerTwoYear>[] = [\r\n    {\r\n      name: \"processTemplateId\",\r\n      variant: \"select\",\r\n      selectOptions: processTemplates.map((p) => ({\r\n        value: p._id ? p._id : \"NOVAL\",\r\n        title: p.title,\r\n      })),\r\n      value: processTemplateId,\r\n      onChange: (e) => {\r\n        setProcessTemplateId(e.target.value);\r\n      },\r\n    },\r\n\r\n    {\r\n      name: \"processFees\",\r\n      readOnly: true,\r\n      // TODO: Maybe optimize this?\r\n      value: getTotalProcessFees(),\r\n    },\r\n  ];\r\n\r\n  const formDisabled = loading;\r\n\r\n  function uploadPicture(props: {\r\n    _id: string;\r\n    file: any;\r\n    folder: S3Folder;\r\n    result: any;\r\n    setSubmitting: (isSubmitting: boolean) => void;\r\n    navigateOut: boolean;\r\n  }) {\r\n    let formData = new FormData();\r\n    formData.append(\"_id\", props._id);\r\n    formData.append(\"folder\", props.folder);\r\n    formData.append(\"file\", props.file);\r\n    return axios.request<IResponse>({\r\n      method: \"PUT\",\r\n      url: process.env.REACT_APP_API_ROOT + \"/be/workers-two-year/picture\",\r\n      data: formData,\r\n      withCredentials: true,\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n    // .then((result) => {\r\n    //   toast.success(result.data.message);\r\n    //   completed(props.result, props.navigateOut, props.setSubmitting);\r\n    // });\r\n  }\r\n\r\n  function completed(props: CompletedProps) {\r\n    const message = props.result.data.message\r\n      ? props.result.data.message\r\n      : \"No Message.\";\r\n    toast.success(message);\r\n    setPendingRequests((previous) => previous - 1);\r\n  }\r\n\r\n  async function saveData(values: any, isNew: boolean) {\r\n    const url = process.env.REACT_APP_API_ROOT + \"/be/workers-two-year\";\r\n    const method = isNew ? \"POST\" : \"PUT\";\r\n    return axios.request<IResponse<IWorkerTwoYear>>({\r\n      url,\r\n      method,\r\n      data: values,\r\n      withCredentials: true,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      {loading && (\r\n        <Typography>\r\n          Loading <strong>Worker Details</strong> and{\" \"}\r\n          <strong>Process Templates...</strong>\r\n        </Typography>\r\n      )}\r\n      {!loading && processTemplates.length < 1 && (\r\n        <Typography>\r\n          Please first add at least 1 Process Template by using the left-side\r\n          navigation.\r\n        </Typography>\r\n      )}\r\n      {!loading && processTemplates.length > 0 && (\r\n        <Formik\r\n          initialValues={worker}\r\n          validationSchema={Yup.object({\r\n            name: Yup.string().required(\"Required\"),\r\n            experienceYears: Yup.number().required(\"Required\"),\r\n            contractPeriod: Yup.number().required(\"Required\"),\r\n            monthlySalary: Yup.number().required(\"Required\"),\r\n            hidden: Yup.bool().required(\"Required\"),\r\n\r\n            // processTemplateId: Yup.string().required(\"Required\"),\r\n          })}\r\n          onSubmit={(formValues, { setSubmitting }) => {\r\n            setSubmitting(true);\r\n            setFormikSubmitting(setSubmitting);\r\n            // setSaving(true);\r\n\r\n            const values: Partial<IWorkerTwoYear> = {\r\n              ...formValues,\r\n              processTemplateId,\r\n            };\r\n\r\n            const isNew = props.id === undefined;\r\n            setIsNew(isNew);\r\n\r\n            let requests = 1;\r\n            if (formValues.uploadSmallPicture !== undefined) requests++;\r\n            if (formValues.uploadBigPicture !== undefined) requests++;\r\n\r\n            setPendingRequests(requests);\r\n\r\n            saveData(values, isNew)\r\n              .then((result) => {\r\n                completed({ result, navigateOut: isNew, setSubmitting });\r\n                const _id = result.data.data._id;\r\n                if (_id !== undefined) {\r\n                  if (formValues.uploadSmallPicture !== undefined) {\r\n                    uploadPicture({\r\n                      _id,\r\n                      file: formValues.uploadSmallPicture,\r\n                      folder: \"2y/sm\",\r\n                      navigateOut: isNew,\r\n                      result,\r\n                      setSubmitting,\r\n                    }).then((resultPic) => {\r\n                      // setSubmitting(false);\r\n                      completed({\r\n                        result: resultPic,\r\n                        navigateOut: isNew,\r\n                        setSubmitting,\r\n                      });\r\n                    });\r\n                  }\r\n\r\n                  if (formValues.uploadBigPicture !== undefined) {\r\n                    uploadPicture({\r\n                      _id,\r\n                      file: formValues.uploadBigPicture,\r\n                      folder: \"2y/lg\",\r\n                      navigateOut: isNew,\r\n                      result,\r\n                      setSubmitting,\r\n                    }).then((resultPic) => {\r\n                      // setSubmitting(false);\r\n                      completed({\r\n                        result: resultPic,\r\n                        navigateOut: isNew,\r\n                        setSubmitting,\r\n                      });\r\n                    });\r\n                  }\r\n                }\r\n              })\r\n              .catch((reason) => {\r\n                toast.error(reason.message);\r\n                setSubmitting(false);\r\n                // setSaving(false);\r\n              });\r\n          }}\r\n        >\r\n          {(formik) => (\r\n            <>\r\n              {/* {setFormikSubmitting(formik.setSubmitting)} */}\r\n              <AddEditWorkerForm\r\n                id={props.id}\r\n                formik={formik}\r\n                templateFields={templateFields}\r\n                disabled={formDisabled}\r\n                worker={worker}\r\n              />\r\n            </>\r\n          )}\r\n        </Formik>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Button, ButtonGroup } from \"@material-ui/core\";\r\nimport { DataGrid, GridColumns } from \"@material-ui/data-grid\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { ReactElement, useEffect } from \"react\";\r\nimport IWorkerTwoYear from \"../../../../estreeh-common-library/build/interfaces/IWorkerTwoYear\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport { useState } from \"react\";\r\nimport { IRequest } from \"../../../../estreeh-common-library/build/interfaces/IRequest\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport axios from \"axios\";\r\nimport dateFormat from \"dateformat\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function MyRequestsPage(props: Props): ReactElement {\r\n  //TODO: \"New requests\" page or filter\r\n  //TODO: \"Pending for Action\" page or filter\r\n\r\n  const [requests, setRequests] = useState<IRequest[]>([]);\r\n\r\n  const columns: GridColumns = [\r\n    {\r\n      field: \"created\",\r\n      headerName: \"Date\",\r\n      sortable: true,\r\n      width: 140,\r\n      valueFormatter: (params) => {\r\n        return dateFormat(params.row.created,\"dd mmm yy\");\r\n      }\r\n    },\r\n    {\r\n      field: \"REF\",\r\n      sortable: false,\r\n      width: 130,\r\n      valueGetter: (params) => {\r\n        const w: IWorkerTwoYear = params.row.workerTwoYear;\r\n        return w.referenceId;\r\n      },\r\n    },\r\n    {\r\n      field: \"Worker Name\",\r\n      sortable: true,\r\n      width: 200,\r\n      valueGetter: (params) => {\r\n        const w: IWorkerTwoYear = params.row.workerTwoYear;\r\n        return w.name;\r\n      },\r\n    },\r\n    {\r\n      field: \"status\",\r\n      headerName: \"Status\",\r\n      sortable: true,\r\n      width: 180,\r\n    },\r\n    {\r\n      field: \"fullName\",\r\n      headerName: \"Applicant Name\",\r\n      sortable: true,\r\n      width: 250,\r\n    },\r\n\r\n    {\r\n      field: \"mobileNumber\",\r\n      headerName: \"Mobile\",\r\n      sortable: true,\r\n      width: 200,\r\n    },\r\n    {\r\n      sortable: false,\r\n      disableColumnMenu: true,\r\n      field: \"actions\",\r\n      headerName: \"Actions\",\r\n      width: 140,\r\n      renderCell: (params) => (\r\n        <Box textAlign=\"center\">\r\n          <ButtonGroup color=\"primary\" variant=\"outlined\">\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                if (props.navigate) props.navigate(\"update\");\r\n              }}\r\n            >\r\n              <Edit fontSize=\"small\" />\r\n            </Button>\r\n            {/* <Button size=\"small\">\r\n              <ListAlt fontSize=\"small\" />\r\n            </Button> */}\r\n          </ButtonGroup>\r\n        </Box>\r\n      ),\r\n    },\r\n\r\n    // {\r\n    //   field: \"specialNotes\",\r\n    //   sortable: true,\r\n    //   width: 200,\r\n    // },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    console.log(\"Preparing to get Requests\");\r\n    axios\r\n      .get<IResponse<IRequest[]>>(\r\n        process.env.REACT_APP_API_ROOT + \"/be/requests\",\r\n        { withCredentials: true }\r\n      )\r\n      .then((requests) => {\r\n        console.log(`Got ${requests.data.data.length} requests`);\r\n        setRequests(requests.data.data);\r\n      });\r\n  }, [setRequests]);\r\n  // const applications: IApplicationForm[] = ApplicationFormFactory.buildList(14);\r\n\r\n  return (\r\n    <Box>\r\n      <PageTitle title=\"My Requests\" />\r\n      <Box height={400}>\r\n        <DataGrid\r\n          disableSelectionOnClick={true}\r\n          rows={requests.map((v) => {\r\n            const a = {\r\n              ...v.applicationForm,\r\n              trackingCode: v.trackingCode,\r\n              requestId: v.id,\r\n              id: v.applicationForm._id,\r\n              workerTwoYear: v.workerTwoYear,\r\n              status: v.status.title,\r\n              created: v.created,\r\n            };\r\n            return a;\r\n          })}\r\n          columns={columns}\r\n          pageSize={5}\r\n          // checkboxSelection\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Avatar, Box, Button, ButtonGroup } from \"@material-ui/core\";\r\nimport { DataGrid, GridColumns } from \"@material-ui/data-grid\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport axios from \"axios\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport IWorkerTwoYear from \"../../../../estreeh-common-library/build/interfaces/IWorkerTwoYear\";\r\nimport { S3Folder } from \"../../../../estreeh-common-library/src/types/S3Folder\";\r\nimport PageTitle from \"../common/PageTitle\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function MyWorkersPage(props: Props): ReactElement {\r\n  const [workers, setWorkers] = useState<IWorkerTwoYear[]>([]);\r\n\r\n  const columns: GridColumns = [\r\n    // {\r\n    //   field: \"id\",\r\n    //   sortable: true,\r\n    // },\r\n    {\r\n      field: \"referenceId\",\r\n      headerName: \"REF\",\r\n      sortable: true,\r\n      width: 200,\r\n    },\r\n    {\r\n      field: \"avatar\",\r\n      headerName: \"Pic\",\r\n      disableColumnMenu: true,\r\n      renderCell: (params) => {\r\n        const folder:S3Folder = \"2y/sm\";\r\n        const src = \"/\" + folder + \"/\" + params.row._id + \".\" + params.row.smallPictureFileExt;\r\n        return (\r\n          <Box>\r\n            <Avatar src={process.env.REACT_APP_IMAGES_ROOT + src} />\r\n          </Box>\r\n        );\r\n      },\r\n    },\r\n\r\n    {\r\n      field: \"nationality\",\r\n      headerName: \"Nationality\",\r\n      width: 200,\r\n      // valueGetter: (params) => {\r\n      //   const n: INationality = params.row.nationality;\r\n      //   return n.title;\r\n      // },\r\n    },\r\n    {\r\n      field: \"name\",\r\n      headerName: \"Worker Name\",\r\n      sortable: true,\r\n      width: 250,\r\n    },\r\n    {\r\n      field: \"jobTitle\",\r\n      headerName: \"Job Title\",\r\n      sortable: true,\r\n      description: \"Job title of the worker\",\r\n      width: 200,\r\n    },\r\n    // {\r\n    //   field: \"age\",\r\n    //   headerName: \"Age\",\r\n    //   sortable: false,\r\n    // },\r\n    // {\r\n    //   field: \"maritalStatus\",\r\n    //   headerName: \"Marital Status\",\r\n    //   sortable: true,\r\n    //   width: 200,\r\n    // },\r\n    {\r\n      sortable: false,\r\n      disableColumnMenu: true,\r\n      field: \"actions\",\r\n      headerName: \"Worker CV\",\r\n      width: 140,\r\n      renderCell: (params) => (\r\n        <Box textAlign=\"center\">\r\n          <ButtonGroup color=\"primary\" variant=\"outlined\">\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                if (props.navigate) props.navigate(\"edit/\"+params.row._id);\r\n              }}\r\n            >\r\n              <Edit fontSize=\"small\" />\r\n            </Button>\r\n            {/* <Button size=\"small\">\r\n              <ListAlt fontSize=\"small\" />\r\n            </Button> */}\r\n          </ButtonGroup>\r\n        </Box>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // const workers: IWorkerTwoYear[] = WorkerTwoYearFactory.buildList(14);\r\n  useEffect(() => {\r\n    axios\r\n      .get<IResponse<IWorkerTwoYear[]>>(\r\n        process.env.REACT_APP_API_ROOT + \"/be/workers-two-year\",\r\n        { withCredentials: true }\r\n      )\r\n      .then((result) => {\r\n        setWorkers(result.data.data);\r\n      });\r\n  }, [setWorkers]);\r\n\r\n  return (\r\n    <Box>\r\n      <PageTitle title=\"My Workers\" />\r\n      <Box height={400}>\r\n        <DataGrid\r\n          rows={workers}\r\n          columns={columns}\r\n          pageSize={5}\r\n          checkboxSelection\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/details.acdb38a6.png\";","import { IBackendFieldSelectOption } from \"../../../estreeh-common-library/build/interfaces/IBackendFieldSelectOption\";\r\n\r\n//TODO: Create new interface for Workflow Activity\r\n//TODO: Fill the documentation\r\n//TODO: Implement the activities per the document\r\n\r\nexport const WorkerWorkflowStatuses = [\r\n  \"Pending Confirmation\",\r\n  \"In Progress\",\r\n  \"Tickets Booked\",\r\n  \"Arrived & Ready to be Collected\",\r\n  \"In Trial\",\r\n  \"Completed\",\r\n  \"Declined by Agency\",\r\n  \"Cancelled by Customer\",\r\n  \"Returned by Customer\",\r\n];\r\n\r\nexport const WorkerWorkflowDropdown: IBackendFieldSelectOption[] =\r\n  WorkerWorkflowStatuses.map((stat) => {\r\n    return {\r\n      title: stat,\r\n      value: stat,\r\n    };\r\n  });\r\n","import { Box, Grid } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport mock from \"../../images/details.png\";\r\nimport BackendFieldSet from \"../forms/BackendFieldSet\";\r\nimport { IBackendField } from \"../../../../estreeh-common-library/build/interfaces/IBackendField\";\r\nimport SubmitButton from \"../forms/SubmitButton\";\r\nimport {\r\n  WorkerWorkflowDropdown,\r\n  WorkerWorkflowStatuses,\r\n} from \"../../config/WorkerWorkflowDropdown\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function UpdateRequestPage(props: Props): ReactElement {\r\n  // const defaultStatus = Faker.random.arrayElement(WorkerWorkflowStatuses);\r\n  const defaultStatus = WorkerWorkflowStatuses[0];\r\n\r\n  const fields: IBackendField[] = [\r\n    {\r\n      name: \"requestStatus\",\r\n      variant: \"select\",\r\n      defaultValue: defaultStatus,\r\n      selectOptions: WorkerWorkflowDropdown,\r\n    },\r\n    {\r\n      name: \"notes\",\r\n      variant: \"textarea\",\r\n    },\r\n    {\r\n      name: \"notify\",\r\n      label: \"Notify customer of status update\",\r\n      variant: \"checkbox\",\r\n      defaultValue:true,\r\n    },\r\n    // {\r\n    //   name: \"hide\",\r\n    //   label: \"Hide this worker from other customers\",\r\n    //   variant: \"checkbox\",\r\n    // },\r\n\r\n  ];\r\n  return (\r\n    <Box>\r\n      <PageTitle title=\"Update Request\" />\r\n      <Box>\r\n        <img\r\n          src={mock}\r\n          alt=\"Details\"\r\n          style={{\r\n            display: \"block\",\r\n            width: \"100%\",\r\n          }}\r\n        />\r\n      </Box>\r\n      <Box>\r\n        <Grid container>\r\n          <Grid item md={6}>\r\n            <BackendFieldSet header=\"Agency Actions\" fields={fields} md={12} />\r\n          </Grid>\r\n        </Grid>\r\n        <SubmitButton title=\"Save\" navigate={props.navigate} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/check.6b6350a4.svg\";","import { Box, Divider, Typography } from \"@material-ui/core\";\r\nimport React, { ReactElement } from \"react\";\r\nimport check from \"../../images/check.svg\";\r\n\r\ninterface Props {\r\n  bigText?: string;\r\n  smallText?: string;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport default function SuccessBigMessage(props: Props): ReactElement {\r\n  return (\r\n    <Box textAlign=\"center\">\r\n      <Box maxWidth={120} mx=\"auto\" pb={3}>\r\n        <img src={check} style={{ display: \"block\" }} alt=\"success\" />\r\n      </Box>\r\n      <Typography variant=\"h5\">Success!</Typography>\r\n      <Box py={1}>\r\n        <Typography variant=\"h6\">{props.bigText}</Typography>\r\n      </Box>\r\n      <Box>\r\n        <Typography>{props.smallText}</Typography>\r\n      </Box>\r\n      <Box p={2}>\r\n        <Divider variant=\"middle\" />\r\n      </Box>\r\n      <Box>{props.children}</Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport SuccessBigMessage from \"../common/SuccessBigMessage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function SuccessWorkerPage(props: Props): ReactElement {\r\n  const navigate =\r\n    props.navigate !== undefined ? props.navigate : (s: string) => {};\r\n  return (\r\n    <SuccessBigMessage bigText=\"New worker added successfully\">\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        style={{ marginRight: 16 }}\r\n        onClick={() => {\r\n          navigate(\"../add\");\r\n        }}\r\n      >\r\n        Add Another\r\n      </Button>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          navigate(\"..\");\r\n        }}\r\n      >\r\n        Workers List\r\n      </Button>\r\n    </SuccessBigMessage>\r\n  );\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport SuccessBigMessage from \"../common/SuccessBigMessage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function SuccessRequestPage(props: Props): ReactElement {\r\n  const navigate =\r\n    props.navigate !== undefined ? props.navigate : (s: string) => {};\r\n  return (\r\n    <SuccessBigMessage bigText=\"Request updated successfully\">\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          navigate(\"..\");\r\n        }}\r\n      >\r\n        Done\r\n      </Button>\r\n    </SuccessBigMessage>\r\n  );\r\n}\r\n","import { IRegionConfiguration } from \"../../../estreeh-common-library/build/interfaces/IRegionConfiguration\";\r\n\r\nconst bahrain: IRegionConfiguration = {\r\n  currencyCode: \"BHD\",\r\n  currencySymbol: \"BD\",\r\n  currencySymbolAr: \"د.ب\",\r\n  currencyDecimals: 3,\r\n  fixedProcessFees: {\r\n    lmraFees: 20,\r\n    vatPercentage: 0.05,\r\n    workPermitFees: 30,\r\n  },\r\n};\r\n\r\nexport const Regions = {\r\n  bahrain: bahrain,\r\n};\r\n","import { Box } from \"@material-ui/core\";\r\nimport { FormikProps } from \"formik\";\r\nimport React, { ReactElement } from \"react\";\r\nimport { IProcessTemplate } from \"../../../../estreeh-common-library/build/interfaces/IProcessTemplate\";\r\nimport { IRegionConfiguration } from \"../../../../estreeh-common-library/build/interfaces/IRegionConfiguration\";\r\nimport { IBackendField } from \"../../../../estreeh-common-library/build/interfaces/IBackendField\";\r\nimport BackendFieldSet from \"../forms/BackendFieldSet\";\r\n\r\ninterface Props {\r\n  process: IProcessTemplate;\r\n  region: IRegionConfiguration;\r\n  editing: boolean;\r\n  saving: boolean;\r\n  formik: FormikProps<any>;\r\n}\r\n\r\nexport default function ProcessTemplateCard(props: Props): ReactElement {\r\n  const p = props.process;\r\n  const currencyCodeSuffix = props.region.currencyCode;\r\n\r\n  const readOnly = !props.editing || props.saving;\r\n\r\n  // TODO: Somehow apply 3 digit decimals formatting\r\n  // const formatted = (n: number): string => {\r\n  //   // const mult = (Math.pow(10,props.region.currencyDecimals));\r\n  //   // return Math.round(n * mult) / mult;\r\n  //   return n.toFixed(props.region.currencyDecimals);\r\n  // };\r\n\r\n  // const sumFeesNoVat = (): number => {\r\n  //   return (\r\n  //     f.lmraFees +\r\n  //     f.workPermitFees +\r\n  //     processFees +\r\n  //     insuranceFees +\r\n  //     othersFees +\r\n  //     accommodationFees\r\n  //   );\r\n  // };\r\n\r\n  // const vatFees = (): number => {\r\n  //   return (\r\n  //     (processFees + insuranceFees + othersFees + accommodationFees) *\r\n  //     f.vatPercentage\r\n  //   );\r\n  // };\r\n\r\n  // const totalFees = (): number => {\r\n  //   return sumFeesNoVat() + vatFees();\r\n  // };\r\n\r\n  const fields: IBackendField<IProcessTemplate>[] = [\r\n    {\r\n      name: \"title\",\r\n      // defaultValue: p.title,\r\n      readOnly: readOnly,\r\n    },\r\n  ];\r\n\r\n  const fieldsFees1: IBackendField<IProcessTemplate>[] = [\r\n    {\r\n      name: \"processFeesBhd\",\r\n      readOnly: readOnly,\r\n      // defaultValue: p.processFeesBhd > 0 ? p.processFeesBhd : undefined,\r\n      // value: processFees,\r\n      suffix: currencyCodeSuffix,\r\n      type: \"number\",\r\n      // onChange: (e) => {\r\n      //   setprocessFees(parseInt(e.target.value));\r\n      // },\r\n    },\r\n    {\r\n      name: \"governmentFeesBhd\",\r\n      readOnly: readOnly,\r\n      type: \"number\",\r\n      // readOnly: true,\r\n      // defaultValue: f.lmraFees,\r\n      suffix: currencyCodeSuffix,\r\n    },\r\n    {\r\n      name: \"insuranceFeesBhd\",\r\n      readOnly: readOnly,\r\n      // defaultValue: p.insuranceFeesBhd > 0 ? p.insuranceFeesBhd : undefined,\r\n      // value: insuranceFees,\r\n      suffix: currencyCodeSuffix,\r\n      type: \"number\",\r\n      // onChange: (e) => {\r\n      //   setinsuranceFees(parseInt(e.target.value));\r\n      // },\r\n    },\r\n    {\r\n      name: \"accommodationFeesBhd\",\r\n      // defaultValue: p.accommodationFeesBhd > 0 ? p.accommodationFeesBhd : undefined,\r\n      // value: accommodationFees,\r\n      readOnly: readOnly,\r\n      suffix: currencyCodeSuffix,\r\n      type: \"number\",\r\n      // onChange: (e) => {\r\n      //   setaccommodationFees(parseInt(e.target.value));\r\n      // },\r\n    },\r\n    {\r\n      name: \"otherFeesLabel\",\r\n      defaultValue: p.otherFeesLabel,\r\n      readOnly: readOnly,\r\n      variant: \"text\",\r\n      // md: 6,\r\n      // selectOptions: [\r\n      //   {\r\n      //     value: \"Others\",\r\n      //   },\r\n      //   {\r\n      //     value: \"Travel Insurance & Training\",\r\n      //   },\r\n      // ],\r\n    },\r\n    {\r\n      name: \"otherFeesBhd\",\r\n      // defaultValue: p.otherFeesBhd > 0 ? p.otherFeesBhd : undefined,\r\n      // value: othersFees,\r\n      readOnly: readOnly,\r\n      suffix: currencyCodeSuffix,\r\n      type: \"number\",\r\n      // onChange: (e) => {\r\n      //   setothersFees(parseInt(e.target.value));\r\n      // },\r\n    },\r\n  ];\r\n\r\n  const fieldsTotals: IBackendField<IProcessTemplate>[] = [\r\n    // {\r\n    //   name: \"Sum\",\r\n    //   value: formatted(sumFeesNoVat()),\r\n    //   readOnly: true,\r\n    //   suffix: currencyCodeSuffix,\r\n    // },\r\n    {\r\n      name: \"vatFeesBhd\",\r\n      // value: formatted(vatFees()),\r\n      readOnly,\r\n      suffix: currencyCodeSuffix,\r\n    },\r\n    {\r\n      name: \"totalFeesBhd\",\r\n      // value: formatted(totalFees()),\r\n      readOnly: true,\r\n      suffix: currencyCodeSuffix,\r\n    },\r\n  ];\r\n\r\n  const fieldsDurations: IBackendField<IProcessTemplate>[] = [\r\n    {\r\n      name: \"processDurationMinimumMonths\",\r\n      label: \"Minimum\",\r\n      type: \"number\",\r\n      readOnly: readOnly,\r\n      step: 0.25,\r\n      suffix: \"Months\",\r\n      defaultValue:\r\n        p.processDurationMinimumMonths > 0\r\n          ? p.processDurationMinimumMonths\r\n          : undefined,\r\n    },\r\n    {\r\n      name: \"processDurationMaximumMonths\",\r\n      label: \"Maximum\",\r\n      type: \"number\",\r\n      readOnly: readOnly,\r\n      suffix: \"Months\",\r\n      step: 0.25,\r\n      defaultValue:\r\n        p.processDurationMaximumMonths > 0\r\n          ? p.processDurationMaximumMonths\r\n          : undefined,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Box px={1}>\r\n      <BackendFieldSet\r\n        header=\"Process Name\"\r\n        fields={fields}\r\n        md={6}\r\n        headerVariant=\"small\"\r\n        formik={props.formik}\r\n      />\r\n      <BackendFieldSet\r\n        fields={fieldsFees1}\r\n        md={4}\r\n        headerVariant=\"small\"\r\n        formik={props.formik}\r\n      />\r\n      <BackendFieldSet\r\n        fields={fieldsTotals}\r\n        md={4}\r\n        headerVariant=\"small\"\r\n        formik={props.formik}\r\n      />\r\n      <BackendFieldSet\r\n        header=\"Durations\"\r\n        fields={fieldsDurations}\r\n        md={4}\r\n        headerVariant=\"small\"\r\n        formik={props.formik}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Button, Grid } from \"@material-ui/core\";\r\nimport { Formik } from \"formik\";\r\nimport React, { ReactElement, useState } from \"react\";\r\nimport { IProcessTemplate } from \"../../../../estreeh-common-library/build/interfaces/IProcessTemplate\";\r\nimport { IRegionConfiguration } from \"../../../../estreeh-common-library/build/interfaces/IRegionConfiguration\";\r\nimport Branding from \"../../config/Branding\";\r\nimport ProcessTemplateCard from \"./ProcessTemplateCard\";\r\nimport * as Yup from \"yup\";\r\nimport axios from \"axios\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport { toast } from \"react-toastify\";\r\nimport FormErrors from \"../forms/FormErrors\";\r\n\r\ninterface Props {\r\n  process: IProcessTemplate;\r\n  region: IRegionConfiguration;\r\n  newItem: boolean;\r\n  loadProcessTemplates: Function;\r\n}\r\n\r\nexport default function ProcessTemplate(props: Props): ReactElement {\r\n  const [editing, setEditing] = useState(props.newItem);\r\n  const [saving, setSaving] = useState(false);\r\n  const count = props.process.countAssignedWorkers;\r\n  const smallFontSize = \"0.7rem\";\r\n  const minAmount = 5;\r\n  const minMonths = 0.25;\r\n\r\n  return (\r\n    <Box\r\n      boxShadow={Branding.shadow.niceShadow}\r\n      borderRadius={Branding.borderRadius.niceRadius}\r\n      border={editing ? \"2px dashed blue\" : \"1px solid \" + Branding.lighter}\r\n      p={1}\r\n      my={1}\r\n    >\r\n      <Formik\r\n        initialValues={props.process}\r\n        validationSchema={Yup.object({\r\n          title: Yup.string().min(3,\"Minimum 3 characters\").required(\"Required\"),\r\n          accommodationFeesBhd: Yup.number().required(\"Required\"),\r\n          governmentFeesBhd: Yup.number().required(\"Required\"),\r\n          insuranceFeesBhd: Yup.number().required(\"Required\"),\r\n          otherFeesBhd: Yup.number().required(\"Required\"),\r\n          vatFeesBhd: Yup.number().required(\"Required\"),\r\n          processFeesBhd: Yup.number().min(minAmount,`Minimum ${minAmount} BHD`).required(\"Required\"),\r\n          otherFeesLabel: Yup.string().required(\"Required\"),\r\n          agencyId: Yup.string().optional(),\r\n          countAssignedWorkers: Yup.number().optional(),\r\n          created: Yup.date().optional(),\r\n          modified: Yup.date().optional(),\r\n          processDurationMinimumMonths: Yup.number().min(minMonths,`Minimum ${minMonths} Months`).required(\"Required\"),\r\n          processDurationMaximumMonths: Yup.number().min(minMonths,`Minimum ${minMonths} Months`).required(\"Required\"),\r\n          totalFeesBhd: Yup.number().optional(),\r\n          vatPercentage: Yup.number().optional(),\r\n          _id: Yup.string().optional(),\r\n          id: Yup.string().optional(),\r\n        })}\r\n        onSubmit={(formValues, { setSubmitting }) => {\r\n          setSubmitting(true);\r\n          setSaving(true);\r\n          const isNew = formValues._id === undefined;\r\n          const method = isNew ? \"POST\" : \"PUT\";\r\n          const url = process.env.REACT_APP_API_ROOT + \"/be/process-templates\";\r\n\r\n          axios\r\n            .request<IResponse<IProcessTemplate>>({\r\n              method,\r\n              url,\r\n              data: formValues,\r\n              withCredentials: true,\r\n            })\r\n            .then((result) => {\r\n              toast.success(result.data.message);\r\n              setEditing(false);\r\n              setSaving(false);\r\n              setSubmitting(false);\r\n              // props.loadProcessTemplates();\r\n            })\r\n            .catch((reason) => {\r\n              toast.error(reason.message);\r\n              setSaving(false);\r\n              setSubmitting(false);\r\n            });\r\n        }}\r\n      >\r\n        {(formik) => (\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <Grid container spacing={2} alignItems=\"flex-end\">\r\n              <Grid item md={10} xs={12}>\r\n                <ProcessTemplateCard\r\n                  process={props.process}\r\n                  region={props.region}\r\n                  editing={editing}\r\n                  saving={saving}\r\n                  formik={formik}\r\n                />{\" \"}\r\n              </Grid>\r\n              <Grid item md={2} xs={12}>\r\n                <Box p={1}>\r\n                  <Box p={1} textAlign=\"center\" fontSize={smallFontSize}>\r\n                    Assigned Workers: {count}\r\n                  </Box>\r\n                  {editing && (\r\n                    <>\r\n                      <FormErrors\r\n                        errors={formik.errors}\r\n                        style={{ fontSize: smallFontSize }}\r\n                      />\r\n                      <Box\r\n                        my={1}\r\n                        textAlign=\"center\"\r\n                        fontSize={smallFontSize}\r\n                        color=\"blue\"\r\n                        fontStyle=\"italic\"\r\n                      >\r\n                        {Object.keys(formik.errors).length === 0 && (\r\n                          <>\r\n                            Please save your changes\r\n                            {count > 0\r\n                              ? `, they will be applied automatically to ${count} workers`\r\n                              : \"\"}\r\n                          </>\r\n                        )}\r\n                      </Box>\r\n                      <Button\r\n                        fullWidth={true}\r\n                        color=\"primary\"\r\n                        variant=\"outlined\"\r\n                        disabled={saving}\r\n                        type=\"submit\"\r\n                      >\r\n                        {saving ? \"Saving...\" : \"Save\"}\r\n                      </Button>\r\n                    </>\r\n                  )}\r\n                  {!editing && (\r\n                    <Button\r\n                      fullWidth={true}\r\n                      variant=\"outlined\"\r\n                      color=\"primary\"\r\n                      onClick={() => {\r\n                        setEditing(true);\r\n                      }}\r\n                    >\r\n                      Edit\r\n                    </Button>\r\n                  )}\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n          </form>\r\n        )}\r\n      </Formik>\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Button } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport axios from \"axios\";\r\nimport React, { ReactElement, useEffect, useState } from \"react\";\r\nimport { IProcessTemplate } from \"../../../../estreeh-common-library/build/interfaces/IProcessTemplate\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport { Regions } from \"../../config/Regions\";\r\n// import { ProcessTemplateFactory } from \"../../factories/ProcessTemplateFactory\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport SubmitButton from \"../forms/SubmitButton\";\r\nimport ProcessTemplate from \"./ProcessTemplate\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function AgencyProcessTemplatesPage(props: Props): ReactElement {\r\n  const makeBlankProcess = (): IProcessTemplate => {\r\n    return {\r\n      accommodationFeesBhd: 0,\r\n      insuranceFeesBhd: 0,\r\n      otherFeesBhd: 0,\r\n      processFeesBhd: 0,\r\n      processDurationMaximumMonths: 0,\r\n      processDurationMinimumMonths: 0,\r\n      vatFeesBhd: 0,\r\n      governmentFeesBhd: 0,\r\n      vatPercentage: 0,\r\n      title: \"\",\r\n      agencyId: \"\",\r\n      otherFeesLabel: \"Others\",\r\n      countAssignedWorkers: 0,\r\n      totalFeesBhd: 0,\r\n      created: new Date(),\r\n      modified: new Date(),\r\n    };\r\n  };\r\n  // const fakeProcesses: IProcessTemplate[] = ProcessTemplateFactory.buildList(0);\r\n\r\n  // TODO: Axios load processess into a state\r\n  // const [processes, setProcesses] = useState([...fakeProcesses, makeBlankProcess()]);\r\n  const [processes, setProcesses] = useState<IProcessTemplate[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const addClicked = () => {\r\n    setProcesses((prev) => [...prev, makeBlankProcess()]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      loadProcessTemplates();\r\n    }\r\n  }, [loading]);\r\n\r\n  function loadProcessTemplates() {\r\n    console.log(\"Loading process templates...\");\r\n    axios\r\n      .get<IResponse<IProcessTemplate[]>>(\r\n        process.env.REACT_APP_API_ROOT + \"/be/process-templates\",\r\n        { withCredentials: true }\r\n      )\r\n      .then((result) => {\r\n        setProcesses(result.data.data);\r\n        console.log(\"Process templates loaded\");\r\n        setLoading(false);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <PageTitle title=\"Process Templates\" />\r\n      <Box>\r\n        {processes.map((process, index) => (\r\n          <ProcessTemplate\r\n            key={process._id}\r\n            process={process}\r\n            region={Regions.bahrain}\r\n            newItem={process._id === undefined}\r\n            loadProcessTemplates={loadProcessTemplates}\r\n          />\r\n        ))}\r\n      </Box>\r\n      <Box>\r\n        <Button color=\"primary\" variant=\"contained\" onClick={addClicked}>\r\n          + Add More\r\n        </Button>\r\n      </Box>\r\n      <SubmitButton\r\n        title=\"Exit\"\r\n        navigate={props.navigate}\r\n        navigateUrl=\"/panel/dashboard\"\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React, { ReactElement } from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { Link, Typography } from \"@material-ui/core\";\r\nimport ErrorPage from \"./ErrorPage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function UnauthorizedPage(props: Props): ReactElement {\r\n  return (\r\n    <ErrorPage title=\"401\" subtitle=\"❌ Unauthorized\">\r\n      <Typography>\r\n        Unauthorized or session has expired. Please make sure you have <Link href=\"/login\">logged in</Link>.\r\n      </Typography>\r\n    </ErrorPage>\r\n  );\r\n}\r\n","import React, { ReactElement, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  FormGroup,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Divider,\r\n  Grid,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport SubmitButton from \"../forms/SubmitButton\";\r\nimport { IBackendField } from \"../../../../estreeh-common-library/build/interfaces/IBackendField\";\r\n// import { AreasDropdown } from \"../../config/AreasDropdown\";\r\nimport Faker from \"faker\";\r\nimport BackendFieldSet from \"../forms/BackendFieldSet\";\r\nimport { nationalities } from \"../../config/Nationalities\";\r\nimport { Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport IAgency from \"../../../../estreeh-common-library/build/interfaces/IAgency\";\r\nimport axios from \"axios\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport { S3Folder } from \"../../../../estreeh-common-library/src/types/S3Folder\";\r\nimport { toast } from \"react-toastify\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function AgencySettingsPage(props: Props): ReactElement {\r\n  const [agency, setAgency] = useState<Partial<IAgency>>({});\r\n  const [loading, setLoading] = useState(true);\r\n  const folder: S3Folder = \"agency/sm\";\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      axios\r\n        .get<IResponse<IAgency>>(\r\n          process.env.REACT_APP_API_ROOT + \"/be/agency\",\r\n          { withCredentials: true }\r\n        )\r\n        .then((result) => {\r\n          setAgency(result.data.data);\r\n          setLoading(false);\r\n        });\r\n    }\r\n  }, [loading, setLoading]);\r\n\r\n  const fields: IBackendField<IAgency>[] = [\r\n    {\r\n      name: \"title\",\r\n      label: \"Agency Name (English)\",\r\n      readOnly: true,\r\n      // defaultValue: agencyName.name,\r\n    },\r\n    {\r\n      name: \"titleAr\",\r\n      label: \"Agency Name (Arabic)\",\r\n      readOnly: true,\r\n      // defaultValue: agencyName.nameAr,\r\n    },\r\n    {\r\n      name: \"cr\",\r\n      readOnly: true,\r\n      defaultValue:\r\n        Faker.datatype.number({ min: 10000, max: 99999 }) +\r\n        \"-\" +\r\n        Faker.datatype.number({ min: 0, max: 9 }),\r\n    },\r\n    // {\r\n    //   name: \"area\",\r\n    //   label: \"Agency Area\",\r\n    //   // variant: \"select\",\r\n    //   readOnly: true,\r\n    //   defaultValue: CamelToSentence(\r\n    //     Faker.random.arrayElement(AreasDropdown.map((a) => a.value))\r\n    //   ),\r\n    //   // selectOptions: AreasDropdown,\r\n    // },\r\n    {\r\n      name: \"telephone\",\r\n    },\r\n    {\r\n      name: \"mobile\",\r\n    },\r\n    {\r\n      name: \"email\",\r\n    },\r\n    {\r\n      name: \"openingTimes\",\r\n      md: 12,\r\n      variant: \"textarea\",\r\n      textareaLines: 4,\r\n    },\r\n  ];\r\n\r\n  const pictureFields: IBackendField<IAgency>[] = [\r\n    {\r\n      name: \"uploadLogo\",\r\n      // label: \"Change Logo\",\r\n      variant: \"file\",\r\n      buttonIcon: \"photo_camera\",\r\n    },\r\n  ];\r\n\r\n  // const unitField: IBackendField = {\r\n  //   name: \"unit\",\r\n  //   variant: \"select\",\r\n  //   selectOptions: [{ value: \"weeks\" }, { value: \"months\" }],\r\n  // };\r\n\r\n  const termsLines = 11;\r\n\r\n  const termsFields: IBackendField[] = [\r\n    // {\r\n    //   name: \"General T&C\",\r\n    //   variant: \"textarea\",\r\n    // },\r\n    // {\r\n    //   name: \"General Terms & Conditions\",\r\n    //   variant: \"textarea\",\r\n    //   textareaLines:lines,\r\n    // },\r\n    // {\r\n    //   name: \"Contract Terms & Conditions\",\r\n    //   variant: \"textarea\",\r\n    //   textareaLines:lines,\r\n    //   md:12,\r\n    // },\r\n    {\r\n      name: \"Local Transfer Worker Terms & Conditions\",\r\n      variant: \"textarea\",\r\n      textareaLines: termsLines,\r\n    },\r\n    // {\r\n    //   name: \"Payments Terms & Conditions\",\r\n    //   variant: \"textarea\",\r\n    //   textareaLines:lines,\r\n    // },\r\n    // {\r\n    //   name: \"Rental Workers T&C\",\r\n    //   variant: \"textarea\",\r\n    // },\r\n  ];\r\n\r\n  // TODO: TO use this in future\r\n\r\n  const nationalitiesComponent = (\r\n    <Box>\r\n      <PageTitle title=\"Nationalities\" />\r\n      <BackendFieldSet xs={12}>\r\n        <FormGroup row>\r\n          {nationalities.map((nationality) => (\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox name={\"nationality_\" + nationality} color=\"primary\" />\r\n              }\r\n              label={nationality}\r\n              key={nationality}\r\n            />\r\n          ))}\r\n        </FormGroup>\r\n      </BackendFieldSet>\r\n    </Box>\r\n  );\r\n\r\n  const div = (\r\n    <Box my={4}>\r\n      <Divider />\r\n    </Box>\r\n  );\r\n\r\n  function completed(setSubmitting: (isSubmitting: boolean) => void) {\r\n    setSubmitting(false);\r\n    if (props.navigate) props.navigate(\"success\");\r\n  }\r\n\r\n  function uploadPicture(\r\n    file: any,\r\n    setSubmitting: (isSubmitting: boolean) => void\r\n  ) {\r\n    let formData = new FormData();\r\n    // let folder:S3Folder = \"\"\r\n    // formData.append(\"_id\", v._id);\r\n    // formData.append(\"folder\", )\r\n    formData.append(\"file\", file);\r\n    axios\r\n      .request<IResponse>({\r\n        method: \"PUT\",\r\n        url: process.env.REACT_APP_API_ROOT + \"/be/agency/picture\",\r\n        data: formData,\r\n        withCredentials: true,\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((result) => {\r\n        toast.success(result.data.message);\r\n        completed(setSubmitting);\r\n      });\r\n  }\r\n\r\n  /* ----------------------------------------\r\n  TODO: IDEAS to be in this page:\r\n\r\n  - On/Off Payment methods support:\r\n  --- Cash\r\n  --- VISA\r\n  --- Benefit\r\n  --- Debit Card\r\n\r\n  -----------------------------------------*/\r\n\r\n  return (\r\n    <>\r\n      {!loading && (\r\n        <Formik\r\n          initialValues={agency}\r\n          validationSchema={Yup.object({\r\n            // name: Yup.string().required(\"Required\"),\r\n            // processTemplateId: Yup.string().required(\"Required\"),\r\n          })}\r\n          onSubmit={(formValues, { setSubmitting }) => {\r\n            setSubmitting(true);\r\n            const method = \"PUT\";\r\n            const url = process.env.REACT_APP_API_ROOT + \"/be/agency\";\r\n            axios\r\n              .request<IResponse<IAgency>>({\r\n                method,\r\n                url,\r\n                data: formValues,\r\n                withCredentials: true,\r\n              })\r\n              .then((result) => {\r\n                toast.success(result.data.message);\r\n                if (formValues.uploadLogo !== undefined) {\r\n                  uploadPicture(formValues.uploadLogo, setSubmitting);\r\n                } else {\r\n                  completed(setSubmitting);\r\n                }\r\n              })\r\n              .catch((reason) => {\r\n                toast.error(reason.message);\r\n                setSubmitting(false);\r\n              });\r\n          }}\r\n        >\r\n          {(formik) => (\r\n            <form onSubmit={formik.handleSubmit}>\r\n              <React.Fragment>\r\n                <PageTitle title=\"Agency Settings\" />\r\n                <BackendFieldSet\r\n                  header=\"Agency Profile\"\r\n                  fields={fields}\r\n                  md={6}\r\n                  formik={formik}\r\n                />\r\n                <BackendFieldSet header=\"Images\" xs={12}>\r\n                  <Grid container>\r\n                    <Grid item xs={4}>\r\n                      <Avatar\r\n                        src={\r\n                          process.env.REACT_APP_IMAGES_ROOT +\r\n                          \"/\" +\r\n                          folder +\r\n                          \"/\" +\r\n                          agency._id +\r\n                          \".\" +\r\n                          agency.logoFileExt\r\n                        }\r\n                        variant=\"rounded\"\r\n                        style={{\r\n                          width: 160,\r\n                          height: 160,\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                </BackendFieldSet>\r\n                <BackendFieldSet\r\n                  xs={12}\r\n                  fields={pictureFields}\r\n                  formik={formik}\r\n                />\r\n              </React.Fragment>\r\n              {div}\r\n              <>\r\n                {false && nationalitiesComponent}\r\n                <PageTitle title=\"Terms & Conditions\" />\r\n                <BackendFieldSet fields={termsFields} md={12} formik={formik} />\r\n              </>\r\n              {div}\r\n              <React.Fragment>\r\n                <PageTitle title=\"Payment Methods\" />\r\n                <Box>\r\n                  <Alert severity=\"info\">\r\n                    Currently only Cash option is available. More options will\r\n                    be available in near future.\r\n                  </Alert>\r\n                </Box>\r\n                <SubmitButton\r\n                  errors={formik.errors}\r\n                  type=\"submit\"\r\n                  title=\"save\"\r\n                  disabled={formik.isSubmitting}\r\n                />\r\n              </React.Fragment>\r\n            </form>\r\n          )}\r\n        </Formik>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport React, { ReactElement } from \"react\";\r\nimport SuccessBigMessage from \"../common/SuccessBigMessage\";\r\n\r\ninterface Props extends RouteComponentProps {}\r\n\r\nexport default function SuccessAgencyPage(props: Props): ReactElement {\r\n  const navigate =\r\n    props.navigate !== undefined ? props.navigate : (s: string) => {};\r\n  return (\r\n    <SuccessBigMessage bigText=\"Agency settings updated successfully\" smallText={`If you have updated the logo, it might take up to 60 seconds to appear.`}>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          navigate(\"/panel/dashboard\");\r\n        }}\r\n      >\r\n        Done\r\n      </Button>\r\n    </SuccessBigMessage>\r\n  );\r\n}\r\n","import { Redirect, Router } from \"@reach/router\";\r\nimport { ReactElement, useState } from \"react\";\r\nimport DashboardPage from \"../dashboard/DashboardPage\";\r\nimport AdminPanelLayout from \"../layouts/AdminPanelLayout\";\r\nimport EmptySection from \"./EmptySection\";\r\nimport LoginLayout from \"../layouts/LoginLayout\";\r\nimport NotFoundPage from \"../layouts/NotFoundPage\";\r\nimport LoginPage from \"../login/LoginPage\";\r\nimport AddEditWorkerPage from \"../workers/AddEditWorkerPage\";\r\nimport MyRequestsPage from \"../requests/MyRequestsPage\";\r\nimport MyWorkersPage from \"../workers/MyWorkersPage\";\r\nimport UpdateRequestPage from \"../requests/UpdateRequestPage\";\r\nimport SuccessWorkerPage from \"../workers/SuccessWorkerPage\";\r\nimport SuccessRequestPage from \"../requests/SuccessRequestPage\";\r\nimport AgencyProcessTemplatesPage from \"../settings/AgencyProcessTemplatesPage\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { IResponse } from \"../../../../estreeh-common-library/build/interfaces/IResponse\";\r\nimport { IUser } from \"../../../../estreeh-common-library/build/interfaces/IUser\";\r\nimport UnauthorizedPage from \"../layouts/UnauthorizedPage\";\r\nimport { UserRole } from \"../../../../estreeh-common-library/build/types/UserRole\";\r\nimport AgencySettingsPage from \"../settings/AgencySettingsPage\";\r\nimport SuccessAgencyPage from \"../settings/SuccessAgencyPage\";\r\n\r\ninterface Props {}\r\n\r\nexport default function MasterRouter(props: Props): ReactElement {\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState<IUser | undefined>(undefined);\r\n\r\n  const getUser = () => {\r\n    return axios.get<IResponse<IUser | undefined>>(\r\n      process.env.REACT_APP_API_ROOT + \"/auth/me\",\r\n      { withCredentials: true }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"Getting user\");\r\n    if (loading) {\r\n      getUser().then((result) => {\r\n        console.log(\"User received from API\");\r\n        const user = result.data.data;\r\n        setUser(user);\r\n        setLoading(false);\r\n      });\r\n    }\r\n  }, [setUser, setLoading, loading]);\r\n\r\n  const validRoles: UserRole[] = [\"Agency\", \"Agency Manager\"];\r\n  const validUser =\r\n    user !== undefined &&\r\n    user.agencyId !== undefined &&\r\n    validRoles.includes(user.role);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box p={2} textAlign=\"center\">\r\n        <Typography variant=\"h6\">Loading...</Typography>\r\n      </Box>\r\n    );\r\n  } else {\r\n    return (\r\n      <Router primary={false}>\r\n        <Redirect from=\"/\" to={!validUser ? \"/login\" : \"/panel\"} noThrow />\r\n        {!validUser && (\r\n          <>\r\n            <UnauthorizedPage default />\r\n            <LoginLayout path=\"login\">\r\n              <LoginPage setUser={setUser} path=\"/\" getUser={getUser} />\r\n            </LoginLayout>\r\n          </>\r\n        )}\r\n        {validUser && user !== undefined && user.agencyId !== undefined && (\r\n          <>\r\n            {/* <Redirect from=\"/login\" to=\"/\" /> */}\r\n            <NotFoundPage default />\r\n            <AdminPanelLayout path=\"panel\" user={user} setUser={setUser}>\r\n              <Redirect from=\"/\" to=\"dashboard\" noThrow />\r\n              <DashboardPage path=\"dashboard\" user={user} />\r\n              <EmptySection path=\"my-workers\">\r\n                <MyWorkersPage path=\"/\" />\r\n                <AddEditWorkerPage path=\"add\" />\r\n                <AddEditWorkerPage path=\"edit/:id\" />\r\n                <SuccessWorkerPage path=\"success\" />\r\n              </EmptySection>\r\n              <EmptySection path=\"my-requests\">\r\n                <MyRequestsPage path=\"/\" />\r\n                <UpdateRequestPage path=\"update\" />\r\n                <SuccessRequestPage path=\"success\" />\r\n              </EmptySection>\r\n              <EmptySection path=\"agency/settings\">\r\n                <AgencySettingsPage default />\r\n                <AgencyProcessTemplatesPage path=\"process-templates\" />\r\n                <SuccessAgencyPage path=\"success\" />\r\n              </EmptySection>\r\n            </AdminPanelLayout>\r\n          </>\r\n        )}\r\n        {/* <RootLayout default user={user}/> */}\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport \"@fontsource/roboto\";\r\nimport UseStyles from \"../../config/UseStyles\";\r\nimport MyTheme from \"../../config/MyTheme\";\r\n// import { myBreakpoints } from \"../../config/Breakpoints\";\r\nimport Branding from \"../../config/Branding\";\r\nimport MasterRouter from \"./MasterRouter\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\n\r\nexport default function MasterTheme(props: { useRtl: boolean }) {\r\n  const classes = UseStyles();\r\n  // const {i18n} = useTranslation();\r\n  // const lang = i18n.language;\r\n  // const dir = props.useRtl && lang === \"ar\" ? \"rtl\" : \"ltr\";\r\n  const lang = \"en\";\r\n  const dir = \"ltr\";\r\n\r\n  document.documentElement.dir = dir;\r\n  document.documentElement.lang = lang;\r\n  document.body.dir = dir;\r\n  document.body.lang = lang;\r\n\r\n  // console.log(MyTheme);\r\n\r\n  return (\r\n    // <ReactBreakpoints breakpoints={myBreakpoints}>\r\n    <ThemeProvider theme={MyTheme}>\r\n      <ToastContainer />\r\n      <div\r\n        className={classes.root}\r\n        id=\"after-root\"\r\n        dir={dir}\r\n        style={{ height: \"100%\", fontFamily: Branding.fontFamily.body }}\r\n      >\r\n        {/* <ToolboxState classes={classes}/> */}\r\n        \r\n        <MasterRouter />\r\n      </div>\r\n    </ThemeProvider>\r\n    // </ReactBreakpoints>\r\n  );\r\n}\r\n","import MasterTheme from \"./components/preloaders/MasterTheme\";\nimport \"./App.css\";\n\n//TODO: Check user is authenticated and is an agency, else redirect to welcome screen.\n\nfunction App() {\n  return <MasterTheme useRtl={false} />;\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n  ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}