(this["webpackJsonpestreeh-web-agencies-frontend"]=this["webpackJsonpestreeh-web-agencies-frontend"]||[]).push([[0],{1874:function(e,t,a){},1875:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(16),s=a.n(r),c=(a(246),a(1930)),o=(a(247),a(155)),l=a(203),d=a(81),u=a.n(d),j="#B3D9E3",h="#E6F1F4",b={primary:"#5890A7",light:j,lighter:"#D9E5EA",lightest:h,lightBg:"#f8f8f8",warning:"#ffd294",dark:"#172C42",slotColors:{free:"#a0ffae",booked:"#ff929c",off:"#dfdfdf",hover:j,selected:h,shadowColor:function(e){return new u.a(e).darken(.5).alpha(.5).toString()},shadow:function(e,t,a){var n=t||1;return n+"px "+n+"px "+(a||2)+"px "+new u.a(e).darken(.5).alpha(.5).toString()}},slotColorsDot:{free:"#50af56",booked:"#ea1542",off:"#dfdfdf"},text:{primary:"#000000",secondary:"#777777",warning:u()("#ffd294").darken(.45).string()},fontSize:{small:13},fontFamily:{heading:"",body:'"Roboto", "Segoe UI", "Helvetica", "Arial", open_sansregular,Helvetica Neue,Helvetica,-apple-system, BlinkMacSystemFont, "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif'},shadow:{niceShadow:"0 0 25px #00000011"},borderRadius:{niceRadius:10},transition:"all 0.1s"},m=Object(o.a)((function(e){return Object(l.a)({root:{flexGrow:1,"& a":{color:b.primary},"& .material-icons":{verticalAlign:"text-bottom"},"& .transitionDefault":{transition:b.transition},"& .MuiTextField-root":{marginTop:e.spacing(.5),marginBottom:e.spacing(.5),width:"100%"},"& .MuiAvatar-img":{objectFit:"contain"},"& .notched-outline-no-border":{borderTop:0,borderRight:0,borderBottom:0}},objectFitContain:{"& .MuiAvatar-img":{objectFit:"contain"}},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.primary},transitionDefault:{transition:b.transition},wizardCardLink:{display:"block",color:"#000",borderRadius:10,boxShadow:"0 0 22px #00000022",background:"white",textDecoration:"none",transition:b.transition,"&:hover":{background:b.lightest,boxShadow:"0 0 2px "+b.primary}},hoverBox:{transition:b.transition,userSelect:"none","&:hover":{backgroundColor:b.lightBg}}})})),f=a(76),p=Object(f.a)({palette:{primary:{main:b.primary},secondary:{main:b.light},contrastThreshold:3,tonalOffset:.2},typography:{fontFamily:b.fontFamily.body}}),x=a(32),O=(a(255),a(1931)),v=a(136),g=a(31),y=Object(g.d)(),k=y.useStoreActions,w=(y.useStoreDispatch,y.useStoreState),S=a(14),C=a.p+"static/media/logo.d1016dba.svg",F=a(1);function T(e){return Object(F.jsx)("img",{src:C,style:Object(S.a)({display:"block",maxWidth:"100%",margin:"0",maxHeight:40},e.styles),alt:"Estreeh Logo"})}var M=a(26),R=a(1916),A=a(1933);function P(e){return Object(F.jsxs)(O.a,{mb:2,children:[Object(F.jsx)(v.a,{variant:"h4",children:e.title}),void 0!==e.children&&Object(F.jsx)(v.a,{variant:"h5",style:{color:b.text.secondary},children:e.children})]})}var N=a(73),I=a(1915);function q(e){return Object(N.a)(O.a,{bgcolor:b.lighter,p:3,borderRadius:b.borderRadius.niceRadius,boxShadow:b.shadow.niceShadow,textAlign:"center",css:void 0===e.onClick?void 0:{cursor:"pointer",":hover":{backgroundColor:b.light}},onClick:e.onClick},Object(N.a)(O.a,null,Object(N.a)(O.a,{style:{textTransform:"uppercase",height:"3rem",display:"flex",justifyContent:"center",alignItems:"center"}},e.title)),Object(N.a)(O.a,{py:1,fontSize:"3.5rem"},void 0===e.value&&Object(N.a)(I.a,{variant:"text",width:120,animation:"wave",style:{marginLeft:"auto",marginRight:"auto"}}),void 0!==e.value&&Object(N.a)(O.a,null,e.value)))}function B(e){var t=w((function(e){return e.agency.item})),a=w((function(e){return e.dashboardSummary.item})),n={md:3,xs:12};return Object(F.jsx)(O.a,{children:Object(F.jsxs)(R.a,{container:!0,direction:"row-reverse",spacing:2,children:[Object(F.jsx)(R.a,{item:!0,md:3,xs:12,children:Object(F.jsxs)(O.a,{textAlign:"center",children:[Object(F.jsx)(A.a,{src:"https://d15f7urgawp38o.cloudfront.net/agency/sm/"+(null===t||void 0===t?void 0:t._id)+"."+(null===t||void 0===t?void 0:t.logoFileExt),variant:"rounded",style:{width:260,height:220,marginLeft:"auto",marginRight:"auto"}}),Object(F.jsx)(v.a,{children:null===t||void 0===t?void 0:t.title}),Object(F.jsx)(v.a,{children:null===t||void 0===t?void 0:t.titleAr}),Object(F.jsxs)(v.a,{children:["CR: ",null===t||void 0===t?void 0:t.cr]})]})}),Object(F.jsxs)(R.a,{item:!0,md:9,xs:12,children:[Object(F.jsx)(P,{title:"Agency Dashboard"}),Object(F.jsx)(v.a,{children:"Welcome to the Estreeh agency portal."}),Object(F.jsx)(v.a,{children:"Please use the left menu to navigate."}),Object(F.jsx)(O.a,{p:3,children:Object(F.jsxs)(R.a,{container:!0,spacing:2,alignItems:"center",children:[Object(F.jsx)(R.a,Object(S.a)(Object(S.a)({item:!0},n),{},{children:Object(F.jsx)(q,{title:"New Requests",value:null===a||void 0===a?void 0:a.newRequests,onClick:function(){Object(M.d)("my-requests")}})})),Object(F.jsx)(R.a,Object(S.a)(Object(S.a)({item:!0},n),{},{children:Object(F.jsx)(q,{title:"Pending Requests",value:null===a||void 0===a?void 0:a.pendingRequests,onClick:function(){Object(M.d)("my-requests")}})})),Object(F.jsx)(R.a,Object(S.a)(Object(S.a)({item:!0},n),{},{children:Object(F.jsx)(q,{title:"My Workers",value:null===a||void 0===a?void 0:a.myWorkers,onClick:function(){Object(M.d)("my-workers")}})})),Object(F.jsx)(R.a,Object(S.a)(Object(S.a)({item:!0},n),{},{children:Object(F.jsx)(q,{title:"Customer Reviews",value:null===a||void 0===a?void 0:a.customerReviews})}))]})})]})]})})}var L=a(137),W=a(1917);function E(e){var t,a=void 0===e.first||e.first,n=e.navItem,i={display:"block",color:"white",padding:"2px 8px",textDecoration:"none",fontWeight:a?"bold":void 0},r=void 0!==e.navItem.count&&e.navItem.count>0,s=Object(F.jsxs)(O.a,{mr:r?1.5:0,children:[n.icon&&Object(F.jsx)("i",{className:n.icon,style:{marginRight:6}}),n.title]}),c=r?Object(F.jsx)(L.a,{badgeContent:e.navItem.count,color:"secondary",children:s}):s;return Object(F.jsxs)(O.a,{ml:e.mx,my:e.my,children:[n.to&&Object(F.jsx)(M.a,{style:Object(S.a)({},i),to:n.to,children:c}),!n.to&&Object(F.jsx)(W.a,{href:"#",style:Object(S.a)({},i),children:s}),void 0!==e.navItem.children&&Object(F.jsx)(O.a,{fontSize:"90%",children:null===(t=e.navItem.children)||void 0===t?void 0:t.map((function(e){return Object(F.jsx)(E,{my:.5,mx:3,navItem:e,first:!1},e.title+"_"+e.to)}))})]})}function D(e){var t=[{key:"dash1",title:"Home",to:"/panel/dashboard",icon:"las la-home"},{key:"myrequests",title:"My Requests",to:"/panel/my-requests",icon:"las la-list-alt",count:e.countRequests},{key:"myworkers",title:"My Workers",to:"/panel/my-workers",icon:"las la-users",count:e.countWorkers,children:[{key:"mw-manageworkers",title:"Manage Workers",to:"/panel/my-workers",icon:"las la-users"},{key:"mw-addnewworker",title:"Add New Worker",to:"/panel/my-workers/add",icon:"las la-plus"}]},{key:"agencysettings",title:"Agency Settings",icon:"las la-cog",children:[{key:"as-settings",title:"General Settings",to:"/panel/agency/settings",icon:"las la-server"},{key:"as-processes",title:"Process Templates",to:"/panel/agency/settings/process-templates",icon:"las la-border-none"},{key:"as-qr",title:"QR Code",to:"/panel/agency/settings/qr-code",icon:"las la-qrcode"}]}];return Object(F.jsx)(O.a,{position:"fixed",width:"16.6666667%",height:"100%",children:Object(F.jsxs)(O.a,{bgcolor:b.primary,color:"white",height:"100%",children:[Object(F.jsx)(O.a,{p:2,bgcolor:b.lighter,textAlign:"left",children:Object(F.jsx)(M.a,{to:"/panel",style:{display:"inline-block"},children:Object(F.jsx)(T,{})})}),Object(F.jsx)(O.a,{px:0,py:4,children:t.map((function(e){return Object(F.jsx)(E,{my:2,mx:1,navItem:e},e.title+"_"+e.to)}))})]})})}var _=a(64);function z(e){var t=k((function(e){return e.logout})),a=u()(b.lightBg).alpha(.8).string(),n={lineHeight:"40px"};return Object(F.jsx)(O.a,{position:"fixed",top:0,right:0,left:"16.66667%",zIndex:1e3,children:Object(F.jsx)(O.a,{p:2,bgcolor:a,children:Object(F.jsx)(R.a,{container:!0,spacing:3,direction:"row-reverse",children:Object(F.jsx)(R.a,{item:!0,children:Object(F.jsx)(O.a,{children:Object(F.jsxs)(R.a,{container:!0,spacing:1,children:[Object(F.jsxs)(R.a,{item:!0,style:n,children:["Welcome ",e.user.fullName]}),Object(F.jsx)(R.a,{item:!0,style:n,children:Object(F.jsx)(_.a,{color:"primary",onClick:function(){t().finally((function(){Object(M.d)("/login")}))},children:"Logout"})}),Object(F.jsx)(R.a,{item:!0,children:Object(F.jsx)(A.a,{})})]})})})})})})}function H(e){var t,a,n=w((function(e){return e.dashboardSummary.item}));return Object(F.jsx)(O.a,{height:"100%",children:Object(F.jsx)(R.a,{container:!0,direction:"column",style:{height:"100%"},children:Object(F.jsx)(R.a,{item:!0,xs:12,children:Object(F.jsxs)(R.a,{container:!0,alignItems:"stretch",style:{height:"100%"},children:[Object(F.jsx)(R.a,{item:!0,md:2,xs:2,children:Object(F.jsx)(D,{countRequests:null!==(t=null===n||void 0===n?void 0:n.pendingRequests)&&void 0!==t?t:0,countWorkers:null!==(a=null===n||void 0===n?void 0:n.myWorkers)&&void 0!==a?a:0})}),Object(F.jsxs)(R.a,{item:!0,md:10,xs:10,children:[Object(F.jsx)(z,{user:e.user}),Object(F.jsx)(O.a,{px:2,pb:2,pt:12,children:e.children})]})]})})})})}function U(e){return Object(F.jsx)(F.Fragment,{children:e.children})}var V=a(36),Y=a(1919),J=a(1918);function G(e){var t=Object(V.a)(),a=Object(J.a)(t.breakpoints.up("md")),n=a?"right":"bottom";return Object(F.jsxs)(R.a,{container:!0,children:[Object(F.jsx)(R.a,{item:!0,md:5,xs:12,children:Object(F.jsx)(O.a,{px:4,bgcolor:b.lightest,style:{backgroundImage:"linear-gradient(to ".concat(n,", ").concat(b.lightest," 75%, ").concat("#fff",")")},height:a?"100vh":void 0,children:Object(F.jsxs)(O.a,{py:a?6:3,style:{textShadow:"0 0 8px #ffffff"},children:[Object(F.jsx)(T,{styles:{maxHeight:a?120:50,marginBottom:24}}),Object(F.jsx)(v.a,{variant:a?"h4":"h5",children:"Estreeh Management Portal"}),Object(F.jsx)(v.a,{children:"Please login to access your management portal."})]})})}),Object(F.jsx)(R.a,{item:!0,md:7,xs:12,children:Object(F.jsxs)(Y.a,{children:[a&&Object(F.jsx)(O.a,{py:4,children:Object(F.jsx)(T,{styles:{maxHeight:50,margin:"0 auto"}})}),Object(F.jsx)(O.a,{children:e.children})]})})]})}function Q(e){return Object(F.jsx)(Y.a,{children:Object(F.jsxs)(O.a,{m:5,p:3,boxShadow:b.shadow.niceShadow,children:[Object(F.jsx)(v.a,{variant:"h1",children:e.title}),Object(F.jsx)(v.a,{variant:"h5",children:e.subtitle}),Object(F.jsxs)(O.a,{py:2,children:[Object(F.jsx)(O.a,{mb:1,children:e.children}),Object(F.jsx)(O.a,{children:Object(F.jsx)(v.a,{children:Object(F.jsx)(W.a,{href:"/",children:"Back to homepage."})})})]})]})})}function K(e){return Object(F.jsx)(Q,{title:"404",subtitle:"\ud83e\udd28 Page not found",children:Object(F.jsx)(v.a,{children:"Sorry but the page you're looking for cannot be found. Please double check the link you have entered."})})}var X=a(5),$=a(141);function Z(e){var t=k((function(e){return e.login})),a=Object(n.useState)(!1),i=Object(X.a)(a,2),r=i[0],s=i[1],c=Object(n.useState)(""),o=Object(X.a)(c,2),l=o[0],d=o[1],u=Object(n.useState)(""),j=Object(X.a)(u,2),h=j[0],m=j[1],f=function(e){s(!1),void 0!==e&&console.log("Login error:",e)};return Object(F.jsx)(O.a,{children:Object(F.jsx)(O.a,{p:3,maxWidth:440,marginLeft:"auto",marginRight:"auto",my:5,boxShadow:b.shadow.niceShadow,borderRadius:b.borderRadius.niceRadius,children:Object(F.jsxs)("form",{children:[Object(F.jsx)($.a,{id:"username",label:"Email",variant:"outlined",value:h,onChange:function(e){return m(e.target.value)}}),Object(F.jsx)($.a,{id:"password",label:"Password",variant:"outlined",type:"password",value:l,onChange:function(e){return d(e.target.value)}}),Object(F.jsx)(O.a,{py:0,children:Object(F.jsxs)(R.a,{container:!0,spacing:1,children:[Object(F.jsx)(R.a,{item:!0,xs:6}),Object(F.jsx)(R.a,{item:!0,xs:6,children:Object(F.jsx)(O.a,{textAlign:"right",children:Object(F.jsx)(M.a,{to:"reset-password",children:Object(F.jsx)(O.a,{lineHeight:"38px",children:"Forgot password?"})})})})]})}),Object(F.jsx)(O.a,{py:3,textAlign:"center",children:Object(F.jsx)(_.a,{disabled:r,variant:"contained",color:"primary",onClick:function(){s(!0),t({email:h,password:l,app:"agency-be"}).then((function(e){void 0!==e&&void 0!==e.agencyId||f("User is not authorized to use this platform.")})).catch((function(e){f(e)}))},children:"Login"})})]})})})}var ee=a(25),te=a.n(ee),ae=a(43),ne=a(60),ie=a(18),re=a(1922),se=a(65),ce=a(1879),oe=a(225),le=a(1880),de=a(1923);function ue(e){var t=e.field.name.toString(),a=Object(n.useMemo)((function(){return void 0!==e.field.label?e.field.label:je(t)}),[e.field.label,t]),i="field_"+t,r=void 0!==e.field.type?e.field.type:"text",s=void 0!==e.field.variant?e.field.variant:"text",c=void 0!==e.defaultXs?e.defaultXs:12,o=void 0!==e.defaultMd?e.defaultMd:4,l=void 0!==e.field.xs?e.field.xs:c,d=void 0!==e.field.md?e.field.md:o,u=void 0!==e.size?e.size:"medium",j=Object(n.useMemo)((function(){return{shrink:!0}}),[]),h=(e.field.readOnly,"outlined"),b="textarea"===e.field.variant?3:void 0,m=void 0!==e.field.textareaLines?e.field.textareaLines:b,f=void 0!==e.field.numberMinimum?e.field.numberMinimum:0,p=Object(n.useMemo)((function(){return e.field.onChange?e.field.onChange:function(){}}),[e.field.onChange]),x=Object(n.useMemo)((function(){return void 0!==e.field.prefix?Object(F.jsx)(re.a,{position:"start",children:e.field.prefix}):void 0}),[e.field.prefix]),O=Object(n.useMemo)((function(){return void 0!==e.field.suffix?Object(F.jsx)(re.a,{position:"end",children:e.field.suffix}):void 0}),[e.field.suffix]),v=Object(n.useMemo)((function(){return void 0!==e.formik?e.formik.getFieldProps(t):{onChange:p,name:t,value:e.field.value,checked:e.field.value,onBlur:function(){}}}),[p,t,e.field.value,e.formik]),g=void 0!==e.formik&&e.formik.touched[t]&&void 0!==e.formik.errors[t],y=void 0!==e.formik&&e.formik.touched[t]&&e.formik.errors[t],k=Object(n.useMemo)((function(){return"select"===e.field.variant?e.field.selectOptions.length>0?e.field.selectOptions:[]:void 0}),[e.field]),w=Object(n.useMemo)((function(){return void 0!==k&&k.map((function(e){var t=void 0!==e.title?e.title:je(e.value);return Object(F.jsx)(se.a,{value:e.value,style:{color:e.color},children:t},"opt_"+e.value)}))}),[k]),C=Object(n.useMemo)((function(){return"switch"===s?Object(F.jsx)(ce.a,Object(S.a)(Object(S.a)({color:"primary"},v),{},{checked:v.value})):Object(F.jsx)(oe.a,Object(S.a)(Object(S.a)({color:"primary"},v),{},{checked:v.value}))}),[v,s]),T=void 0===e.formik&&!0!==e.field.ignoreUnboundCheck,M=Object(n.useMemo)((function(){return Object(F.jsxs)(F.Fragment,{children:[("file"!==s&&"switch"!==s&&"checkbox"!==s&&"select"!==e.field.variant||"select"===e.field.variant&&void 0!==k&&(null===k||void 0===k?void 0:k.length)>0)&&Object(F.jsx)($.a,Object(S.a)(Object(S.a)({id:i,color:"primary",variant:h,type:e.field.type,label:a+(T?" [UNBOUND]":""),size:u,select:"select"===s,multiline:"textarea"===s,rows:m,InputLabelProps:"date"===r?j:void 0,disabled:e.field.disabled||e.disabled,inputProps:{min:f,step:e.field.step},InputProps:{startAdornment:x,endAdornment:O,readOnly:e.field.readOnly,classes:e.field.readOnly?{notchedOutline:"notched-outline-no-border"}:void 0},error:g||T,helperText:y},v),{},{children:w})),("switch"===s||"checkbox"===s)&&Object(F.jsx)(le.a,Object(S.a)({control:C,label:a},v)),"file"===s&&Object(F.jsxs)(_.a,{variant:"contained",component:"label",children:[void 0!==e.field.buttonIcon&&Object(F.jsx)(de.a,{style:{marginRight:8},children:e.field.buttonIcon}),a,Object(F.jsx)("input",{type:"file",id:i,name:t,hidden:!0,onChange:function(a){if(null!==a.currentTarget.files){var n=a.currentTarget.files[0];void 0!==e.formik&&(console.log(n),e.formik.setFieldValue(t,n))}}})]}),"file"===s&&!1]})}),[C,g,v,h,y,i,a,j,w,t,f,x,e.disabled,e.field.avatarWidth,e.field.buttonIcon,e.field.disabled,e.field.readOnly,e.field.step,e.field.type,e.field.variant,e.formik,m,k,u,O,r,T,s]);return Object(F.jsx)(R.a,{item:!0,xs:l,md:d,children:M})}function je(e){if(void 0!==e){var t=("string"===typeof e?e:e.toString()).replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}throw new Error("Text is undefined")}function he(e){var t=void 0!==e.variant?e.variant:"normal",a="small"===t,n="normal"===t;return Object(F.jsx)(F.Fragment,{children:e.header&&Object(F.jsx)(O.a,{py:a?1:2,children:Object(F.jsx)(v.a,{variant:n?"h6":void 0,children:e.header})})})}function be(e){return Object(F.jsxs)(O.a,{children:[Object(F.jsx)(he,{header:e.header,variant:e.headerVariant}),Object(F.jsx)(O.a,{mb:2,children:Object(F.jsx)(v.a,{color:"primary",children:e.helpText})}),Object(F.jsxs)(R.a,{container:!0,spacing:2,alignItems:"center",children:[void 0!==e.fields&&e.fields.map((function(t){return Object(F.jsx)(ue,{formik:e.formik,field:t,defaultMd:e.md,defaultXs:e.xs,size:"small",disabled:e.disabled},t.name.toString())})),void 0!==e.children&&Object(F.jsx)(R.a,{item:!0,xs:e.xs,md:e.md,children:e.children})]})]})}var me=a(95),fe=a.n(me),pe=["Christian","Hindu","Muslim"],xe=["House Maid","Nanny","Driver","Chef","Farmer"],Oe=["Elementary School","Intermediary School","High School","College"],ve=["Cooking","Washing","Cleaning","Babysitting","Care of Elder"],ge=["Single","Married"],ye=["White","Fair","Brown","Black","N/A"],ke=([{fullTitle:"Lease hourly",title:"By Hour",isRentalHourly:!0,feesBhdUnit:"Hour",feesBhd:2},{fullTitle:"Lease monthly",title:"Full Month",isRentalMonthly:!0,feesBhd:10*fe.a.random.number({min:15,max:35}),feesBhdUnit:"Month"}].map((function(e){return e.fullTitle})),a(1924)),we=a(214),Se=a.n(we);function Ce(e){var t=[];if(Object.keys(e.errors).length>0)for(var a in e.errors)t.push({key:a,value:e.errors[a]});return Object(F.jsx)("ul",{style:{margin:0,padding:0},children:t.map((function(t){return Object(F.jsxs)("li",{style:Object(S.a)({listStylePosition:"inside",color:"red",fontSize:11},e.style),children:[Object(F.jsx)("strong",{children:Se.a.startCase(t.key)})," ",t.value]})}))})}function Fe(e){var t=void 0!==e.navigateUrl?e.navigateUrl:"success";return Object(F.jsxs)(O.a,{children:[Object(F.jsx)(O.a,{my:3,children:Object(F.jsx)(ke.a,{})}),Object(F.jsxs)(O.a,{my:3,textAlign:"right",maxWidth:160,marginLeft:"auto",children:[void 0!==e.errors&&Object(F.jsx)(O.a,{my:3,children:Object(F.jsx)(Ce,{errors:e.errors})}),Object(F.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"primary",type:e.type,onClick:function(){e.navigate&&e.navigate(t)},disabled:e.disabled,children:e.title})]})]})}var Te=["Philippines","Indonesia","India","Sri Lanka","Ethiopia","Kenya","Ghana"],Me=a(1925);function Re(e){var t=e.options,a=e.formik,i=e.arrayFieldName,r=a.values[i];Object(n.useEffect)((function(){l(t.map((function(e){var t=r.includes(e);return{name:e,checked:t,label:e,key:e,onClick:function(n){var r=a.values[i];t?r.splice(r.indexOf(e,0),1):r.push(e);var s=Object(S.a)({},a.values);s[i]=r,a.setValues(s)}}})))}),[i,r,a,t]);var s=Object(n.useState)([]),c=Object(X.a)(s,2),o=c[0],l=c[1];return console.log(r),Object(F.jsx)(Me.a,{row:!0,children:o.map((function(e){return Object(F.jsx)(le.a,{control:Object(F.jsx)(oe.a,{name:i+"_"+e.name,color:"primary",onClick:e.onClick,checked:e.checked}),label:e.label,name:i+"_Lbl_"+e.name},e.key)}))})}function Ae(e){var t=e.formik,a=e.disabled,n=e.id,i=e.worker,r=e.templateFields,s="https://d15f7urgawp38o.cloudfront.net/2y/sm/"+i._id+"."+i.smallPictureFileExt,c="https://d15f7urgawp38o.cloudfront.net/2y/lg/"+i._id+"."+i.bigPictureFileExt,o=[{name:"name"},{name:"referenceId"},{name:"jobTitle",variant:"select",selectOptions:xe.map((function(e){return{value:e}}))},{name:"monthlySalary"},{name:"phone"},{name:"isLocalTransfer",variant:"checkbox"}],l=[{name:"nationality",variant:"select",selectOptions:Te.map((function(e){return{value:e}}))},{name:"experienceYears",type:"number"},{name:"educationalLevel",variant:"select",selectOptions:Oe.map((function(e){return{value:e}}))},{name:"dateOfBirth",type:"date"},{name:"maritalStatus",variant:"select",selectOptions:ge.map((function(e){return{value:e}}))},{name:"age",type:"number"},{name:"weightKg"},{name:"complexion",variant:"select",selectOptions:ye.map((function(e){return{value:e}}))},{name:"religion",variant:"select",selectOptions:pe.map((function(e){return{value:e}}))},{name:"numberOfChildren",type:"number"},{name:"heightCm"},{name:"remarks",variant:"textarea",md:9}],d=[{value:"Poor"},{value:"Fair"},{value:"Fluent"}],u=[{name:"languageSkillEnglish",variant:"select",selectOptions:d},{name:"languageSkillArabic",variant:"select",selectOptions:d}];function j(){alert("To change picture please use the Upload Picture buttons near the end of this page.")}return Object(F.jsxs)("form",{onSubmit:t.handleSubmit,children:[void 0!==n&&Object(F.jsxs)(R.a,{container:!0,spacing:2,children:[Object(F.jsx)(R.a,{item:!0,children:Object(F.jsx)(A.a,{src:s,variant:"rounded",style:{width:90,height:90,cursor:"help"},onClick:j})}),Object(F.jsx)(R.a,{item:!0,xs:9,children:Object(F.jsx)(P,{title:i.name})})]}),Object(F.jsx)(be,{fields:o,header:"Main Information",formik:t,disabled:a}),Object(F.jsx)(be,{fields:[{name:"localTransferReason",variant:"textarea"}],md:7,formik:t,disabled:a}),Object(F.jsx)(be,{fields:r,header:"Process Template",disabled:a}),Object(F.jsx)(be,{fields:l,header:"Personal Details",formik:t,disabled:a}),Object(F.jsx)(be,{fields:[{name:"hidden",label:"Hide this worker",variant:"switch"},{name:"collected",label:"Worker collected (will also hide)",variant:"switch"}],header:"Show/Hide Settings",helpText:"WARNING: Enabling any of these options will hide the worker!",formik:t,disabled:a}),Object(F.jsx)(be,{fields:u,header:"Language Skills",formik:t,disabled:a}),Object(F.jsx)(be,{header:"Skills",xs:12,formik:t,disabled:a,children:Object(F.jsx)(Re,{options:ve,formik:t,arrayFieldName:"otherSkills"})}),Object(F.jsx)(be,{header:"Pictures",xs:12,children:Object(F.jsxs)(R.a,{container:!0,children:[Object(F.jsx)(R.a,{item:!0,xs:4,children:Object(F.jsx)(A.a,{src:s,variant:"rounded",style:{width:160,height:160,cursor:"help"},onClick:j})}),Object(F.jsx)(R.a,{item:!0,xs:4,children:Object(F.jsx)(A.a,{src:c,variant:"rounded",style:{width:240,height:320,cursor:"help"},onClick:j})})]})}),Object(F.jsx)(be,{fields:[{name:"uploadSmallPicture",variant:"file",avatarWidth:80,buttonIcon:"photo_camera"},{name:"uploadBigPicture",variant:"file",avatarWidth:200,buttonIcon:"photo_camera"}],formik:t,disabled:a}),Object(F.jsx)(be,{fields:[{name:"agencyRemarks",variant:"textarea"}],header:"Agency Only Information",helpText:"This information will be visible only to the Agency. It will NOT be visible to the customers.",md:7,formik:t,disabled:a}),Object(F.jsx)(Fe,{title:t.isSubmitting?"Saving...":"Save",errors:t.errors,type:"submit",disabled:a||t.isSubmitting})]})}var Pe=a(22),Ne=a.n(Pe);function Ie(e){var t=Object(n.useState)(!0),a=Object(X.a)(t,2),i=a[0],r=a[1],s=Object(n.useState)([]),c=Object(X.a)(s,2),o=c[0],l=c[1],d=Object(n.useState)(""),u=Object(X.a)(d,2),j=u[0],h=u[1],b=Object(n.useState)({addressOriginalCountry:{city:""},languageSkillArabic:"Fair",languageSkillEnglish:"Fair",agencyRemarks:"",cityOfBirth:"",demoLanguageSkillsText:"",educationalLevel:"",hidden:!1,collected:!1,isLocalTransfer:!1,jobExperiences:[],jobTitle:"",localTransferReason:"",maritalStatus:"",name:"",nationality:"",otherSkills:[],phone:"",processFees:0,processTemplateId:"",referenceId:"",remarks:"",weightKg:0}),m=Object(X.a)(b,2),f=m[0],p=m[1];function g(){var e=o.find((function(e){return e._id===j}));return void 0===e?0:e.totalFeesBhd}function y(){Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/process-templates",{withCredentials:!0}).then((function(e){l(e.data.data),r(!1)}))}Object(n.useEffect)((function(){i&&(void 0!==e.id?Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/workers-two-year/"+e.id,{withCredentials:!0}).then((function(e){var t=e.data.data;p(t),h(t.processTemplateId),y()})):y())}),[i,e.id]);var k=[{name:"processTemplateId",variant:"select",selectOptions:o.map((function(e){return{value:e._id?e._id:"NOVAL",title:e.title}})),value:j,onChange:function(e){h(e.target.value)},ignoreUnboundCheck:!0},{name:"processFees",readOnly:!0,value:g(),ignoreUnboundCheck:!0}],w=i;function C(e){var t=new FormData;return t.append("_id",e._id),t.append("folder",e.folder),t.append("file",e.file),Ne.a.request({method:"PUT",url:"https://estreeh-dev-apis.herokuapp.com/api/v1/be/workers-two-year/picture",data:t,withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})}function T(){return(T=Object(ae.a)(te.a.mark((function e(t,a){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://estreeh-dev-apis.herokuapp.com/api/v1/be/workers-two-year",n=a?"POST":"PUT",e.abrupt("return",Ne.a.request({url:"https://estreeh-dev-apis.herokuapp.com/api/v1/be/workers-two-year",method:n,data:t,withCredentials:!0}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(F.jsxs)(O.a,{children:[Object(F.jsx)(P,{title:void 0===e.id?"Add a New Worker":"Edit Worker"}),i&&Object(F.jsxs)(v.a,{children:["Loading ",Object(F.jsx)("strong",{children:"Worker Details"})," and"," ",Object(F.jsx)("strong",{children:"Process Templates..."})]}),!i&&o.length<1&&Object(F.jsxs)(v.a,{children:["To add a worker, you must add one ",Object(F.jsx)("b",{children:"Process Template"})," at least.",Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),'To do that, please access the "Process Templates" using the left-side navigation, or'," ",Object(F.jsx)(M.a,{to:"/panel/agency/settings/process-templates",children:"click here"}),"."]}),!i&&o.length>0&&Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(ne.a,{initialValues:f,validationSchema:ie.d({name:ie.e().required("Required"),experienceYears:ie.c().required("Required"),hidden:ie.a().required("Required")}),onSubmit:function(t,a){var n=a.setSubmitting;n(!0);var i=Object(S.a)(Object(S.a)({},t),{},{processTemplateId:j,processFees:g()}),r=void 0===e.id,s=[];(function(e,t){return T.apply(this,arguments)})(i,r).then((function(a){var i=a.data.data._id;void 0!==i&&(void 0!==t.uploadSmallPicture&&s.push(C({_id:i,file:t.uploadSmallPicture,folder:"2y/sm",navigateOut:r,result:a,setSubmitting:n})),void 0!==t.uploadBigPicture&&s.push(C({_id:i,file:t.uploadBigPicture,folder:"2y/lg",navigateOut:r,result:a,setSubmitting:n}))),Promise.all(s).finally((function(){!function(e){var t=e.result.data.message?e.result.data.message:"No Message.";x.b.success(t)}({result:a,navigateOut:r,setSubmitting:n}),void 0!==e.navigate&&(!0===r?e.navigate("/panel/my-workers/success"):e.navigate("/panel/my-workers"))}))})).catch((function(e){x.b.error(e.message)}))},children:function(t){return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(Ae,{id:e.id,formik:t,templateFields:k,disabled:w,worker:f})})}})})]})}var qe=a(1928),Be=a(121),Le=a(1929),We=a(120),Ee=a.n(We),De=a(87),_e=a(1926),ze=a(1927);function He(e){return Object(F.jsx)(O.a,{p:2.5,pb:0,style:{maxWidth:640},children:Object(F.jsx)($.a,{variant:"outlined",value:e.value,onChange:e.onChange,placeholder:"Search\u2026",InputProps:{startAdornment:Object(F.jsx)(_e.a,{fontSize:"small",style:{marginRight:8,color:b.primary}}),endAdornment:Object(F.jsx)(De.a,{title:"Clear","aria-label":"Clear",size:"small",style:{visibility:e.value?"visible":"hidden"},onClick:e.clearSearch,children:Object(F.jsx)(ze.a,{fontSize:"small",style:{color:b.text.warning}})})}})})}var Ue=function(e){var t=e.array,a=e.searchValue,n=new RegExp(a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");return t.filter((function(e){return Object.keys(e).some((function(t){return n.test(e[t].toString())}))}))};function Ve(e){var t=Object(n.useState)([]),a=Object(X.a)(t,2),i=a[0],r=a[1],s=w((function(e){return e.config.item})),c=Object(n.useState)(""),o=Object(X.a)(c,2),l=o[0],d=o[1],u=Object(n.useState)([]),j=Object(X.a)(u,2),h=j[0],b=j[1],m=function(e){if(d(e),""===e)b(i);else{var t=Ue({array:i,searchValue:e});b(t)}},f=[{sortable:!1,disableColumnMenu:!0,field:"actions",headerName:"Actions",width:140,renderCell:function(t){return Object(F.jsx)(O.a,{textAlign:"center",children:Object(F.jsx)(qe.a,{color:"primary",variant:"outlined",children:Object(F.jsx)(_.a,{size:"small",variant:"outlined",color:"primary",onClick:function(){console.log(t.row),e.navigate&&e.navigate("update/".concat(t.row.id))},children:Object(F.jsx)(Le.a,{fontSize:"small"})})})})}},{field:"created",headerName:"Date",sortable:!0,width:140,valueFormatter:function(e){return Ee()(e.row.created,"dd mmm yy")}},{field:"avatar",headerName:"Pic",disableColumnMenu:!0,renderCell:function(e){var t=e.row.workerTwoYear,a="/2y/sm/"+t._id+"."+t.smallPictureFileExt;return Object(F.jsx)(O.a,{children:Object(F.jsx)(A.a,{src:"https://d15f7urgawp38o.cloudfront.net"+a})})}},{field:"Worker Name",sortable:!0,width:200,valueGetter:function(e){return e.row.workerTwoYear.name}},{field:"statusCode",headerName:"Status",sortable:!0,width:180,renderCell:function(e){var t=null===s||void 0===s?void 0:s.statusCodesTwoYear.find((function(t){return t.code===e.row.statusCode}));return Object(F.jsx)(O.a,{px:1,py:.5,bgcolor:null===t||void 0===t?void 0:t.bgColor,borderRadius:50,whiteSpace:"normal",lineHeight:1,fontSize:"90%",width:"100%",textAlign:"center",children:null===t||void 0===t?void 0:t.title})}},{field:"fullName",headerName:"Applicant",sortable:!0,width:220},{field:"mobileNumber",headerName:"Mobile",sortable:!0,width:140},{field:"Tracking",sortable:!1,width:130,valueGetter:function(e){return e.row.trackingCode}},{field:"workerJobTitle",headerName:"Job",sortable:!1},{field:"workerNationality",headerName:"Nation.",sortable:!1}];return Object(n.useEffect)((function(){console.log("Preparing to get Requests"),Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/requests",{withCredentials:!0}).then((function(e){console.log("Got ".concat(e.data.data.length," requests"));var t=e.data.data.map((function(e){var t,a,n;return Object(S.a)(Object(S.a)({},e.applicationForm),{},{trackingCode:e.trackingCode,id:e._id,workerTwoYear:e.workerTwoYear,statusCode:e.statusCode,created:e.created,workerName:null===(t=e.workerTwoYear)||void 0===t?void 0:t.name,workerNationality:null===(a=e.workerTwoYear)||void 0===a?void 0:a.nationality,workerJobTitle:null===(n=e.workerTwoYear)||void 0===n?void 0:n.jobTitle,applicantName:e.applicationForm.fullName,applicantMobile:e.applicationForm.mobileNumber})}));r(t),b(t)}))}),[r]),Object(F.jsxs)(O.a,{children:[Object(F.jsx)(P,{title:"My Requests"}),Object(F.jsx)(O.a,{height:700,children:Object(F.jsx)(Be.a,{sortModel:[{field:"created",sort:"desc"}],disableSelectionOnClick:!0,rows:h,columns:f,pageSize:15,components:{Toolbar:He},componentsProps:{toolbar:{value:l,onChange:function(e){return m(e.target.value)},clearSearch:function(){return m("")}}}})})]})}function Ye(e){var t=Object(n.useState)([]),a=Object(X.a)(t,2),i=a[0],r=a[1],s=Object(n.useState)(""),c=Object(X.a)(s,2),o=c[0],l=c[1],d=Object(n.useState)([]),u=Object(X.a)(d,2),j=u[0],h=u[1],b=function(e){if(l(e),""===e)h(i);else{var t=Ue({array:i,searchValue:e});h(t)}},m=[{sortable:!1,disableColumnMenu:!0,field:"actions",headerName:"Worker CV",width:140,renderCell:function(t){return Object(F.jsx)(O.a,{textAlign:"center",children:Object(F.jsx)(qe.a,{color:"primary",variant:"outlined",children:Object(F.jsx)(_.a,{size:"small",variant:"outlined",color:"primary",onClick:function(){e.navigate&&e.navigate("edit/"+t.row._id)},children:Object(F.jsx)(Le.a,{fontSize:"small"})})})})}},{field:"referenceId",headerName:"REF",sortable:!0,width:200},{field:"avatar",headerName:"Pic",disableColumnMenu:!0,renderCell:function(e){var t="/2y/sm/"+e.row._id+"."+e.row.smallPictureFileExt;return Object(F.jsx)(O.a,{children:Object(F.jsx)(A.a,{src:"https://d15f7urgawp38o.cloudfront.net"+t})})}},{field:"nationality",headerName:"Nationality",width:200},{field:"name",headerName:"Worker Name",sortable:!0,width:250},{field:"jobTitle",headerName:"Job Title",sortable:!0,description:"Job title of the worker",width:200},{field:"hidden",headerName:"Hidden",width:130},{field:"collected",headerName:"Collected",width:140}];return Object(n.useEffect)((function(){Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/workers-two-year",{withCredentials:!0}).then((function(e){r(e.data.data),h(e.data.data)}))}),[r]),Object(F.jsxs)(O.a,{children:[Object(F.jsx)(P,{title:"My Workers"}),Object(F.jsx)(O.a,{height:700,children:Object(F.jsx)(Be.a,{rows:j,columns:m,pageSize:15,components:{Toolbar:He},componentsProps:{toolbar:{value:o,onChange:function(e){return b(e.target.value)},clearSearch:function(){return b("")}}}})})]})}var Je=function(e){var t=e.fontSize?e.fontSize:13;return Object(F.jsxs)(O.a,{title:e.title,style:Object(S.a)({fontSize:t,color:b.text.secondary},e.style),children:["string"===typeof e.children&&Object(F.jsx)("div",{dangerouslySetInnerHTML:{__html:e.children}}),"string"!==typeof e.children&&Object(F.jsx)(F.Fragment,{children:e.children})]})},Ge=function(e){var t=void 0===e.oneLine||e.oneLine,a=e.oneLineTitleSizeMd?e.oneLineTitleSizeMd:3,n=e.oneLineValueSizeMd?e.oneLineValueSizeMd:9,r=t?a:3,s=t?n:3;return Object(F.jsxs)(i.a.Fragment,{children:[Object(F.jsx)(R.a,{item:!0,xs:6,md:r,children:Object(F.jsx)(O.a,{pb:.5,children:Object(F.jsx)(Je,{style:Object(S.a)({fontWeight:"bold"},e.style),children:e.title})})}),Object(F.jsx)(R.a,{item:!0,xs:6,md:s,children:Object(F.jsx)(O.a,{pb:.5,children:Object(F.jsx)(Je,{style:e.style,children:e.children})})})]})};function Qe(e){var t=e.applicationForm,a=e.headerVariant;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(v.a,{variant:a,children:"Application Details"}),Object(F.jsx)(O.a,{my:2,children:Object(F.jsxs)(R.a,{container:!0,children:[Object(F.jsx)(Ge,{title:"Full Name",children:t.fullName}),Object(F.jsx)(Ge,{title:"Mobile",children:t.mobileNumber}),Object(F.jsx)(Ge,{title:"Other Mobile",children:t.otherMobileNumber}),Object(F.jsx)(Ge,{title:"Special Notes",children:t.specialNotes})]})})]})}function Ke(e){var t,a=e.worker,n=e.headerVariant;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(v.a,{variant:n,children:"Requested Worker"}),Object(F.jsx)(O.a,{my:2,children:Object(F.jsxs)(R.a,{container:!0,spacing:2,children:[Object(F.jsx)(R.a,{item:!0,xs:4,children:Object(F.jsx)(A.a,{src:"".concat("https://d15f7urgawp38o.cloudfront.net","/").concat("2y/sm","/").concat(a.id,".").concat(a.smallPictureFileExt),style:{width:"100%",minHeight:160,alignSelf:"center"},variant:"rounded"})}),Object(F.jsx)(R.a,{item:!0,xs:8,children:Object(F.jsxs)(R.a,{container:!0,children:[Object(F.jsx)(Ge,{title:"Agency",children:null===(t=a.agency)||void 0===t?void 0:t.title}),Object(F.jsx)(Ge,{title:"Ref #",children:a.referenceId}),Object(F.jsx)(Ge,{title:"Name",children:a.name}),Object(F.jsx)(Ge,{title:"Nationality",children:a.nationality}),Object(F.jsx)(Ge,{title:"Job Title",children:a.jobTitle}),Object(F.jsxs)(Ge,{title:"Salary",children:["BHD ",a.monthlySalary," / Month"]}),Object(F.jsxs)(Ge,{title:"Processing Fees",children:["BHD ",a.processFees]}),Object(F.jsxs)(Ge,{title:"Contract Period",children:[a.contractPeriod," Years"]})]})})]})})]})}function Xe(e){var t=e.history,a=e.config.statusCodesTwoYear.find((function(e){return e.code===t.statusCode}));return Object(F.jsx)(O.a,{boxShadow:"0 0 9px "+b.primary+"44",my:1,py:1,px:2,borderRadius:16,children:Object(F.jsx)(Je,{children:Object(F.jsxs)(R.a,{container:!0,spacing:1,children:[Object(F.jsx)(R.a,{item:!0,xs:12,md:8,children:Object(F.jsx)(O.a,{color:"cornflowerblue",fontWeight:"bold",children:null===a||void 0===a?void 0:a.title})}),Object(F.jsx)(R.a,{item:!0,xs:12,md:4,children:Object(F.jsx)(O.a,{textAlign:"right",fontStyle:"italic",children:Ee()(t.created,"d mmm yyyy, h:MM tt")})}),Object(F.jsx)(R.a,{item:!0,xs:12,md:6,children:t.statusRemarks}),Object(F.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(F.jsx)(O.a,{style:{color:"yellowgreen",textAlign:"right"},fontStyle:"italic",children:t.createdBy})})]})})})}function $e(e){var t=e.formik,a=e.disabled,n=e.request,i=e.dropdownOptions,r=e.config,s=[{name:"statusCode",variant:"select",selectOptions:i},{name:"statusRemarksNew",label:"Remarks",variant:"textarea"}];return Object(F.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(F.jsxs)(R.a,{container:!0,spacing:2,children:[Object(F.jsx)(R.a,{item:!0,md:6,xs:12,children:Object(F.jsx)(be,{header:"Agency Actions",fields:s,md:12,formik:t})}),Object(F.jsx)(R.a,{item:!0,md:6,xs:12,children:Object(F.jsx)(be,{header:"History",md:12,children:n.statusHistory.map((function(e){return Object(F.jsx)(Xe,{history:e,config:r},e.created.toString()+e.createdByUserId)}))})})]}),Object(F.jsx)(Fe,{title:"Save",type:"submit",disabled:a||t.isSubmitting})]})}function Ze(e){var t=w((function(e){return e.config.item})),a=Object(n.useState)(!0),i=Object(X.a)(a,2),r=i[0],s=i[1],c=Object(n.useState)(null),o=Object(X.a)(c,2),l=o[0],d=o[1],u=[],j=null===l||void 0===l?void 0:l.status;void 0!==t&&(u=null!==l&&void 0!==(null===j||void 0===j?void 0:j.nextCodes)?t.statusCodesTwoYear.filter((function(e){return j.nextCodes.includes(e.code)||e.code===l.statusCode})):t.statusCodesTwoYear);var h=u.map((function(e){return{value:e.code,title:e.title,color:e.isReject?"red":0===e.nextCodes.length?"darkgreen":void 0}}));return Object(n.useEffect)((function(){r&&Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/requests/"+e.id,{withCredentials:!0}).then((function(e){s(!1),d(e.data.data)}))}),[r,e.id]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(P,{title:"Update Request",children:["Tracking # ",null===l||void 0===l?void 0:l.trackingCode]}),null!==l&&void 0!==l.workerTwoYear&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(O.a,{children:Object(F.jsxs)(R.a,{container:!0,children:[Object(F.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(F.jsx)(Qe,{headerVariant:"h6",applicationForm:l.applicationForm})}),Object(F.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(F.jsx)(Ke,{headerVariant:"h6",worker:l.workerTwoYear})})]})}),Object(F.jsx)(O.a,{children:Object(F.jsx)(ne.a,{initialValues:l,validationSchema:ie.d({statusCode:ie.c().required("Required")}),onSubmit:function(e,t){var a=t.setSubmitting;Ne.a.put("https://estreeh-dev-apis.herokuapp.com/api/v1/be/requests",e,{withCredentials:!0}).then((function(e){x.b.success(e.data.message),a(!1),s(!0)}))},children:function(e){return Object(F.jsx)($e,{formik:e,request:l,disabled:r,dropdownOptions:h,config:t})}})})]})]})}var et=a.p+"static/media/check.6b6350a4.svg";function tt(e){return Object(F.jsxs)(O.a,{textAlign:"center",children:[Object(F.jsx)(O.a,{maxWidth:120,mx:"auto",pb:3,children:Object(F.jsx)("img",{src:et,style:{display:"block"},alt:"success"})}),Object(F.jsx)(v.a,{variant:"h5",children:"Success!"}),Object(F.jsx)(O.a,{py:1,children:Object(F.jsx)(v.a,{variant:"h6",children:e.bigText})}),Object(F.jsx)(O.a,{children:Object(F.jsx)(v.a,{children:e.smallText})}),Object(F.jsx)(O.a,{p:2,children:Object(F.jsx)(ke.a,{variant:"middle"})}),Object(F.jsx)(O.a,{children:e.children})]})}function at(e){var t=void 0!==e.navigate?e.navigate:function(e){};return Object(F.jsxs)(tt,{bigText:"".concat(e.message," successfully"),children:[Object(F.jsx)(_.a,{variant:"contained",color:"primary",style:{marginRight:16},onClick:function(){t("../add")},children:"Add Another"}),Object(F.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){t("..")},children:"Workers List"})]})}function nt(e){var t=void 0!==e.navigate?e.navigate:function(e){};return Object(F.jsx)(tt,{bigText:"Request updated successfully",children:Object(F.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){t("..")},children:"Done"})})}var it=a(19),rt={bahrain:{currencyCode:"BHD",currencySymbol:"BD",currencySymbolAr:"\u062f.\u0628",currencyDecimals:3,fixedProcessFees:{lmraFees:20,vatPercentage:.05,workPermitFees:30}}};function st(e){var t=e.process,a=e.region.currencyCode,n=!e.editing||e.saving,i=[{name:"title",readOnly:n}],r=[{name:"processFeesBhd",readOnly:n,suffix:a,type:"number"},{name:"governmentFeesBhd",readOnly:n,type:"number",suffix:a},{name:"insuranceFeesBhd",readOnly:n,suffix:a,type:"number"},{name:"accommodationFeesBhd",readOnly:n,suffix:a,type:"number"},{name:"otherFeesLabel",defaultValue:t.otherFeesLabel,readOnly:n,variant:"text"},{name:"otherFeesBhd",readOnly:n,suffix:a,type:"number"}],s=[{name:"vatFeesBhd",readOnly:n,suffix:a},{name:"totalFeesBhd",readOnly:!0,suffix:a}],c=[{name:"processDurationMinimumMonths",label:"Minimum",type:"number",readOnly:n,step:.25,suffix:"Months",defaultValue:t.processDurationMinimumMonths>0?t.processDurationMinimumMonths:void 0},{name:"processDurationMaximumMonths",label:"Maximum",type:"number",readOnly:n,suffix:"Months",step:.25,defaultValue:t.processDurationMaximumMonths>0?t.processDurationMaximumMonths:void 0}];return Object(F.jsxs)(O.a,{px:1,children:[Object(F.jsx)(be,{header:"Process Name",fields:i,md:6,headerVariant:"small",formik:e.formik}),Object(F.jsx)(be,{fields:r,md:4,headerVariant:"small",formik:e.formik}),Object(F.jsx)(be,{fields:s,md:4,headerVariant:"small",formik:e.formik}),Object(F.jsx)(be,{header:"Durations",fields:c,md:4,headerVariant:"small",formik:e.formik})]})}function ct(e){var t=Object(n.useState)(e.newItem),a=Object(X.a)(t,2),i=a[0],r=a[1],s=Object(n.useState)(!1),c=Object(X.a)(s,2),o=c[0],l=c[1],d=e.process.countAssignedWorkers,u="0.7rem",j=.25;return Object(F.jsx)(O.a,{boxShadow:b.shadow.niceShadow,borderRadius:b.borderRadius.niceRadius,border:i?"2px dashed blue":"1px solid "+b.lighter,p:1,my:1,children:Object(F.jsx)(ne.a,{initialValues:e.process,validationSchema:ie.d({title:ie.e().min(3,"Minimum 3 characters").required("Required"),accommodationFeesBhd:ie.c().required("Required"),governmentFeesBhd:ie.c().required("Required"),insuranceFeesBhd:ie.c().required("Required"),otherFeesBhd:ie.c().required("Required"),vatFeesBhd:ie.c().required("Required"),processFeesBhd:ie.c().min(5,"Minimum ".concat(5," BHD")).required("Required"),otherFeesLabel:ie.e().required("Required"),agencyId:ie.e().optional(),countAssignedWorkers:ie.c().optional(),created:ie.b().optional(),modified:ie.b().optional(),processDurationMinimumMonths:ie.c().min(j,"Minimum ".concat(j," Months")).required("Required"),processDurationMaximumMonths:ie.c().min(j,"Minimum ".concat(j," Months")).required("Required"),totalFeesBhd:ie.c().optional(),vatPercentage:ie.c().optional(),_id:ie.e().optional(),id:ie.e().optional()}),onSubmit:function(e,t){var a=t.setSubmitting;a(!0),l(!0);var n=void 0===e._id?"POST":"PUT";Ne.a.request({method:n,url:"https://estreeh-dev-apis.herokuapp.com/api/v1/be/process-templates",data:e,withCredentials:!0}).then((function(e){x.b.success(e.data.message),r(!1),l(!1),a(!1)})).catch((function(e){x.b.error(e.message),l(!1),a(!1)}))},children:function(t){return Object(F.jsx)("form",{onSubmit:t.handleSubmit,children:Object(F.jsxs)(R.a,{container:!0,spacing:2,alignItems:"flex-end",children:[Object(F.jsxs)(R.a,{item:!0,md:10,xs:12,children:[Object(F.jsx)(st,{process:e.process,region:e.region,editing:i,saving:o,formik:t})," "]}),Object(F.jsx)(R.a,{item:!0,md:2,xs:12,children:Object(F.jsxs)(O.a,{p:1,children:[Object(F.jsxs)(O.a,{p:1,textAlign:"center",fontSize:u,children:["Assigned Workers: ",d]}),i&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Ce,{errors:t.errors,style:{fontSize:u}}),Object(F.jsx)(O.a,{my:1,textAlign:"center",fontSize:u,color:"blue",fontStyle:"italic",children:0===Object.keys(t.errors).length&&Object(F.jsxs)(F.Fragment,{children:["Please save your changes",d>0?", they will be applied automatically to ".concat(d," workers"):""]})}),Object(F.jsx)(_.a,{fullWidth:!0,color:"primary",variant:"outlined",disabled:o,type:"submit",children:o?"Saving...":"Save"})]}),!i&&Object(F.jsx)(_.a,{fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){r(!0)},children:"Edit"})]})})]})})}})})}function ot(e){var t=Object(n.useState)([]),a=Object(X.a)(t,2),i=a[0],r=a[1],s=Object(n.useState)(!0),c=Object(X.a)(s,2),o=c[0],l=c[1],d=function(){r((function(e){return[].concat(Object(it.a)(e),[{accommodationFeesBhd:0,insuranceFeesBhd:0,otherFeesBhd:0,processFeesBhd:0,processDurationMaximumMonths:0,processDurationMinimumMonths:0,vatFeesBhd:0,governmentFeesBhd:0,vatPercentage:0,title:"",agencyId:"",otherFeesLabel:"Others",countAssignedWorkers:0,totalFeesBhd:0,created:new Date,modified:new Date}])}))};Object(n.useEffect)((function(){o&&(console.log("Loading process templates..."),Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/process-templates",{withCredentials:!0}).then((function(e){r(e.data.data),console.log("Process templates loaded"),l(!1),0===e.data.data.length&&d()})))}));var u=Object(F.jsx)(O.a,{children:Object(F.jsx)(_.a,{color:"primary",variant:"contained",onClick:d,children:"+ Add More"})});return Object(F.jsxs)(O.a,{children:[Object(F.jsx)(P,{title:"Process Templates"}),Object(F.jsx)(O.a,{children:i.map((function(e,t){return Object(F.jsx)(ct,{process:e,region:rt.bahrain,newItem:void 0===e._id},e._id)}))}),u,Object(F.jsx)(Fe,{title:"Exit",navigate:e.navigate,navigateUrl:"/panel/dashboard"})]})}function lt(e){return Object(F.jsx)(Q,{title:"401",subtitle:"\u274c Unauthorized",children:Object(F.jsxs)(v.a,{children:["Unauthorized or session has expired. Please make sure you have ",Object(F.jsx)(W.a,{href:"/login",children:"logged in"}),"."]})})}var dt=a(1932);function ut(e){var t=Object(n.useState)({}),a=Object(X.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!0),o=Object(X.a)(c,2),l=o[0],d=o[1];Object(n.useEffect)((function(){l&&Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/agency",{withCredentials:!0}).then((function(e){s(e.data.data),d(!1)}))}),[l,d]);var u=[{name:"title",label:"Agency Name (English)",readOnly:!0},{name:"titleAr",label:"Agency Name (Arabic)",readOnly:!0},{name:"cr",readOnly:!0,defaultValue:fe.a.datatype.number({min:1e4,max:99999})+"-"+fe.a.datatype.number({min:0,max:9})},{name:"telephone"},{name:"mobile"},{name:"email"},{name:"openingTimes",md:12,variant:"textarea",textareaLines:4}],j=[{name:"uploadLogo",variant:"file",buttonIcon:"photo_camera"}],h=[{name:"Local Transfer Worker Terms & Conditions",variant:"textarea",textareaLines:11}],b=Object(F.jsxs)(O.a,{children:[Object(F.jsx)(P,{title:"Nationalities"}),Object(F.jsx)(be,{xs:12,children:Object(F.jsx)(Me.a,{row:!0,children:Te.map((function(e){return Object(F.jsx)(le.a,{control:Object(F.jsx)(oe.a,{name:"nationality_"+e,color:"primary"}),label:e},e)}))})})]}),m=Object(F.jsx)(O.a,{my:4,children:Object(F.jsx)(ke.a,{})});function f(t){t(!1),e.navigate&&e.navigate("success")}return Object(F.jsx)(F.Fragment,{children:!l&&Object(F.jsx)(ne.a,{initialValues:r,validationSchema:ie.d({}),onSubmit:function(e,t){var a=t.setSubmitting;a(!0);Ne.a.request({method:"PUT",url:"https://estreeh-dev-apis.herokuapp.com/api/v1/be/agency",data:e,withCredentials:!0}).then((function(t){x.b.success(t.data.message),void 0!==e.uploadLogo?function(e,t){var a=new FormData;a.append("file",e),Ne.a.request({method:"PUT",url:"https://estreeh-dev-apis.herokuapp.com/api/v1/be/agency/picture",data:a,withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){f(t)}))}(e.uploadLogo,a):f(a)})).catch((function(e){x.b.error(e.message),a(!1)}))},children:function(t){return Object(F.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(F.jsxs)(i.a.Fragment,{children:[Object(F.jsx)(P,{title:"Agency Settings"}),Object(F.jsx)(be,{fields:u,md:6,formik:t}),Object(F.jsx)(be,{header:"Images",xs:12,children:Object(F.jsx)(R.a,{container:!0,children:Object(F.jsx)(R.a,{item:!0,xs:4,children:Object(F.jsx)(A.a,{src:"https://d15f7urgawp38o.cloudfront.net/agency/sm/"+r._id+"."+r.logoFileExt,variant:"rounded",style:{width:160,height:160}})})})}),Object(F.jsx)(be,{xs:12,fields:j,formik:t})]}),m,e.showNationalitiesSection&&b,e.showTermsAndConditionsSection&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P,{title:"Terms & Conditions"}),Object(F.jsx)(be,{fields:h,md:12,formik:t})]}),m,Object(F.jsxs)(i.a.Fragment,{children:[Object(F.jsx)(P,{title:"Payment Methods"}),Object(F.jsx)(O.a,{children:Object(F.jsx)(dt.a,{severity:"info",children:"Currently only Cash option is available. More options will be available in near future."})}),Object(F.jsx)(Fe,{errors:t.errors,type:"submit",title:"save",disabled:t.isSubmitting})]})]})}})})}function jt(e){var t=void 0!==e.navigate?e.navigate:function(e){};return Object(F.jsx)(tt,{bigText:"Agency settings updated successfully",smallText:"If you have updated the logo, it might take up to 60 seconds to appear.",children:Object(F.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){t("/panel/dashboard")},children:"Done"})})}var ht=a(216),bt=a.n(ht);function mt(e){var t=w((function(e){return e.agency.item})),a="https://demo.estreeh.com/agencies/contract/"+(null===t||void 0===t?void 0:t.slug);return Object(F.jsxs)(O.a,{children:[Object(F.jsx)(P,{title:"QR Code Print"}),Object(F.jsx)(O.a,{children:"Use this page to generate a printable QR Code that redirects customers to your own ESTREEH page!"}),Object(F.jsx)(O.a,{my:2,children:Object(F.jsx)(v.a,{variant:"h5",children:"QR Code"})}),Object(F.jsx)(O.a,{p:3,children:Object(F.jsx)(bt.a,{value:a,size:400})}),Object(F.jsx)(O.a,{px:3,py:1,children:Object(F.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",children:a})})]})}function ft(e){var t=w((function(e){return e.user.item}));return Object(F.jsxs)(M.c,{primary:!1,children:[void 0===t&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(M.b,{from:"/",to:"/login",noThrow:!0}),Object(F.jsx)(M.b,{from:"/panel",to:"/login",noThrow:!0}),Object(F.jsx)(lt,{default:!0}),Object(F.jsx)(G,{path:"login",children:Object(F.jsx)(Z,{path:"/"})})]}),void 0!==t&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(M.b,{from:"/",to:"/panel",noThrow:!0}),Object(F.jsx)(M.b,{from:"/login",to:"/panel",noThrow:!0}),Object(F.jsx)(K,{default:!0}),Object(F.jsxs)(H,{path:"panel",user:t,children:[Object(F.jsx)(M.b,{from:"/",to:"dashboard",noThrow:!0}),Object(F.jsx)(B,{path:"dashboard",user:t}),Object(F.jsxs)(U,{path:"my-workers",children:[Object(F.jsx)(Ye,{path:"/"}),Object(F.jsx)(Ie,{path:"add"}),Object(F.jsx)(Ie,{path:"edit/:id"}),Object(F.jsx)(at,{path:"success",message:"New worker added"}),Object(F.jsx)(at,{path:"success-edit",message:"Worker updated"})]}),Object(F.jsxs)(U,{path:"my-requests",children:[Object(F.jsx)(Ve,{path:"/"}),Object(F.jsx)(Ze,{path:"update/:id"}),Object(F.jsx)(nt,{path:"success"})]}),Object(F.jsxs)(U,{path:"agency/settings",children:[Object(F.jsx)(ut,{default:!0,showNationalitiesSection:!1,showTermsAndConditionsSection:!1}),Object(F.jsx)(ot,{path:"process-templates"}),Object(F.jsx)(jt,{path:"success"}),Object(F.jsx)(mt,{path:"qr-code"})]})]})]})]})}function pt(e){var t=w((function(e){return e.dataLoaded.item})),a=k((function(e){return e.loadAllInit}));return Object(n.useEffect)((function(){!1===t&&(console.log("Loading all data init"),a())}),[t,a]),Object(F.jsxs)(F.Fragment,{children:[!0===t&&Object(F.jsx)(ft,{}),!1===t&&Object(F.jsxs)(O.a,{p:2,textAlign:"center",children:[Object(F.jsx)(O.a,{py:5,children:Object(F.jsx)(T,{styles:{maxHeight:80,marginLeft:"auto",marginRight:"auto"}})}),Object(F.jsx)(v.a,{variant:"h5",children:"Loading..."})]})]})}function xt(e){var t=m(),a="ltr";return document.documentElement.dir=a,document.documentElement.lang="en",document.body.dir=a,document.body.lang="en",Object(F.jsxs)(c.a,{theme:p,children:[Object(F.jsx)("link",{rel:"stylesheet",href:"https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"}),Object(F.jsx)(x.a,{}),Object(F.jsx)("div",{className:t.root,id:"after-root",dir:a,style:{height:"100%",fontFamily:b.fontFamily.body},children:Object(F.jsx)(pt,{})})]})}a(1874);var Ot=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,e.prev=1,e.next=4,Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/auth/me/agency-be",{withCredentials:!0});case 4:n=e.sent,a=n.data.data,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return void 0!==a&&(t.user.setItem(a),x.b.success("Welcome, ".concat(a.fullName,"!"))),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),vt=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/agency",{withCredentials:!0});case 2:a=e.sent,t.agency.setItem(a.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),gt=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/pub/config",{withCredentials:!0});case 2:a=e.sent,t.config.setItem(a.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),yt=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),kt=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),wt=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/be/dashboard",{withCredentials:!0});case 2:a=e.sent,t.dashboardSummary.setItem(a.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),St=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dataLoading.setItem(!0),e.next=3,Promise.all([t.loadUser(),t.loadConfig()]);case 3:if(a=e.sent,n=Object(X.a)(a,1),void 0===n[0]){e.next=9;break}return e.next=9,Promise.all([t.loadAgency(),t.loadDashboardSummary(),t.loadAgency()]);case 9:t.dataLoading.setItem(!1),t.dataLoaded.setItem(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ct=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t,a){var n,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.post("https://estreeh-dev-apis.herokuapp.com/api/v1/auth/login",a,{withCredentials:!0});case 2:return n=e.sent,void 0!==(i=n.data.data)&&t.dataLoaded.setItem(!1),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Ft=Object(g.e)(function(){var e=Object(ae.a)(te.a.mark((function e(t){var a,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.a.get("https://estreeh-dev-apis.herokuapp.com/api/v1/auth/logout",{withCredentials:!0});case 2:return a=e.sent,t.user.setItem(void 0),n=a.data.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Tt=function(e){return{item:e,setItem:Object(g.b)((function(e,t){e.item=t}))}},Mt={agency:Tt(),user:Tt(),config:Tt(),dashboardSummary:Tt(),dataLoading:Tt(!1),dataLoaded:Tt(!1),loadAllInit:St,loadUser:Ot,loadAgency:vt,loadConfig:gt,loadRequests:yt,loadDashboardSummary:wt,loadWorkers:kt,login:Ct,logout:Ft},Rt=Object(g.c)(Mt);var At=function(){return Object(F.jsx)(g.a,{store:Rt,children:Object(F.jsx)(xt,{useRtl:!1})})},Pt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1936)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),r(e),s(e)}))};s.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)(At,{})}),document.getElementById("root")),Pt()},246:function(e,t,a){}},[[1875,1,2]]]);
//# sourceMappingURL=main.5b3f8ba3.chunk.js.map